(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74456,e=>{"use strict";let t,i,r;var n=e.i(70795),s=e.i(50067);let a=e=>{let t,i=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),i.forEach(i=>i(t,e))}},n=()=>t,s={setState:r,getState:n,getInitialState:()=>a,subscribe:e=>(i.add(e),()=>i.delete(e))},a=t=e(r,n,s);return s},o=e=>{let t=e?a(e):a,i=e=>(function(e,t=e=>e){let i=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(i),i})(t,e);return Object.assign(i,t),i},l=e=>t=>{try{let i=e(t);if(i instanceof Promise)return i;return{then:e=>l(e)(i),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>l(t)(e)}}},h=(t?o(t):o)((i=e=>({currentUrl:"https://www.google.com",history:[],clipboard:[],activeView:"landing",isSidebarCollapsed:!1,studentMode:!1,selectedEngine:"google",theme:"dark",appName:n.default.env.NEXT_PUBLIC_APP_NAME||"Comet",isCodingMode:!1,tabs:[{id:"default",url:"https://www.google.com",title:"New Tab"}],activeTabId:"default",sidebarWidth:320,sidebarSide:"left",isVibrant:!0,isSafeSearch:!0,showSiteWarnings:!0,installDismissed:!1,bookmarks:[],offlinePages:[],unifiedCart:[],passwords:[],autofillEnabled:!0,excelAutofillData:[],aiProvider:"openai",localLLMModel:"Llama-3-Lightweight",setCurrentUrl:t=>e({currentUrl:t}),addToHistory:t=>e(e=>({history:[t,...e.history.slice(0,50)]})),addClipboardItem:t=>e(e=>e.clipboard.includes(t)?e:{clipboard:[t,...e.clipboard.slice(0,19)]}),setActiveView:t=>e({activeView:t}),toggleSidebar:()=>e(e=>({isSidebarCollapsed:!e.isSidebarCollapsed})),setStudentMode:t=>e({studentMode:t}),setSelectedEngine:t=>e({selectedEngine:t}),setTheme:t=>e({theme:t}),setAppName:t=>e({appName:t}),setCodingMode:t=>e({isCodingMode:t}),addTab:(t="https://www.google.com")=>e(e=>{let i=`tab-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;return{tabs:[...e.tabs,{id:i,url:t,title:"New Tab"}],activeTabId:i,currentUrl:t,activeView:"browser"}}),removeTab:t=>e(e=>{let i=e.tabs.filter(e=>e.id!==t),r=i.length?i:[{id:"default",url:"https://www.google.com",title:"New Tab"}],n=e.activeTabId===t?r[0]?.id||"default":e.activeTabId,s=r.find(e=>e.id===n)?.url||"https://www.google.com";return{tabs:r,activeTabId:n,currentUrl:s}}),setActiveTab:t=>e(e=>({activeTabId:t,activeView:"browser",currentUrl:e.tabs.find(e=>e.id===t)?.url||e.currentUrl})),updateTab:(t,i)=>e(e=>({tabs:e.tabs.map(e=>e.id===t?{...e,...i}:e),currentUrl:t===e.activeTabId&&i.url?i.url:e.currentUrl})),setSidebarWidth:t=>e({sidebarWidth:t}),setSidebarSide:t=>e({sidebarSide:t}),setVibrant:t=>e({isVibrant:t}),setSafeSearch:t=>e({isSafeSearch:t}),setSiteWarnings:t=>e({showSiteWarnings:t}),addBookmark:(t,i)=>e(e=>({bookmarks:[...e.bookmarks,{id:`bmk-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,url:t,title:i}]})),removeBookmark:t=>e(e=>({bookmarks:e.bookmarks.filter(e=>e.id!==t)})),savePageOffline:(t,i,r)=>e(e=>({offlinePages:[...e.offlinePages,{id:`off-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,url:t,title:i,html:r,timestamp:Date.now()}]})),addToUnifiedCart:t=>e(e=>({unifiedCart:[...e.unifiedCart,{...t,id:`cart-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}]})),removeFromCart:t=>e(e=>({unifiedCart:e.unifiedCart.filter(e=>e.id!==t)})),clearClipboard:()=>e({clipboard:[]}),addPassword:t=>e(e=>({passwords:[...e.passwords,{...t,id:`pwd-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}]})),removePassword:t=>e(e=>({passwords:e.passwords.filter(e=>e.id!==t)})),setAutofillEnabled:t=>e({autofillEnabled:t}),setExcelAutofillData:t=>e({excelAutofillData:t}),setAIProvider:t=>e({aiProvider:t})}),r={name:"comet-browser-storage"},(e,t,n)=>{let s,a={storage:function(e,t){let i;try{i=e()}catch(e){return}return{getItem:e=>{var t;let r=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=i.getItem(e))?t:null;return n instanceof Promise?n.then(r):r(n)},setItem:(e,t)=>i.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>i.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},o=!1,h=new Set,u=new Set,c=a.storage;if(!c)return i((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),e(...t)},t,n);let d=()=>{let e=a.partialize({...t()});return c.setItem(a.name,{state:e,version:a.version})},f=n.setState;n.setState=(e,t)=>(f(e,t),d());let p=i((...t)=>(e(...t),d()),t,n);n.getInitialState=()=>p;let m=()=>{var i,r;if(!c)return;o=!1,h.forEach(e=>{var i;return e(null!=(i=t())?i:p)});let n=(null==(r=a.onRehydrateStorage)?void 0:r.call(a,null!=(i=t())?i:p))||void 0;return l(c.getItem.bind(c))(a.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];else{if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(i=>{var r;let[n,o]=i;if(e(s=a.merge(o,null!=(r=t())?r:p),!0),n)return d()}).then(()=>{null==n||n(s,void 0),s=t(),o=!0,u.forEach(e=>e(s))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(h.add(e),()=>{h.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},a.skipHydration||m(),s||p}));e.s(["useAppStore",0,h],74456)},40487,83951,40370,e=>{"use strict";let t,i,r;var n,s=e.i(50067);let a=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],o=new Set(a),l=e=>180*e/Math.PI,h=e=>c(l(Math.atan2(e[1],e[0]))),u={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:h,rotateZ:h,skewX:e=>l(Math.atan(e[1])),skewY:e=>l(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},c=e=>((e%=360)<0&&(e+=360),e),d=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),f=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),p={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:d,scaleY:f,scale:e=>(d(e)+f(e))/2,rotateX:e=>c(l(Math.atan2(e[6],e[5]))),rotateY:e=>c(l(Math.atan2(-e[2],e[0]))),rotateZ:h,rotate:h,skewX:e=>l(Math.atan(e[4])),skewY:e=>l(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function m(e){return+!!e.includes("scale")}function g(e,t){let i,r;if(!e||"none"===e)return m(t);let n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(n)i=p,r=n;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=u,r=t}if(!r)return m(t);let s=i[t],a=r[1].split(",").map(y);return"function"==typeof s?s(a):a[s]}function y(e){return parseFloat(e.trim())}let v=e=>t=>"string"==typeof t&&t.startsWith(e),w=v("--"),b=v("var(--"),E=e=>!!b(e)&&T.test(e.split("/*")[0].trim()),T=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function _({top:e,left:t,right:i,bottom:r}){return{x:{min:t,max:i},y:{min:e,max:r}}}let S=(e,t,i)=>e+(t-e)*i;function I(e){return void 0===e||1===e}function x({scale:e,scaleX:t,scaleY:i}){return!I(e)||!I(t)||!I(i)}function C(e){return x(e)||A(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function A(e){var t,i;return(t=e.x)&&"0%"!==t||(i=e.y)&&"0%"!==i}function k(e,t,i,r,n){return void 0!==n&&(e=r+n*(e-r)),r+i*(e-r)+t}function P(e,t=0,i=1,r,n){e.min=k(e.min,t,i,r,n),e.max=k(e.max,t,i,r,n)}function R(e,{x:t,y:i}){P(e.x,t.translate,t.scale,t.originPoint),P(e.y,i.translate,i.scale,i.originPoint)}function N(e,t){e.min=e.min+t,e.max=e.max+t}function D(e,t,i,r,n=.5){let s=S(e.min,e.max,n);P(e,t,i,s,r)}function O(e,t){D(e.x,t.x,t.scaleX,t.scale,t.originX),D(e.y,t.y,t.scaleY,t.scale,t.originY)}function M(e,t){return _(function(e,t){if(!t)return e;let i=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}let L=new Set(["width","height","top","left","right","bottom",...a]),V=(e,t,i)=>i>t?t:i<e?e:i,U={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},F={...U,transform:e=>V(0,1,e)},j={...U,default:1},B=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),$=B("deg"),z=B("%"),H=B("px"),W=B("vh"),q=B("vw"),G={...z,parse:e=>z.parse(e)/100,transform:e=>z.transform(100*e)},K=e=>t=>t.test(e),X=[U,H,z,$,q,W,{test:e=>"auto"===e,parse:e=>e}],Y=e=>X.find(K(e));e.i(70795);let Q=()=>{},J=()=>{},Z=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,ee=e=>e===U||e===H,et=new Set(["x","y","z"]),ei=a.filter(e=>!et.has(e)),er={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>g(t,"x"),y:(e,{transform:t})=>g(t,"y")};er.translateX=er.x,er.translateY=er.y;let en=e=>e,es={},ea=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function eo(e,t){let i=!1,r=!0,n={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,a=ea.reduce((e,i)=>(e[i]=function(e,t){let i=new Set,r=new Set,n=!1,s=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function h(t){a.has(t)&&(u.schedule(t),e()),l++,t(o)}let u={schedule:(e,t=!1,s=!1)=>{let o=s&&n?i:r;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),a.delete(e)},process:e=>{if(o=e,n){s=!0;return}n=!0,[i,r]=[r,i],i.forEach(h),t,l=0,i.clear(),n=!1,s&&(s=!1,u.process(e))}};return u}(s,t?i:void 0),e),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:u,update:c,preRender:d,render:f,postRender:p}=a,m=()=>{let s=es.useManualTiming?n.timestamp:performance.now();i=!1,es.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(s-n.timestamp,40),1)),n.timestamp=s,n.isProcessing=!0,o.process(n),l.process(n),h.process(n),u.process(n),c.process(n),d.process(n),f.process(n),p.process(n),n.isProcessing=!1,i&&t&&(r=!1,e(m))};return{schedule:ea.reduce((t,s)=>{let o=a[s];return t[s]=(t,s=!1,a=!1)=>(!i&&(i=!0,r=!0,n.isProcessing||e(m)),o.schedule(t,s,a)),t},{}),cancel:e=>{for(let t=0;t<ea.length;t++)a[ea[t]].cancel(e)},state:n,steps:a}}let{schedule:el,cancel:eh,state:eu,steps:ec}=eo("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:en,!0),ed=new Set,ef=!1,ep=!1,em=!1;function eg(){if(ep){let e=Array.from(ed).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),i=new Map;t.forEach(e=>{let t,r=(t=[],ei.forEach(i=>{let r=e.getValue(i);void 0!==r&&(t.push([i,r.get()]),r.set(+!!i.startsWith("scale")))}),t);r.length&&(i.set(e,r),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=i.get(e);t&&t.forEach(([t,i])=>{e.getValue(t)?.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}ep=!1,ef=!1,ed.forEach(e=>e.complete(em)),ed.clear()}function ey(){ed.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ep=!0)})}class ev{constructor(e,t,i,r,n,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=n,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(ed.add(this),ef||(ef=!0,el.read(ey),el.resolveKeyframes(eg))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(null===e[0]){let n=r?.get(),s=e[e.length-1];if(void 0!==n)e[0]=n;else if(i&&t){let r=i.readValue(t,s);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===n&&r.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ed.delete(this)}cancel(){"scheduled"===this.state&&(ed.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let ew=e=>Math.round(1e5*e)/1e5,eb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,eE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eT=(e,t)=>i=>!!("string"==typeof i&&eE.test(i)&&i.startsWith(e)||t&&null!=i&&Object.prototype.hasOwnProperty.call(i,t)),e_=(e,t,i)=>r=>{if("string"!=typeof r)return r;let[n,s,a,o]=r.match(eb);return{[e]:parseFloat(n),[t]:parseFloat(s),[i]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},eS={...U,transform:e=>Math.round(V(0,255,e))},eI={test:eT("rgb","red"),parse:e_("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:r=1})=>"rgba("+eS.transform(e)+", "+eS.transform(t)+", "+eS.transform(i)+", "+ew(F.transform(r))+")"},ex={test:eT("#"),parse:function(e){let t="",i="",r="",n="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,i+=i,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}},transform:eI.transform},eC={test:eT("hsl","hue"),parse:e_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:r=1})=>"hsla("+Math.round(e)+", "+z.transform(ew(t))+", "+z.transform(ew(i))+", "+ew(F.transform(r))+")"},eA={test:e=>eI.test(e)||ex.test(e)||eC.test(e),parse:e=>eI.test(e)?eI.parse(e):eC.test(e)?eC.parse(e):ex.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?eI.transform(e):eC.transform(e),getAnimatableNone:e=>{let t=eA.parse(e);return t.alpha=0,eA.transform(t)}},ek=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,eP="number",eR="color",eN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function eD(e){let t=e.toString(),i=[],r={color:[],number:[],var:[]},n=[],s=0,a=t.replace(eN,e=>(eA.test(e)?(r.color.push(s),n.push(eR),i.push(eA.parse(e))):e.startsWith("var(")?(r.var.push(s),n.push("var"),i.push(e)):(r.number.push(s),n.push(eP),i.push(parseFloat(e))),++s,"${}")).split("${}");return{values:i,split:a,indexes:r,types:n}}function eO(e){return eD(e).values}function eM(e){let{split:t,types:i}=eD(e),r=t.length;return e=>{let n="";for(let s=0;s<r;s++)if(n+=t[s],void 0!==e[s]){let t=i[s];t===eP?n+=ew(e[s]):t===eR?n+=eA.transform(e[s]):n+=e[s]}return n}}let eL=e=>"number"==typeof e?0:eA.test(e)?eA.getAnimatableNone(e):e,eV={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(eb)?.length||0)+(e.match(ek)?.length||0)>0},parse:eO,createTransformer:eM,getAnimatableNone:function(e){let t=eO(e);return eM(e)(t.map(eL))}},eU=new Set(["brightness","contrast","saturate","opacity"]);function eF(e){let[t,i]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[r]=i.match(eb)||[];if(!r)return e;let n=i.replace(r,""),s=+!!eU.has(t);return r!==i&&(s*=100),t+"("+s+n+")"}let ej=/\b([a-z-]*)\(.*?\)/gu,eB={...eV,getAnimatableNone:e=>{let t=e.match(ej);return t?t.map(eF).join(" "):e}},e$={...U,transform:Math.round},ez={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H,rotate:$,rotateX:$,rotateY:$,rotateZ:$,scale:j,scaleX:j,scaleY:j,scaleZ:j,skew:$,skewX:$,skewY:$,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:F,originX:G,originY:G,originZ:H,zIndex:e$,fillOpacity:F,strokeOpacity:F,numOctaves:e$},eH={...ez,color:eA,backgroundColor:eA,outlineColor:eA,fill:eA,stroke:eA,borderColor:eA,borderTopColor:eA,borderRightColor:eA,borderBottomColor:eA,borderLeftColor:eA,filter:eB,WebkitFilter:eB},eW=e=>eH[e];function eq(e,t){let i=eW(e);return i!==eB&&(i=eV),i.getAnimatableNone?i.getAnimatableNone(t):void 0}let eG=new Set(["auto","none","0"]);class eK extends ev{constructor(e,t,i,r,n){super(e,t,i,r,n,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let i=0;i<e.length;i++){let r=e[i];if("string"==typeof r&&E(r=r.trim())){let n=function e(t,i,r=1){J(r<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[n,s]=function(e){let t=Z.exec(e);if(!t)return[,];let[,i,r,n]=t;return[`--${i??r}`,n]}(t);if(!n)return;let a=window.getComputedStyle(i).getPropertyValue(n);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return E(s)?e(s,i,r+1):s}(r,t.current);void 0!==n&&(e[i]=n),i===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!L.has(i)||2!==e.length)return;let[r,n]=e,s=Y(r),a=Y(n);if(s!==a)if(ee(s)&&ee(a))for(let t=0;t<e.length;t++){let i=e[t];"string"==typeof i&&(e[t]=parseFloat(i))}else er[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,i=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&i.push(t);i.length&&function(e,t,i){let r,n=0;for(;n<e.length&&!r;){let t=e[n];"string"==typeof t&&!eG.has(t)&&eD(t).values.length&&(r=e[n]),n++}if(r&&i)for(let n of t)e[n]=eq(i,r)}(e,i,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;"height"===i&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=er[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];void 0!==r&&e.getValue(i,r).jump(r,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;let r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);let n=i.length-1,s=i[n];i[n]=er[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,i])=>{e.getValue(t).set(i)}),this.resolveNoneKeyframes()}}let eX=e=>!!(e&&e.getVelocity);function eY(){t=void 0}let eQ={now:()=>(void 0===t&&eQ.set(eu.isProcessing||es.useManualTiming?eu.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(eY)}};function eJ(e,t){-1===e.indexOf(t)&&e.push(t)}function eZ(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}class e0{constructor(){this.subscriptions=[]}add(e){return eJ(this.subscriptions,e),()=>eZ(this.subscriptions,e)}notify(e,t,i){let r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,i);else for(let n=0;n<r;n++){let r=this.subscriptions[n];r&&r(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class e1{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=eQ.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=eQ.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new e0);let i=this.events[e].add(t);return"change"===e?()=>{i(),el.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return r&&r.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=eQ.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let i=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),i?1e3/i*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function e2(e,t){return new e1(e,t)}let e3=[...X,eA,eV],{schedule:e5}=eo(queueMicrotask,!1),e6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},e4={};for(let e in e6)e4[e]={isEnabled:t=>e6[e].some(e=>!!t[e])};let e8=()=>({translate:0,scale:1,origin:0,originPoint:0}),e7=()=>({x:e8(),y:e8()}),e9=()=>({min:0,max:0}),te=()=>({x:e9(),y:e9()}),tt="undefined"!=typeof window,ti={current:null},tr={current:!1},tn=new WeakMap;function ts(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function ta(e){return"string"==typeof e||Array.isArray(e)}let to=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tl=["initial",...to];function th(e){return ts(e.animate)||tl.some(t=>ta(e[t]))}function tu(e){return!!(th(e)||e.variants)}function tc(e){let t=[{},{}];return e?.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function td(e,t,i,r){if("function"==typeof t){let[n,s]=tc(r);t=t(void 0!==i?i:e.custom,n,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[n,s]=tc(r);t=t(void 0!==i?i:e.custom,n,s)}return t}let tf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tp{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:n,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ev,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=eQ.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,el.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!n,this.isControllingVariants=th(t),this.isVariantNode=tu(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in u){const t=u[e];void 0!==o[e]&&eX(t)&&t.set(o[e])}}mount(e){this.current=e,tn.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),tr.current||function(){if(tr.current=!0,tt)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ti.current=e.matches;e.addEventListener("change",t),t()}else ti.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ti.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),eh(this.notifyUpdate),eh(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let i;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let r=o.has(e);r&&this.onBindTransform&&this.onBindTransform();let n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&el.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in e4){let t=e4[e];if(!t)continue;let{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):te()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<tf.length;t++){let i=tf[t];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);let r=e["on"+i];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=function(e,t,i){for(let r in t){let n=t[r],s=i[r];if(eX(n))e.addValue(r,n);else if(eX(s))e.addValue(r,e2(n,{owner:e}));else if(s!==n)if(e.hasValue(r)){let t=e.getValue(r);!0===t.liveStyle?t.jump(n):t.hasAnimated||t.set(n)}else{let t=e.getStaticValue(r);e.addValue(r,e2(void 0!==t?t:n,{owner:e}))}}for(let r in i)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return void 0===i&&void 0!==t&&(i=e2(null===t?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=i){let r,n;if("string"==typeof i&&(r=i,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r)||(n=i,/^0[^.\s]+$/u.test(n))))i=parseFloat(i);else{let r;r=i,!e3.find(K(r))&&eV.test(t)&&(i=eq(e,t))}this.setBaseTarget(e,eX(i)?i.get():i)}return eX(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:i}=this.props;if("string"==typeof i||"object"==typeof i){let r=td(this.props,i,this.presenceContext?.custom);r&&(t=r[e])}if(i&&void 0!==t)return t;let r=this.getBaseTargetFromProps(this.props,e);return void 0===r||eX(r)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new e0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){e5.render(this.render)}}class tm extends tp{constructor(){super(...arguments),this.KeyframeResolver=eK}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;eX(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}let tg=(e,t)=>t&&"number"==typeof e?t.transform(e):e,ty={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tv=a.length;function tw(e,t,i){let{style:r,vars:n,transformOrigin:s}=e,l=!1,h=!1;for(let e in t){let i=t[e];if(o.has(e)){l=!0;continue}if(w(e)){n[e]=i;continue}{let t=tg(i,ez[e]);e.startsWith("origin")?(h=!0,s[e]=t):r[e]=t}}if(!t.transform&&(l||i?r.transform=function(e,t,i){let r="",n=!0;for(let s=0;s<tv;s++){let o=a[s],l=e[o];if(void 0===l)continue;let h=!0;if(!(h="number"==typeof l?l===+!!o.startsWith("scale"):0===parseFloat(l))||i){let e=tg(l,ez[o]);if(!h){n=!1;let t=ty[o]||o;r+=`${t}(${e}) `}i&&(t[o]=e)}}return r=r.trim(),i?r=i(t,n?"":r):n&&(r="none"),r}(t,e.transform,i):r.transform&&(r.transform="none")),h){let{originX:e="50%",originY:t="50%",originZ:i=0}=s;r.transformOrigin=`${e} ${t} ${i}`}}function tb(e,{style:t,vars:i},r,n){let s,a=e.style;for(s in t)a[s]=t[s];for(s in n?.applyProjectionStyles(a,r),i)a.setProperty(s,i[s])}function tE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let tT={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!H.test(e))return e;else e=parseFloat(e);let i=tE(e,t.target.x),r=tE(e,t.target.y);return`${i}% ${r}%`}},t_={borderRadius:{...tT,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tT,borderTopRightRadius:tT,borderBottomLeftRadius:tT,borderBottomRightRadius:tT,boxShadow:{correct:(e,{treeScale:t,projectionDelta:i})=>{let r=eV.parse(e);if(r.length>5)return e;let n=eV.createTransformer(e),s=+("number"!=typeof r[0]),a=i.x.scale*t.x,o=i.y.scale*t.y;r[0+s]/=a,r[1+s]/=o;let l=S(a,o,.5);return"number"==typeof r[2+s]&&(r[2+s]/=l),"number"==typeof r[3+s]&&(r[3+s]/=l),n(r)}}};function tS(e,{layout:t,layoutId:i}){return o.has(e)||e.startsWith("origin")||(t||void 0!==i)&&(!!t_[e]||"opacity"===e)}function tI(e,t,i){let{style:r}=e,n={};for(let s in r)(eX(r[s])||t.style&&eX(t.style[s])||tS(s,e)||i?.getValue(s)?.liveStyle!==void 0)&&(n[s]=r[s]);return n}class tx extends tm{constructor(){super(...arguments),this.type="html",this.renderInstance=tb}readValueFromInstance(e,t){if(o.has(t))return this.projection?.isProjecting?m(t):((e,t)=>{let{transform:i="none"}=getComputedStyle(e);return g(i,t)})(e,t);{let i=window.getComputedStyle(e),r=(w(t)?i.getPropertyValue(t):i[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return M(e,t)}build(e,t,i){tw(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return tI(e,t,i)}}let tC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tA={offset:"stroke-dashoffset",array:"stroke-dasharray"},tk={offset:"strokeDashoffset",array:"strokeDasharray"};function tP(e,{attrX:t,attrY:i,attrScale:r,pathLength:n,pathSpacing:s=1,pathOffset:a=0,...o},l,h,u){if(tw(e,o,h),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:c,style:d}=e;c.transform&&(d.transform=c.transform,delete c.transform),(d.transform||c.transformOrigin)&&(d.transformOrigin=c.transformOrigin??"50% 50%",delete c.transformOrigin),d.transform&&(d.transformBox=u?.transformBox??"fill-box",delete c.transformBox),void 0!==t&&(c.x=t),void 0!==i&&(c.y=i),void 0!==r&&(c.scale=r),void 0!==n&&function(e,t,i=1,r=0,n=!0){e.pathLength=1;let s=n?tA:tk;e[s.offset]=H.transform(-r);let a=H.transform(t),o=H.transform(i);e[s.array]=`${a} ${o}`}(c,n,s,a,!1)}let tR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tN=e=>"string"==typeof e&&"svg"===e.toLowerCase();function tD(e,t,i){let r=tI(e,t,i);for(let i in e)(eX(e[i])||eX(t[i]))&&(r[-1!==a.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]);return r}class tO extends tm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=te}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(o.has(t)){let e=eW(t);return e&&e.default||0}return t=tR.has(t)?t:tC(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return tD(e,t,i)}build(e,t,i){tP(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){for(let i in tb(e,t,void 0,r),t.attrs)e.setAttribute(tR.has(i)?i:tC(i),t.attrs[i])}mount(e){this.isSVGTag=tN(e.tagName),super.mount(e)}}let tM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tL(e){if("string"!=typeof e||e.includes("-"));else if(tM.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}var tV=e.i(8250);let tU=(0,s.createContext)({}),tF=(0,s.createContext)({strict:!1}),tj=(0,s.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),tB=(0,s.createContext)({});function t$(e){return Array.isArray(e)?e.join(" "):e}let tz=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tH(e,t,i){for(let r in t)eX(t[r])||tS(r,i)||(e[r]=t[r])}let tW=()=>({...tz(),attrs:{}}),tq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tG(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||tq.has(e)}let tK=e=>!tG(e);try{n=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof n&&(tK=e=>e.startsWith("on")?!tG(e):n(e))}catch{}let tX=(0,s.createContext)(null);function tY(e){let t=(0,s.useRef)(null);return null===t.current&&(t.current=e()),t.current}function tQ(e){return eX(e)?e.get():e}let tJ=e=>(t,i)=>{let r=(0,s.useContext)(tB),n=(0,s.useContext)(tX),a=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},i,r,n){return{latestValues:function(e,t,i,r){let n={},s=r(e,{});for(let e in s)n[e]=tQ(s[e]);let{initial:a,animate:o}=e,l=th(e),h=tu(e);t&&h&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!i&&!1===i.initial,c=(u=u||!1===a)?o:a;if(c&&"boolean"!=typeof c&&!ts(c)){let t=Array.isArray(c)?c:[c];for(let i=0;i<t.length;i++){let r=td(e,t[i]);if(r){let{transitionEnd:e,transition:t,...i}=r;for(let e in i){let t=i[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}null!==t&&(n[e]=t)}for(let t in e)n[t]=e[t]}}}return n}(i,r,n,e),renderState:t()}})(e,t,r,n);return i?a():tY(a)},tZ=tJ({scrapeMotionValuesFromProps:tI,createRenderState:tz}),t0=tJ({scrapeMotionValuesFromProps:tD,createRenderState:tW}),t1=Symbol.for("motionComponentSymbol");function t2(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let t3="data-"+tC("framerAppearId"),t5=(0,s.createContext)({}),t6=tt?s.useLayoutEffect:s.useEffect;function t4(e,{forwardMotionProps:t=!1}={},i,r){i&&function(e){for(let t in e)e4[t]={...e4[t],...e[t]}}(i);let n=tL(e)?t0:tZ;function a(i,a){var o;let l,h={...(0,s.useContext)(tj),...i,layoutId:function({layoutId:e}){let t=(0,s.useContext)(tU).id;return t&&void 0!==e?t+"-"+e:e}(i)},{isStatic:u}=h,c=function(e){let{initial:t,animate:i}=function(e,t){if(th(e)){let{initial:t,animate:i}=e;return{initial:!1===t||ta(t)?t:void 0,animate:ta(i)?i:void 0}}return!1!==e.inherit?t:{}}(e,(0,s.useContext)(tB));return(0,s.useMemo)(()=>({initial:t,animate:i}),[t$(t),t$(i)])}(i),d=n(i,u);if(!u&&tt){(0,s.useContext)(tF).strict;let t=function(e){let{drag:t,layout:i}=e4;if(!t&&!i)return{};let r={...t,...i};return{MeasureLayout:t?.isEnabled(e)||i?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(h);l=t.MeasureLayout,c.visualElement=function(e,t,i,r,n){let{visualElement:a}=(0,s.useContext)(tB),o=(0,s.useContext)(tF),l=(0,s.useContext)(tX),h=(0,s.useContext)(tj).reducedMotion,u=(0,s.useRef)(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:i,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:h}));let c=u.current,d=(0,s.useContext)(t5);c&&!c.projection&&n&&("html"===c.type||"svg"===c.type)&&function(e,t,i,r){let{layoutId:n,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:u}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:n,layout:s,alwaysMeasureLayout:!!a||o&&t2(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:h})}(u.current,i,n,d);let f=(0,s.useRef)(!1);(0,s.useInsertionEffect)(()=>{c&&f.current&&c.update(i,l)});let p=i[t3],m=(0,s.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return t6(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),m.current&&c.animationState&&c.animationState.animateChanges())}),(0,s.useEffect)(()=>{c&&(!m.current&&c.animationState&&c.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),m.current=!1),c.enteringChildren=void 0)}),c}(e,d,h,r,t.ProjectionNode)}return(0,tV.jsxs)(tB.Provider,{value:c,children:[l&&c.visualElement?(0,tV.jsx)(l,{visualElement:c.visualElement,...h}):null,function(e,t,i,{latestValues:r},n,a=!1){let o=(tL(e)?function(e,t,i,r){let n=(0,s.useMemo)(()=>{let i=tW();return tP(i,t,tN(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){let t={};tH(t,e.style,e),n.style={...t,...n.style}}return n}:function(e,t){let i,r,n={},a=(i=e.style||{},tH(r={},i,e),Object.assign(r,function({transformTemplate:e},t){return(0,s.useMemo)(()=>{let i=tz();return tw(i,t,e),Object.assign({},i.vars,i.style)},[t])}(e,t)),r);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n})(t,r,n,e),l=function(e,t,i){let r={};for(let n in e)("values"!==n||"object"!=typeof e.values)&&(tK(n)||!0===i&&tG(n)||!t&&!tG(n)||e.draggable&&n.startsWith("onDrag"))&&(r[n]=e[n]);return r}(t,"string"==typeof e,a),h=e!==s.Fragment?{...l,...o,ref:i}:{},{children:u}=t,c=(0,s.useMemo)(()=>eX(u)?u.get():u,[u]);return(0,s.createElement)(e,{...h,children:c})}(e,i,(o=c.visualElement,(0,s.useCallback)(e=>{e&&d.onMount&&d.onMount(e),o&&(e?o.mount(e):o.unmount()),a&&("function"==typeof a?a(e):t2(a)&&(a.current=e))},[o])),d,u,t)]})}a.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let o=(0,s.forwardRef)(a);return o[t1]=e,o}function t8(e,t,i){let r=e.getProps();return td(r,t,void 0!==i?i:r.custom,e)}function t7(e,t){return e?.[t]??e?.default??e}let t9=e=>Array.isArray(e);function ie(e,t){let i=e.getValue("willChange");if(eX(i)&&i.add)return i.add(t);if(!i&&es.WillChange){let i=new es.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function it(e){e.duration=0,e.type="keyframes"}let ii=(e,t)=>i=>t(e(i)),ir=(...e)=>e.reduce(ii),is=e=>1e3*e,ia={layout:0,mainThread:0,waapi:0};function io(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function il(e,t){return i=>i>0?t:e}let ih=(e,t,i)=>{let r=e*e,n=i*(t*t-r)+r;return n<0?0:Math.sqrt(n)},iu=[ex,eI,eC];function ic(e){let t=iu.find(t=>t.test(e));if(Q(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let i=t.parse(e);return t===eC&&(i=function({hue:e,saturation:t,lightness:i,alpha:r}){e/=360,i/=100;let n=0,s=0,a=0;if(t/=100){let r=i<.5?i*(1+t):i+t-i*t,o=2*i-r;n=io(o,r,e+1/3),s=io(o,r,e),a=io(o,r,e-1/3)}else n=s=a=i;return{red:Math.round(255*n),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(i)),i}let id=(e,t)=>{let i=ic(e),r=ic(t);if(!i||!r)return il(e,t);let n={...i};return e=>(n.red=ih(i.red,r.red,e),n.green=ih(i.green,r.green,e),n.blue=ih(i.blue,r.blue,e),n.alpha=S(i.alpha,r.alpha,e),eI.transform(n))},ip=new Set(["none","hidden"]);function im(e,t){return i=>S(e,t,i)}function ig(e){return"number"==typeof e?im:"string"==typeof e?E(e)?il:eA.test(e)?id:iw:Array.isArray(e)?iy:"object"==typeof e?eA.test(e)?id:iv:il}function iy(e,t){let i=[...e],r=i.length,n=e.map((e,i)=>ig(e)(e,t[i]));return e=>{for(let t=0;t<r;t++)i[t]=n[t](e);return i}}function iv(e,t){let i={...e,...t},r={};for(let n in i)void 0!==e[n]&&void 0!==t[n]&&(r[n]=ig(e[n])(e[n],t[n]));return e=>{for(let t in r)i[t]=r[t](e);return i}}let iw=(e,t)=>{let i=eV.createTransformer(t),r=eD(e),n=eD(t);if(!(r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length))return Q(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),il(e,t);if(ip.has(e)&&!n.values.length||ip.has(t)&&!r.values.length)return ip.has(e)?i=>i<=0?e:t:i=>i>=1?t:e;return ir(iy(function(e,t){let i=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){let s=t.types[n],a=e.indexes[s][r[s]],o=e.values[a]??0;i[n]=o,r[s]++}return i}(r,n),n.values),i)};function ib(e,t,i){return"number"==typeof e&&"number"==typeof t&&"number"==typeof i?S(e,t,i):ig(e)(e,t)}let iE=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>el.update(t,e),stop:()=>eh(t),now:()=>eu.isProcessing?eu.timestamp:eQ.now()}},iT=(e,t,i=10)=>{let r="",n=Math.max(Math.round(t/i),2);for(let t=0;t<n;t++)r+=Math.round(1e4*e(t/(n-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`};function i_(e){let t=0,i=e.next(t);for(;!i.done&&t<2e4;)t+=50,i=e.next(t);return t>=2e4?1/0:t}function iS(e,t,i){var r,n;let s=Math.max(t-5,0);return r=i-e(s),(n=t-s)?1e3/n*r:0}let iI=.01,ix=2,iC=.005,iA=.5;function ik(e,t){return e*Math.sqrt(1-t*t)}let iP=["duration","bounce"],iR=["stiffness","damping","mass"];function iN(e,t){return t.some(t=>void 0!==e[t])}function iD(e=.3,t=.3){let i,r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:n,restDelta:s}=r,a=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:a},{stiffness:h,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!iN(e,iR)&&iN(e,iP))if(e.visualDuration){let i=2*Math.PI/(1.2*e.visualDuration),r=i*i,n=2*V(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:1,stiffness:r,damping:n}}else{let i=function({duration:e=800,bounce:t=.3,velocity:i=0,mass:r=1}){let n,s;Q(e<=is(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=V(.05,1,a),e=V(.01,10,e/1e3),a<1?(n=t=>{let r=t*a,n=r*e;return .001-(r-i)/ik(t,a)*Math.exp(-n)},s=t=>{let r=t*a*e,s=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-r),l=ik(Math.pow(t,2),a);return(r*i+i-s)*o*(-n(t)+.001>0?-1:1)/l}):(n=t=>-.001+Math.exp(-t*e)*((t-i)*e+1),s=t=>e*e*(i-t)*Math.exp(-t*e));let o=function(e,t,i){let r=i;for(let i=1;i<12;i++)r-=e(r)/t(r);return r}(n,s,5/e);if(e=is(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}(e);(t={...t,...i,mass:1}).isResolvedFromDuration=!0}return t}({...r,velocity:-((r.velocity||0)/1e3)}),m=f||0,g=u/(2*Math.sqrt(h*c)),y=o-a,v=Math.sqrt(h/c)/1e3,w=5>Math.abs(y);if(n||(n=w?iI:ix),s||(s=w?iC:iA),g<1){let e=ik(v,g);i=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)i=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);i=t=>{let i=Math.exp(-g*v*t),r=Math.min(e*t,300);return o-i*((m+g*v*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}let b={calculatedDuration:p&&d||null,next:e=>{let t=i(e);if(p)l.done=e>=d;else{let r=0===e?m:0;g<1&&(r=0===e?is(m):iS(i,e,t));let a=Math.abs(o-t)<=s;l.done=Math.abs(r)<=n&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(i_(b),2e4),t=iT(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function iO({keyframes:e,velocity:t=0,power:i=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:u}){let c,d,f=e[0],p={done:!1,value:f},m=i*t,g=f+m,y=void 0===a?g:a(g);y!==g&&(m=y-f);let v=e=>-m*Math.exp(-e/r),w=e=>y+v(e),b=e=>{let t=v(e),i=w(e);p.done=Math.abs(t)<=h,p.value=p.done?y:i},E=e=>{let t;if(t=p.value,void 0!==o&&t<o||void 0!==l&&t>l){var i;c=e,d=iD({keyframes:[p.value,(i=p.value,void 0===o?l:void 0===l||Math.abs(o-i)<Math.abs(l-i)?o:l)],velocity:iS(w,e,p.value),damping:n,stiffness:s,restDelta:h,restSpeed:u})}};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==c||(t=!0,b(e),E(e)),void 0!==c&&e>=c)?d.next(e-c):(t||b(e),p)}}}iD.applyToOptions=e=>{let t=function(e,t=100,i){let r=i({...e,keyframes:[0,t]}),n=Math.min(i_(r),2e4);return{type:"keyframes",ease:e=>r.next(n*e).value/t,duration:n/1e3}}(e,100,iD);return e.ease=t.ease,e.duration=is(t.duration),e.type="keyframes",e};let iM=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e;function iL(e,t,i,r){return e===t&&i===r?en:n=>0===n||1===n?n:iM(function(e,t,i,r,n){let s,a,o=0;do(s=iM(a=t+(i-t)/2,r,n)-e)>0?i=a:t=a;while(Math.abs(s)>1e-7&&++o<12)return a}(n,0,1,e,i),t,r)}let iV=iL(.42,0,1,1),iU=iL(0,0,.58,1),iF=iL(.42,0,.58,1),ij=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iB=e=>t=>1-e(1-t),i$=iL(.33,1.53,.69,.99),iz=iB(i$),iH=ij(iz),iW=e=>(e*=2)<1?.5*iz(e):.5*(2-Math.pow(2,-10*(e-1))),iq=e=>1-Math.sin(Math.acos(e)),iG=iB(iq),iK=ij(iq),iX=e=>Array.isArray(e)&&"number"==typeof e[0],iY={linear:en,easeIn:iV,easeInOut:iF,easeOut:iU,circIn:iq,circInOut:iK,circOut:iG,backIn:iz,backInOut:iH,backOut:i$,anticipate:iW},iQ=e=>{if(iX(e)){J(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,i,r,n]=e;return iL(t,i,r,n)}return"string"==typeof e?(J(void 0!==iY[e],`Invalid easing type '${e}'`,"invalid-easing-type"),iY[e]):e},iJ=(e,t,i)=>{let r=t-e;return 0===r?1:(i-e)/r};function iZ({duration:e=300,keyframes:t,times:i,ease:r="easeInOut"}){var n;let s,a=Array.isArray(r)&&"number"!=typeof r[0]?r.map(iQ):iQ(r),o={done:!1,value:t[0]},l=function(e,t,{clamp:i=!0,ease:r,mixer:n}={}){let s=e.length;if(J(s===t.length,"Both input and output ranges must be the same length","range-length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,i){let r=[],n=i||es.mix||ib,s=e.length-1;for(let i=0;i<s;i++){let s=n(e[i],e[i+1]);t&&(s=ir(Array.isArray(t)?t[i]||en:t,s)),r.push(s)}return r}(t,r,n),l=o.length,h=i=>{if(a&&i<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(i<e[r+1]);r++);let n=iJ(e[r],e[r+1],i);return o[r](n)};return i?t=>h(V(e[0],e[s-1],t)):h}((n=i&&i.length===t.length?i:(!function(e,t){let i=e[e.length-1];for(let r=1;r<=t;r++){let n=iJ(0,t,r);e.push(S(i,1,n))}}(s=[0],t.length-1),s),n.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||iF).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let i0=e=>null!==e;function i1(e,{repeat:t,repeatType:i="loop"},r,n=1){let s=e.filter(i0),a=n<0||t&&"loop"!==i&&t%2==1?0:s.length-1;return a&&void 0!==r?r:s[a]}let i2={decay:iO,inertia:iO,tween:iZ,keyframes:iZ,spring:iD};function i3(e){"string"==typeof e.type&&(e.type=i2[e.type])}class i5{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let i6=e=>e/100;class i4 extends i5{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==eQ.now()&&this.tick(eQ.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},ia.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;i3(e);let{type:t=iZ,repeat:i=0,repeatDelay:r=0,repeatType:n,velocity:s=0}=e,{keyframes:a}=e,o=t||iZ;o!==iZ&&"number"!=typeof a[0]&&(this.mixKeyframes=ir(i6,ib(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===n&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=i_(l));let{calculatedDuration:h}=l;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:i,totalDuration:r,mixKeyframes:n,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return i.next(0);let{delay:l=0,keyframes:h,repeat:u,repeatType:c,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,w=i;if(u){let e=Math.min(this.currentTime,r)/a,t=Math.floor(e),i=e%1;!i&&e>=1&&(i=1),1===i&&t--,(t=Math.min(t,u+1))%2&&("reverse"===c?(i=1-i,d&&(i-=d/a)):"mirror"===c&&(w=s)),v=V(0,1,i)*a}let b=y?{done:!1,value:h[0]}:w.next(v);n&&(b.value=n(b.value));let{done:E}=b;y||null===o||(E=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);let T=null===this.holdTime&&("finished"===this.state||"running"===this.state&&E);return T&&f!==iO&&(b.value=i1(h,this.options,m,this.speed)),p&&p(b.value),T&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=is(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(eQ.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=iE,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(eQ.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,ia.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function i8(e){let t;return()=>(void 0===t&&(t=e()),t)}let i7=i8(()=>void 0!==window.ScrollTimeline),i9={},re=(i=i8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>i9.linearEasing??i()),rt=([e,t,i,r])=>`cubic-bezier(${e}, ${t}, ${i}, ${r})`,ri={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rt([0,.65,.55,1]),circOut:rt([.55,0,1,.45]),backIn:rt([.31,.01,.66,-.59]),backOut:rt([.33,1.53,.69,.99])};function rr(e){return"function"==typeof e&&"applyToOptions"in e}class rn extends i5{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:n,allowFlatten:s=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!n,this.allowFlatten=s,this.options=e,J("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return rr(e)&&re()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,i,{delay:r=0,duration:n=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h){let u={[t]:i};l&&(u.offset=l);let c=function e(t,i){if(t)return"function"==typeof t?re()?iT(t,i):"ease-out":iX(t)?rt(t):Array.isArray(t)?t.map(t=>e(t,i)||ri.easeOut):ri[t]}(o,n);Array.isArray(c)&&(u.easing=c);let d={delay:r,duration:n,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"};h&&(d.pseudoElement=h);let f=e.animate(u,d);return f}(t,i,r,l,n),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){let e=i1(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):i.startsWith("--")?t.style.setProperty(i,e):t.style[i]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.finishedTime=null,this.animation.currentTime=is(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&i7())?(this.animation.timeline=e,en):t(this)}}let rs={anticipate:iW,backInOut:iH,circInOut:iK};class ra extends rn{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in rs&&(e.ease=rs[e.ease])}(e),i3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:i,onComplete:r,element:n,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new i4({...s,autoplay:!1}),o=is(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}let ro=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(eV.test(e)||"0"===e)&&!e.startsWith("url(")),rl=new Set(["opacity","clipPath","filter","transform"]),rh=i8(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class ru extends i5{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:s="loop",keyframes:a,name:o,motionValue:l,element:h,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=eQ.now();const c={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:n,repeatType:s,name:o,motionValue:l,element:h,...u},d=h?.KeyframeResolver||ev;this.keyframeResolver=new d(a,(e,t,i)=>this.onKeyframesResolved(e,t,c,!i),o,l,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;let{name:n,type:s,velocity:a,delay:o,isHandoff:l,onUpdate:h}=i;this.resolvedAt=eQ.now(),!function(e,t,i,r){let n=e[0];if(null===n)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],a=ro(n,t),o=ro(s,t);return Q(a===o,`You are trying to animate ${t} from "${n}" to "${s}". "${a?s:n}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}(e)||("spring"===i||rr(i))&&r)}(e,n,s,a)&&((es.instantAnimations||!o)&&h?.(i1(e,i,t)),e[0]=e[e.length-1],it(i),i.repeat=0);let u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},c=!l&&function(e){let{motionValue:t,name:i,repeatDelay:r,repeatType:n,damping:s,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return rh()&&i&&rl.has(i)&&("transform"!==i||!l)&&!o&&!r&&"mirror"!==n&&0!==s&&"inertia"!==a}(u)?new ra({...u,element:u.motionValue.owner.current}):new i4(u);c.finished.then(()=>this.notifyFinished()).catch(en),this.pendingTimeline&&(this.stopTimeline=c.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=c}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),em=!0,ey(),eg(),em=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let rc=e=>null!==e,rd={type:"spring",stiffness:500,damping:25,restSpeed:10},rf={type:"keyframes",duration:.8},rp={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rm=(e,t,i,r={},n,s)=>a=>{let l=t7(r,e)||{},h=l.delay||r.delay||0,{elapsed:u=0}=r;u-=is(h);let c={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:e=>{t.set(e),l.onUpdate&&l.onUpdate(e)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:n};!function({when:e,delay:t,delayChildren:i,staggerChildren:r,staggerDirection:n,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...u}){return!!Object.keys(u).length}(l)&&Object.assign(c,((e,{keyframes:t})=>t.length>2?rf:o.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:rd:rp)(e,c)),c.duration&&(c.duration=is(c.duration)),c.repeatDelay&&(c.repeatDelay=is(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(it(c),0===c.delay&&(d=!0)),(es.instantAnimations||es.skipAnimations)&&(d=!0,it(c),c.delay=0),c.allowFlatten=!l.type&&!l.ease,d&&!s&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:i="loop"},r){let n=e.filter(rc),s=t&&"loop"!==i&&t%2==1?0:n.length-1;return n[s]}(c.keyframes,l);if(void 0!==e)return void el.update(()=>{c.onUpdate(e),c.onComplete()})}return l.isSync?new i4(c):new ru(c)};function rg(e,t,{delay:i=0,transitionOverride:r,type:n}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);let l=[],h=n&&e.animationState&&e.animationState.getState()[n];for(let t in o){let r=e.getValue(t,e.latestValues[t]??null),n=o[t];if(void 0===n||h&&function({protectedKeys:e,needsAnimating:t},i){let r=e.hasOwnProperty(i)&&!0!==t[i];return t[i]=!1,r}(h,t))continue;let a={delay:i,...t7(s||{},t)},u=r.get();if(void 0!==u&&!r.isAnimating&&!Array.isArray(n)&&n===u&&!a.velocity)continue;let c=!1;if(window.MotionHandoffAnimation){let i=e.props[t3];if(i){let e=window.MotionHandoffAnimation(i,t,el);null!==e&&(a.startTime=e,c=!0)}}ie(e,t),r.start(rm(t,r,n,e.shouldReduceMotion&&L.has(t)?{type:!1}:a,e,c));let d=r.animation;d&&l.push(d)}return a&&Promise.all(l).then(()=>{el.update(()=>{a&&function(e,t){let{transitionEnd:i={},transition:r={},...n}=t8(e,t)||{};for(let t in n={...n,...i}){var s;let i=t9(s=n[t])?s[s.length-1]||0:s;e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,e2(i))}}(e,a)})}),l}function ry(e,t,i,r=0,n=1){let s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*r;return"function"==typeof i?i(s,a):1===n?s*r:o-s*r}function rv(e,t,i={}){let r=t8(e,t,"exit"===i.type?e.presenceContext?.custom:void 0),{transition:n=e.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(n=i.transitionOverride);let s=r?()=>Promise.all(rg(e,r,i)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=n;return function(e,t,i=0,r=0,n=0,s=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(rv(l,t,{...a,delay:i+("function"==typeof r?0:r)+ry(e.variantChildren,l,r,n,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,s,a,o,i)}:()=>Promise.resolve(),{when:o}=n;if(!o)return Promise.all([s(),a(i.delay)]);{let[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then(()=>t())}}function rw(e,t){if(!Array.isArray(t))return!1;let i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}let rb=tl.length,rE=[...to].reverse(),rT=to.length;function r_(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rS(){return{animate:r_(!0),whileInView:r_(),whileHover:r_(),whileTap:r_(),whileDrag:r_(),whileFocus:r_(),exit:r_()}}class rI{constructor(e){this.isMounted=!1,this.node=e}update(){}}let rx=0,rC={x:!1,y:!1};function rA(e,t,i,r={passive:!0}){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i)}let rk=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function rP(e){return{point:{x:e.pageX,y:e.pageY}}}function rR(e,t,i,r){return rA(e,t,e=>rk(e)&&i(e,rP(e)),r)}function rN(e){return e.max-e.min}function rD(e,t,i,r=.5){e.origin=r,e.originPoint=S(t.min,t.max,e.origin),e.scale=rN(i)/rN(t),e.translate=S(i.min,i.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function rO(e,t,i,r){rD(e.x,t.x,i.x,r?r.originX:void 0),rD(e.y,t.y,i.y,r?r.originY:void 0)}function rM(e,t,i){e.min=i.min+t.min,e.max=e.min+rN(t)}function rL(e,t,i){e.min=t.min-i.min,e.max=e.min+rN(t)}function rV(e,t,i){rL(e.x,t.x,i.x),rL(e.y,t.y,i.y)}function rU(e){return[e("x"),e("y")]}let rF=({current:e})=>e?e.ownerDocument.defaultView:null,rj=(e,t)=>Math.abs(e-t);class rB{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:n=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let i=rH(this.lastMoveEventInfo,this.history),r=null!==this.startEvent,n=(e=i.offset,t={x:0,y:0},Math.sqrt(rj(e.x,t.x)**2+rj(e.y,t.y)**2)>=this.distanceThreshold);if(!r&&!n)return;let{point:s}=i,{timestamp:a}=eu;this.history.push({...s,timestamp:a});let{onStart:o,onMove:l}=this.handlers;r||(o&&o(this.lastMoveEvent,i),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,i)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=r$(t,this.transformPagePoint),el.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:i,onSessionEnd:r,resumeAnimation:n}=this.handlers;if(this.dragSnapToOrigin&&n&&n(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=rH("pointercancel"===e.type?this.lastMoveEventInfo:r$(t,this.transformPagePoint),this.history);this.startEvent&&i&&i(e,s),r&&r(e,s)},!rk(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=s,this.contextWindow=r||window;const a=r$(rP(e),this.transformPagePoint),{point:o}=a,{timestamp:l}=eu;this.history=[{...o,timestamp:l}];const{onSessionStart:h}=t;h&&h(e,rH(a,this.history)),this.removeListeners=ir(rR(this.contextWindow,"pointermove",this.handlePointerMove),rR(this.contextWindow,"pointerup",this.handlePointerUp),rR(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eh(this.updatePoint)}}function r$(e,t){return t?{point:t(e.point)}:e}function rz(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rH({point:e},t){return{point:e,delta:rz(e,rW(t)),offset:rz(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,r=null,n=rW(e);for(;i>=0&&(r=e[i],!(n.timestamp-r.timestamp>is(.1)));)i--;if(!r)return{x:0,y:0};let s=(n.timestamp-r.timestamp)/1e3;if(0===s)return{x:0,y:0};let a={x:(n.x-r.x)/s,y:(n.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function rW(e){return e[e.length-1]}function rq(e,t,i){return{min:void 0!==t?e.min+t:void 0,max:void 0!==i?e.max+i-(e.max-e.min):void 0}}function rG(e,t){let i=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,r]=[r,i]),{min:i,max:r}}function rK(e,t,i){return{min:rX(e,t),max:rX(e,i)}}function rX(e,t){return"number"==typeof e?e:e[t]||0}let rY=new WeakMap;class rQ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=te(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let n=e=>{let{dragSnapToOrigin:i}=this.getProps();i?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(rP(e).point)},s=(e,t)=>{let{drag:i,dragPropagation:r,onDragStart:n}=this.getProps();if(i&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(rC[e])return null;else return rC[e]=!0,()=>{rC[e]=!1};return rC.x||rC.y?null:(rC.x=rC.y=!0,()=>{rC.x=rC.y=!1})}(i),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rU(e=>{let t=this.getAxisMotionValue(e).get()||0;if(z.test(t)){let{projection:i}=this.visualElement;if(i&&i.layout){let r=i.layout.layoutBox[e];r&&(t=rN(r)*(parseFloat(t)/100))}}this.originPoint[e]=t}),n&&el.postRender(()=>n(e,t)),ie(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:i,dragDirectionLock:r,onDirectionLock:n,onDrag:s}=this.getProps();if(!i&&!this.openDragLock)return;let{offset:a}=t;if(r&&null===this.currentDirection){this.currentDirection=function(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}(a),null!==this.currentDirection&&n&&n(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>rU(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new rB(e,{onSessionStart:n,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:rF(this.visualElement)})}stop(e,t){let i=e||this.latestPointerEvent,r=t||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!r||!i)return;let{velocity:s}=r;this.startAnimation(s);let{onDragEnd:a}=this.getProps();a&&el.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){let{drag:r}=this.getProps();if(!i||!rJ(e,r,this.currentDirection))return;let n=this.getAxisMotionValue(e),s=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:i},r){return void 0!==t&&e<t?e=r?S(t,e,r.min):Math.max(e,t):void 0!==i&&e>i&&(e=r?S(i,e,r.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),n.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&t2(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=function(e,{top:t,left:i,bottom:r,right:n}){return{x:rq(e.x,i,n),y:rq(e.y,t,r)}}(i.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:rK(e,"left","right"),y:rK(e,"top","bottom")}}(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rU(e=>{var t,r;let n;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=i.layoutBox[e],r=this.constraints[e],n={},void 0!==r.min&&(n.min=r.min-t.min),void 0!==r.max&&(n.max=r.max-t.min),n))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!t2(t))return!1;let r=t.current;J(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:n}=this.visualElement;if(!n||!n.layout)return!1;let s=function(e,t,i){let r=M(e,i),{scroll:n}=t;return n&&(N(r.x,n.offset.x),N(r.y,n.offset.y)),r}(r,n.root,this.visualElement.getTransformPagePoint()),a=(e=n.layout.layoutBox,{x:rG(e.x,s.x),y:rG(e.y,s.y)});if(i){let e=i(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=_(e))}return a}startAnimation(e){let{drag:t,dragMomentum:i,dragElastic:r,dragTransition:n,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(rU(a=>{if(!rJ(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});let h={type:"inertia",velocity:i?e[a]:0,bounceStiffness:r?200:1e6,bounceDamping:r?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...n,...l};return this.startAxisValueAnimation(a,h)})).then(a)}startAxisValueAnimation(e,t){let i=this.getAxisMotionValue(e);return ie(this.visualElement,e),i.start(rm(e,i,0,t,this.visualElement,!1))}stopAnimation(){rU(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rU(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps();return i[t]||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){rU(t=>{let{drag:i}=this.getProps();if(!rJ(t,i,this.currentDirection))return;let{projection:r}=this.visualElement,n=this.getAxisMotionValue(t);if(r&&r.layout){let{min:i,max:s}=r.layout.layoutBox[t];n.set(e[t]-S(i,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!t2(t)||!i||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};rU(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var i,n;let s,a,o,l=t.get();r[e]=(i={min:l,max:l},n=this.constraints[e],s=.5,a=rN(i),(o=rN(n))>a?s=iJ(n.min,n.max-a,i.min):a>o&&(s=iJ(i.min,i.max-o,n.min)),V(0,1,s))}});let{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),rU(t=>{if(!rJ(t,e,null))return;let i=this.getAxisMotionValue(t),{min:n,max:s}=this.constraints[t];i.set(S(n,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;rY.set(this.visualElement,this);let e=rR(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:i=!0}=this.getProps();t&&i&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();t2(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",t);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),el.read(t);let n=rA(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(rU(t=>{let i=this.getAxisMotionValue(t);i&&(this.originPoint[t]+=e[t].translate,i.set(i.get()+e[t].translate))}),this.visualElement.render())});return()=>{n(),e(),r(),s&&s()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:n=!1,dragElastic:s=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:n,dragElastic:s,dragMomentum:a}}}function rJ(e,t,i){return(!0===t||t===e)&&(null===i||i===e)}let rZ=e=>(t,i)=>{e&&el.postRender(()=>e(t,i))};var r0=s;function r1(e=!0){let t=(0,s.useContext)(tX);if(null===t)return[!0,null];let{isPresent:i,onExitComplete:r,register:n}=t,a=(0,s.useId)();(0,s.useEffect)(()=>{if(e)return n(a)},[e]);let o=(0,s.useCallback)(()=>e&&r&&r(a),[a,r,e]);return!i&&r?[!1,o]:[!0]}let r2={hasAnimatedSinceResize:!0,hasEverUpdated:!1},r3=!1;class r5 extends r0.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:n}=e;n&&(t.group&&t.group.add(n),i&&i.register&&r&&i.register(n),r3&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),r2.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:i,drag:r,isPresent:n}=this.props,{projection:s}=i;return s&&(s.isPresent=n,r3=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==n?s.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?s.promote():s.relegate()||el.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),e5.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r3=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function r6(e){let[t,i]=r1(),r=(0,r0.useContext)(tU);return(0,tV.jsx)(r5,{...e,layoutGroup:r,switchLayoutGroup:(0,r0.useContext)(t5),isPresent:t,safeToRemove:i})}function r4(e){return"object"==typeof e&&null!==e}function r8(e){return r4(e)&&"ownerSVGElement"in e}let r7=(e,t)=>e.depth-t.depth;class r9{constructor(){this.children=[],this.isDirty=!1}add(e){eJ(this.children,e),this.isDirty=!0}remove(e){eZ(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(r7),this.isDirty=!1,this.children.forEach(e)}}let ne=["TopLeft","TopRight","BottomLeft","BottomRight"],nt=ne.length,ni=e=>"string"==typeof e?parseFloat(e):e,nr=e=>"number"==typeof e||H.test(e);function nn(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let ns=no(0,.5,iG),na=no(.5,.95,en);function no(e,t,i){return r=>r<e?0:r>t?1:i(iJ(e,t,r))}function nl(e,t){e.min=t.min,e.max=t.max}function nh(e,t){nl(e.x,t.x),nl(e.y,t.y)}function nu(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function nc(e,t,i,r,n){return e-=t,e=r+1/i*(e-r),void 0!==n&&(e=r+1/n*(e-r)),e}function nd(e,t,[i,r,n],s,a){!function(e,t=0,i=1,r=.5,n,s=e,a=e){if(z.test(t)&&(t=parseFloat(t),t=S(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=S(s.min,s.max,r);e===s&&(o-=t),e.min=nc(e.min,t,i,o,n),e.max=nc(e.max,t,i,o,n)}(e,t[i],t[r],t[n],t.scale,s,a)}let nf=["x","scaleX","originX"],np=["y","scaleY","originY"];function nm(e,t,i,r){nd(e.x,t,nf,i?i.x:void 0,r?r.x:void 0),nd(e.y,t,np,i?i.y:void 0,r?r.y:void 0)}function ng(e){return 0===e.translate&&1===e.scale}function ny(e){return ng(e.x)&&ng(e.y)}function nv(e,t){return e.min===t.min&&e.max===t.max}function nw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function nb(e,t){return nw(e.x,t.x)&&nw(e.y,t.y)}function nE(e){return rN(e.x)/rN(e.y)}function nT(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class n_{constructor(){this.members=[]}add(e){eJ(this.members,e),e.scheduleRender()}remove(e){if(eZ(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,i=this.members.findIndex(t=>e===t);if(0===i)return!1;for(let e=i;e>=0;e--){let i=this.members[e];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:r}=e.options;!1===r&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let nS=["","X","Y","Z"],nI=0;function nx(e,t,i,r){let{latestValues:n}=t;n[e]&&(i[e]=n[e],t.setStaticValue(e,0),r&&(r[e]=0))}function nC({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(e={},i=t?.()){this.id=nI++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nP),this.nodes.forEach(nV),this.nodes.forEach(nU),this.nodes.forEach(nR)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new r9)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new e0),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let i=this.eventHandlers.get(e);i&&i.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=r8(t)&&!(r8(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:i,layout:r,visualElement:n}=this.options;if(n&&!n.current&&n.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||i)&&(this.isLayoutDirty=!0),e){let i,r=0,n=()=>this.root.updateBlockedByResize=!1;el.read(()=>{r=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==r){let t,s;r=e,this.root.updateBlockedByResize=!0,i&&i(),t=eQ.now(),s=({timestamp:e})=>{let i=e-t;i>=250&&(eh(s),n(i-250))},el.setup(s,!0),i=()=>eh(s),r2.hasAnimatedSinceResize&&(r2.hasAnimatedSinceResize=!1,this.nodes.forEach(nL))}})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&n&&(i||r)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:i,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let s=this.options.transition||n.getDefaultTransition()||nH,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=n.getProps(),l=!this.targetLayout||!nb(this.targetLayout,r),h=!t&&i;if(this.options.layoutRoot||this.resumeFrom||h||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...t7(s,"layout"),onPlay:a,onComplete:o};(n.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,h)}else t||nL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),eh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nF),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:i}=t.options;if(!i)return;let r=i.props[t3];if(window.MotionHasOptimisedAnimation(r,"transform")){let{layout:e,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",el,!(e||i))}let{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&e(n)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:i}=this.options;if(void 0===t&&!i)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nD);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(nO);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nM),this.nodes.forEach(nA),this.nodes.forEach(nk)):this.nodes.forEach(nO),this.clearAllSnapshots();let e=eQ.now();eu.delta=V(0,1e3/60,e-eu.timestamp),eu.timestamp=e,eu.isProcessing=!0,ec.update.process(eu),ec.preRender.process(eu),ec.render.process(eu),eu.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,e5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nN),this.sharedNodes.forEach(nj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,el.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){el.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||rN(this.snapshot.measuredBox.x)||rN(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=te(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!n)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!ny(this.projectionDelta),i=this.getTransformTemplate(),r=i?i(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||C(this.latestValues)||s)&&(n(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let i=this.measurePageBox(),r=this.removeElementScroll(i);return e&&(r=this.removeTransform(r)),nG((t=r).x),nG(t.y),{animationId:this.root.animationId,measuredBox:i,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return te();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nX))){let{scroll:e}=this.root;e&&(N(t.x,e.offset.x),N(t.y,e.offset.y))}return t}removeElementScroll(e){let t=te();if(nh(t,e),this.scroll?.wasRoot)return t;for(let i=0;i<this.path.length;i++){let r=this.path[i],{scroll:n,options:s}=r;r!==this.root&&n&&s.layoutScroll&&(n.wasRoot&&nh(t,e),N(t.x,n.offset.x),N(t.y,n.offset.y))}return t}applyTransform(e,t=!1){let i=te();nh(i,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&O(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),C(r.latestValues)&&O(i,r.latestValues)}return C(this.latestValues)&&O(i,this.latestValues),i}removeTransform(e){let t=te();nh(t,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];if(!i.instance||!C(i.latestValues))continue;x(i.latestValues)&&i.updateSnapshot();let r=te();nh(r,i.measurePageBox()),nm(t,i.latestValues,i.snapshot?i.snapshot.layoutBox:void 0,r)}return C(this.latestValues)&&nm(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==eu.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let i=!!this.resumingFrom||this!==t;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:n}=this.options;if(!this.layout||!(r||n))return;this.resolvedRelativeTargetAt=eu.timestamp;let s=this.getClosestProjectingParent();if(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=te(),this.targetWithTransforms=te()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,rM(a.x,o.x,l.x),rM(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nh(this.target,this.layout.layoutBox),R(this.target,this.targetDelta)):nh(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&!!s.resumingFrom==!!this.resumingFrom&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||x(this.parent.latestValues)||A(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,i){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=te(),this.relativeTargetOrigin=te(),rV(this.relativeTargetOrigin,t,i),nh(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,i=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(i=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===eu.timestamp&&(i=!1),i)return;let{layout:r,layoutId:n}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||n))return;nh(this.layoutCorrected,this.layout.layoutBox);let s=this.treeScale.x,a=this.treeScale.y;!function(e,t,i,r=!1){let n,s,a=i.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){s=(n=i[o]).projectionDelta;let{visualElement:a}=n.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(r&&n.options.layoutScroll&&n.scroll&&n!==n.root&&O(e,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,R(e,s)),r&&C(n.latestValues)&&O(e,n.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=te());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(nu(this.prevProjectionDelta.x,this.projectionDelta.x),nu(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),rO(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&nT(this.projectionDelta.x,this.prevProjectionDelta.x)&&nT(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=e7(),this.projectionDelta=e7(),this.projectionDeltaWithTransform=e7()}setAnimationOrigin(e,t=!1){let i,r=this.snapshot,n=r?r.latestValues:{},s={...this.latestValues},a=e7();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=te(),l=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),h=this.getStack(),u=!h||h.members.length<=1,c=!!(l&&!u&&!0===this.options.crossfade&&!this.path.some(nz));this.animationProgress=0,this.mixTargetDelta=t=>{let r=t/1e3;if(nB(a.x,e.x,r),nB(a.y,e.y,r),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var h,d,f,p,m,g;rV(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=o,g=r,n$(f.x,p.x,m.x,g),n$(f.y,p.y,m.y,g),i&&(h=this.relativeTarget,d=i,nv(h.x,d.x)&&nv(h.y,d.y))&&(this.isProjectionDirty=!1),i||(i=te()),nh(i,this.relativeTarget)}l&&(this.animationValues=s,function(e,t,i,r,n,s){n?(e.opacity=S(0,i.opacity??1,ns(r)),e.opacityExit=S(t.opacity??1,0,na(r))):s&&(e.opacity=S(t.opacity??1,i.opacity??1,r));for(let n=0;n<nt;n++){let s=`border${ne[n]}Radius`,a=nn(t,s),o=nn(i,s);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||nr(a)===nr(o)?(e[s]=Math.max(S(ni(a),ni(o),r),0),(z.test(o)||z.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||i.rotate)&&(e.rotate=S(t.rotate||0,i.rotate||0,r))}(s,n,this.latestValues,r,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(eh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=el.update(()=>{var t,i,r;let n;r2.hasAnimatedSinceResize=!0,ia.layout++,this.motionValue||(this.motionValue=e2(0)),this.currentAnimation=(t=this.motionValue,i=[0,1e3],r={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{ia.layout--},onComplete:()=>{ia.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(n=eX(t)?t:e2(t)).start(rm("",n,i,r)),n.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:i,layout:r,latestValues:n}=e;if(t&&i&&r){if(this!==e&&this.layout&&r&&nK(this.options.animationType,this.layout.layoutBox,r.layoutBox)){i=this.target||te();let t=rN(this.layout.layoutBox.x);i.x.min=e.target.x.min,i.x.max=i.x.min+t;let r=rN(this.layout.layoutBox.y);i.y.min=e.target.y.min,i.y.max=i.y.min+r}nh(t,i),O(t,n),rO(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new n_),this.sharedNodes.get(e).add(t);let i=t.options.initialPromotionConfig;t.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:i}={}){let r=this.getStack();r&&r.promote(this,i),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:i}=e;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(t=!0),!t)return;let r={};i.z&&nx("z",e,r,this.animationValues);for(let t=0;t<nS.length;t++)nx(`rotate${nS[t]}`,e,r,this.animationValues),nx(`skew${nS[t]}`,e,r,this.animationValues);for(let t in e.render(),r)e.setStaticValue(t,r[t]),this.animationValues&&(this.animationValues[t]=r[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let i=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=tQ(t?.pointerEvents)||"",e.transform=i?i(this.latestValues,""):"none";return}let r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=tQ(t?.pointerEvents)||""),this.hasProjected&&!C(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1);return}e.visibility="";let n=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,i){let r="",n=e.x.translate/t.x,s=e.y.translate/t.y,a=i?.z||0;if((n||s||a)&&(r=`translate3d(${n}px, ${s}px, ${a}px) `),(1!==t.x||1!==t.y)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),i){let{transformPerspective:e,rotate:t,rotateX:n,rotateY:s,skewX:a,skewY:o}=i;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),n&&(r+=`rotateX(${n}deg) `),s&&(r+=`rotateY(${s}deg) `),a&&(r+=`skewX(${a}deg) `),o&&(r+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,n);i&&(s=i(n,s)),e.transform=s;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?n.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:n.opacityExit:e.opacity=r===this?void 0!==n.opacity?n.opacity:"":void 0!==n.opacityExit?n.opacityExit:0,t_){if(void 0===n[t])continue;let{correct:i,applyTo:a,isCSSVariable:o}=t_[t],l="none"===s?n[t]:i(n[t],r);if(a){let t=a.length;for(let i=0;i<t;i++)e[a[i]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=r===this?tQ(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(nD),this.root.sharedNodes.clear()}}}function nA(e){e.updateLayout()}function nk(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:i,measuredBox:r}=e.layout,{animationType:n}=e.options,s=t.source!==e.layout.source;"size"===n?rU(e=>{let r=s?t.measuredBox[e]:t.layoutBox[e],n=rN(r);r.min=i[e].min,r.max=r.min+n}):nK(n,t.layoutBox,i)&&rU(r=>{let n=s?t.measuredBox[r]:t.layoutBox[r],a=rN(i[r]);n.max=n.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});let a=e7();rO(a,i,t.layoutBox);let o=e7();s?rO(o,e.applyTransform(r,!0),t.measuredBox):rO(o,i,t.layoutBox);let l=!ny(a),h=!1;if(!e.resumeFrom){let r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:n,layout:s}=r;if(n&&s){let a=te();rV(a,t.layoutBox,n.layoutBox);let o=te();rV(o,i,s.layoutBox),nb(a,o)||(h=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:h})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function nP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function nR(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nN(e){e.clearSnapshot()}function nD(e){e.clearMeasurements()}function nO(e){e.isLayoutDirty=!1}function nM(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nV(e){e.resolveTargetDelta()}function nU(e){e.calcProjection()}function nF(e){e.resetSkewAndRotation()}function nj(e){e.removeLeadSnapshot()}function nB(e,t,i){e.translate=S(t.translate,0,i),e.scale=S(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function n$(e,t,i,r){e.min=S(t.min,i.min,r),e.max=S(t.max,i.max,r)}function nz(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let nH={duration:.45,ease:[.4,0,.1,1]},nW=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nq=nW("applewebkit/")&&!nW("chrome/")?Math.round:en;function nG(e){e.min=nq(e.min),e.max=nq(e.max)}function nK(e,t,i){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(nE(t)-nE(i)))}function nX(e){return e!==e.root&&e.scroll?.wasRoot}let nY=nC({attachResizeListener:(e,t)=>rA(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nQ={current:void 0},nJ=nC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nQ.current){let e=new nY({});e.mount(window),e.setOptions({layoutScroll:!0}),nQ.current=e}return nQ.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function nZ(e,t){let i=function(e,t,i){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,i=(void 0)??t.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}(e),r=new AbortController;return[i,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function n0(e){return!("touch"===e.pointerType||rC.x||rC.y)}function n1(e,t,i){let{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===i);let n=r["onHover"+i];n&&el.postRender(()=>n(t,rP(t)))}function n2(e){return r4(e)&&"offsetHeight"in e}let n3=(e,t)=>!!t&&(e===t||n3(e,t.parentElement)),n5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),n6=new WeakSet;function n4(e){return t=>{"Enter"===t.key&&e(t)}}function n8(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function n7(e){return rk(e)&&!(rC.x||rC.y)}function n9(e,t,i){let{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===i);let n=r["onTap"+("End"===i?"":i)];n&&el.postRender(()=>n(t,rP(t)))}let se=new WeakMap,st=new WeakMap,si=e=>{let t=se.get(e.target);t&&t(e)},sr=e=>{e.forEach(si)},sn={some:0,all:1},ss=function(e,t){if("undefined"==typeof Proxy)return t4;let i=new Map,r=(i,r)=>t4(i,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(n,s)=>"create"===s?r:(i.has(s)||i.set(s,t4(s,void 0,e,t)),i.get(s))})}({animation:{Feature:class extends rI{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:i})=>(function(e,t,i={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t))r=Promise.all(t.map(t=>rv(e,t,i)));else if("string"==typeof t)r=rv(e,t,i);else{let n="function"==typeof t?t8(e,t,i.custom):t;r=Promise.all(rg(e,n,i))}return r.then(()=>{e.notify("AnimationComplete",t)})})(e,t,i))),i=rS(),r=!0,n=t=>(i,r)=>{let n=t8(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(n){let{transition:e,transitionEnd:t,...r}=n;i={...i,...r,...t}}return i};function s(s){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let i=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(i.initial=t.props.initial),i}let i={};for(let e=0;e<rb;e++){let r=tl[e],n=t.props[r];(ta(n)||!1===n)&&(i[r]=n)}return i}(e.parent)||{},l=[],h=new Set,u={},c=1/0;for(let t=0;t<rT;t++){var d,f;let p=rE[t],m=i[p],g=void 0!==a[p]?a[p]:o[p],y=ta(g),v=p===s?m.isActive:null;!1===v&&(c=t);let w=g===o[p]&&g!==a[p]&&y;if(w&&r&&e.manuallyAnimateOnMount&&(w=!1),m.protectedKeys={...u},!m.isActive&&null===v||!g&&!m.prevProp||ts(g)||"boolean"==typeof g)continue;let b=(d=m.prevProp,"string"==typeof(f=g)?f!==d:!!Array.isArray(f)&&!rw(f,d)),E=b||p===s&&m.isActive&&!w&&y||t>c&&y,T=!1,_=Array.isArray(g)?g:[g],S=_.reduce(n(p),{});!1===v&&(S={});let{prevResolvedValues:I={}}=m,x={...I,...S},C=t=>{E=!0,h.has(t)&&(T=!0,h.delete(t)),m.needsAnimating[t]=!0;let i=e.getValue(t);i&&(i.liveStyle=!1)};for(let e in x){let t=S[e],i=I[e];if(!u.hasOwnProperty(e))(t9(t)&&t9(i)?rw(t,i):t===i)?void 0!==t&&h.has(e)?C(e):m.protectedKeys[e]=!0:null!=t?C(e):h.add(e)}m.prevProp=g,m.prevResolvedValues=S,m.isActive&&(u={...u,...S}),r&&e.blockInitialAnimation&&(E=!1);let A=w&&b,k=!A||T;E&&k&&l.push(..._.map(t=>{let i={type:p};if("string"==typeof t&&r&&!A&&e.manuallyAnimateOnMount&&e.parent){let{parent:r}=e,n=t8(r,t);if(r.enteringChildren&&n){let{delayChildren:t}=n.transition||{};i.delay=ry(r.enteringChildren,e,t)}}return{animation:t,options:i}}))}if(h.size){let t={};if("boolean"!=typeof a.initial){let i=t8(e,Array.isArray(a.initial)?a.initial[0]:a.initial);i&&i.transition&&(t.transition=i.transition)}h.forEach(i=>{let r=e.getBaseTarget(i),n=e.getValue(i);n&&(n.liveStyle=!0),t[i]=r??null}),l.push({animation:t})}let p=!!l.length;return r&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){if(i[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),i[t].isActive=r;let n=s(t);for(let e in i)i[e].protectedKeys={};return n},setAnimateFunction:function(i){t=i(e)},getState:()=>i,reset:()=>{i=rS()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();ts(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends rI{constructor(){super(...arguments),this.id=rx++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;let r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends rI{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:i={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=i,o={root:r?r.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:sn[s]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:i,onViewportLeave:r}=this.node.getProps(),n=t?i:r;n&&n(e)};return e=this.node.current,t=function({root:e,...t}){let i=e||document;st.has(i)||st.set(i,{});let r=st.get(i),n=JSON.stringify(t);return r[n]||(r[n]=new IntersectionObserver(sr,{root:e,...t})),r[n]}(o),se.set(e,l),t.observe(e),()=>{se.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends rI{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,i={}){let[r,n,s]=nZ(e,i),a=e=>{let r=e.currentTarget;if(!n7(e))return;n6.add(r);let s=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),n6.has(r)&&n6.delete(r),n7(e)&&"function"==typeof s&&s(e,{success:t})},o=e=>{a(e,r===window||r===document||i.useGlobalTarget||n3(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,n),window.addEventListener("pointercancel",l,n)};return r.forEach(e=>{((i.useGlobalTarget?window:e).addEventListener("pointerdown",a,n),n2(e))&&(e.addEventListener("focus",e=>((e,t)=>{let i=e.currentTarget;if(!i)return;let r=n4(()=>{if(n6.has(i))return;n8(i,"down");let e=n4(()=>{n8(i,"up")});i.addEventListener("keyup",e,t),i.addEventListener("blur",()=>n8(i,"cancel"),t)});i.addEventListener("keydown",r,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),t)})(e,n)),n5.has(e.tagName)||-1!==e.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}(e,(e,t)=>(n9(this.node,t,"Start"),(e,{success:t})=>n9(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends rI{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ir(rA(this.node.current,"focus",()=>this.onFocus()),rA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends rI{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,i={}){let[r,n,s]=nZ(e,i),a=e=>{if(!n0(e))return;let{target:i}=e,r=t(i,e);if("function"!=typeof r||!i)return;let s=e=>{n0(e)&&(r(e),i.removeEventListener("pointerleave",s))};i.addEventListener("pointerleave",s,n)};return r.forEach(e=>{e.addEventListener("pointerenter",a,n)}),s}(e,(e,t)=>(n1(this.node,t,"Start"),e=>n1(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends rI{constructor(){super(...arguments),this.removePointerDownListener=en}onPointerDown(e){this.session=new rB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rF(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:rZ(e),onStart:rZ(t),onMove:i,onEnd:(e,t)=>{delete this.session,r&&el.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=rR(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends rI{constructor(e){super(e),this.removeGroupControls=en,this.removeListeners=en,this.controls=new rQ(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||en}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:nJ,MeasureLayout:r6},layout:{ProjectionNode:nJ,MeasureLayout:r6}},(e,t)=>tL(e)?new tO(t):new tx(t,{allowProjection:e!==s.Fragment}));e.s(["motion",()=>ss],40487);var sa=s;function so(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class sl extends sa.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,i=n2(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sh({children:e,isPresent:t,anchorX:i,root:r}){let n=(0,sa.useId)(),a=(0,sa.useRef)(null),o=(0,sa.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,sa.useContext)(tj),h=function(...e){return s.useCallback(function(...e){return t=>{let i=!1,r=e.map(e=>{let r=so(e,t);return i||"function"!=typeof r||(i=!0),r});if(i)return()=>{for(let t=0;t<r.length;t++){let i=r[t];"function"==typeof i?i():so(e[t],null)}}}}(...e),e)}(a,e?.ref);return(0,sa.useInsertionEffect)(()=>{let{width:e,height:s,top:h,left:u,right:c}=o.current;if(t||!a.current||!e||!s)return;let d="left"===i?`left: ${u}`:`right: ${c}`;a.current.dataset.motionPopId=n;let f=document.createElement("style");l&&(f.nonce=l);let p=r??document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${d}px !important;
            top: ${h}px !important;
          }
        `),()=>{p.contains(f)&&p.removeChild(f)}},[t]),(0,tV.jsx)(sl,{isPresent:t,childRef:a,sizeRef:o,children:sa.cloneElement(e,{ref:h})})}let su=({children:e,initial:t,isPresent:i,onExitComplete:r,custom:n,presenceAffectsLayout:a,mode:o,anchorX:l,root:h})=>{let u=tY(sc),c=(0,s.useId)(),d=!0,f=(0,s.useMemo)(()=>(d=!1,{id:c,initial:t,isPresent:i,custom:n,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[i,u,r]);return a&&d&&(f={...f}),(0,s.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[i]),s.useEffect(()=>{i||u.size||!r||r()},[i]),"popLayout"===o&&(e=(0,tV.jsx)(sh,{isPresent:i,anchorX:l,root:h,children:e})),(0,tV.jsx)(tX.Provider,{value:f,children:e})};function sc(){return new Map}let sd=e=>e.key||"";function sf(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let sp=({children:e,custom:t,initial:i=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",root:h})=>{let[u,c]=r1(o),d=(0,s.useMemo)(()=>sf(e),[e]),f=o&&!u?[]:d.map(sd),p=(0,s.useRef)(!0),m=(0,s.useRef)(d),g=tY(()=>new Map),[y,v]=(0,s.useState)(d),[w,b]=(0,s.useState)(d);t6(()=>{p.current=!1,m.current=d;for(let e=0;e<w.length;e++){let t=sd(w[e]);f.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[w,f.length,f.join("-")]);let E=[];if(d!==y){let e=[...d];for(let t=0;t<w.length;t++){let i=w[t],r=sd(i);f.includes(r)||(e.splice(t,0,i),E.push(i))}return"wait"===a&&E.length&&(e=E),b(sf(e)),v(d),null}let{forceRender:T}=(0,s.useContext)(tU);return(0,tV.jsx)(tV.Fragment,{children:w.map(e=>{let s=sd(e),y=(!o||!!u)&&(d===w||f.includes(s));return(0,tV.jsx)(su,{isPresent:y,initial:(!p.current||!!i)&&void 0,custom:t,presenceAffectsLayout:n,mode:a,root:h,onExitComplete:y?void 0:()=>{if(!g.has(s))return;g.set(s,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(T?.(),b(m.current),o&&c?.(),r&&r())},anchorX:l,children:e},s)})})};e.s(["AnimatePresence",()=>sp],83951);let sm=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},sg=(...e)=>e.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim();var sy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let sv=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:n="",children:a,iconNode:o,...l},h)=>(0,s.createElement)("svg",{ref:h,...sy,width:t,height:t,stroke:e,strokeWidth:r?24*Number(i)/Number(t):i,className:sg("lucide",n),...!a&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(l)&&{"aria-hidden":"true"},...l},[...o.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(a)?a:[a]])),sw=(e,t)=>{let i=(0,s.forwardRef)(({className:i,...r},n)=>(0,s.createElement)(sv,{ref:n,iconNode:t,className:sg(`lucide-${sm(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...r}));return i.displayName=sm(e),i};e.s(["default",()=>sw],40370)},45766,e=>{"use strict";let t=(0,e.i(40370).default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);e.s(["Cpu",()=>t],45766)},38870,e=>{"use strict";let t=(0,e.i(40370).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],38870)},9738,(e,t,i)=>{var r={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),i=t[0],r=t[1];return(i+r)*3/4-r},t.toByteArray=function(e){var t,i,s=l(e),a=s[0],o=s[1],h=new n((a+o)*3/4-o),u=0,c=o>0?a-4:a;for(i=0;i<c;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],h[u++]=t>>16&255,h[u++]=t>>8&255,h[u++]=255&t;return 2===o&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,h[u++]=255&t),1===o&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,h[u++]=t>>8&255,h[u++]=255&t),h},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],a=0,o=r-n;a<o;a+=16383)s.push(function(e,t,r){for(var n,s=[],a=t;a<r;a+=3)n=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===n?s.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&s.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}r[45]=62,r[95]=63},72:function(e,t,i){"use strict";var r=i(675),n=i(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,i)}function l(e,t,i){if("string"==typeof e){var r=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|f(r,n),l=a(s),h=l.write(r,n);return h!==s&&(l=l.slice(0,h)),l}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(k(e,ArrayBuffer)||e&&k(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(k(e,SharedArrayBuffer)||e&&k(e.buffer,SharedArrayBuffer)))return function(e,t,i){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),o.prototype),r}(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var u=e.valueOf&&e.valueOf();if(null!=u&&u!==e)return o.from(u,t,i);var p=function(e){if(o.isBuffer(e)){var t=0|d(e.length),i=a(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return h(e),a(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),i=a(t),r=0;r<t;r+=1)i[r]=255&e[r];return i}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,i){return l(e,t,i)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,i){return(h(e),e<=0)?a(e):void 0!==t?"string"==typeof i?a(e).fill(t,i):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return C(e).length;default:if(n)return r?-1:I(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,i){var n,s,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=t;s<i;++s)n+=P[e[s]];return n}(this,t,i);case"utf8":case"utf-8":return v(this,t,i);case"ascii":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,i);case"latin1":case"binary":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}(this,t,i);case"base64":return n=this,s=t,a=i,0===s&&a===n.length?r.fromByteArray(n):r.fromByteArray(n.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var r=e.slice(t,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}(this,t,i);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function g(e,t,i,r,n){var s;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(s=i*=1)!=s&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length)if(n)return -1;else i=e.length-1;else if(i<0)if(!n)return -1;else i=0;if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:y(e,t,i,r,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,i);else return Uint8Array.prototype.lastIndexOf.call(e,t,i);return y(e,[t],i,r,n)}throw TypeError("val must be string, number or Buffer")}function y(e,t,i,r,n){var s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,i/=2}function h(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){var u=-1;for(s=i;s<o;s++)if(h(e,s)===h(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*a}else -1!==u&&(s-=s-u),u=-1}else for(i+l>o&&(i=o-l),s=i;s>=0;s--){for(var c=!0,d=0;d<l;d++)if(h(e,s+d)!==h(t,d)){c=!1;break}if(c)return s}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,r=t.length,n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:+(r<i)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;var i,r=o.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var s=e[i];if(k(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,i,r,n){if(k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var s=n-r,a=i-t,l=Math.min(s,a),h=this.slice(r,n),u=e.slice(t,i),c=0;c<l;++c)if(h[c]!==u[c]){s=h[c],a=u[c];break}return s<a?-1:+(a<s)},o.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},o.prototype.indexOf=function(e,t,i){return g(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return g(this,e,t,i,!1)};function v(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var s,a,o,l,h=e[n],u=null,c=h>239?4:h>223?3:h>191?2:1;if(n+c<=i)switch(c){case 1:h<128&&(u=h);break;case 2:(192&(s=e[n+1]))==128&&(l=(31&h)<<6|63&s)>127&&(u=l);break;case 3:s=e[n+1],a=e[n+2],(192&s)==128&&(192&a)==128&&(l=(15&h)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[n+1],a=e[n+2],o=e[n+3],(192&s)==128&&(192&a)==128&&(192&o)==128&&(l=(15&h)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,c=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=c}var d=r,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return p}function w(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function b(e,t,i,r,n,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function E(e,t,i,r,n,s){if(i+r>e.length||i<0)throw RangeError("Index out of range")}function T(e,t,i,r,s){return t*=1,i>>>=0,s||E(e,t,i,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,i,r,23,4),i+4}function _(e,t,i,r,s){return t*=1,i>>>=0,s||E(e,t,i,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,i,r,52,8),i+8}o.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,a,o,l,h,u,c,d=this.length-t;if((void 0===i||i>d)&&(i=d),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=t.length;r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o,l=parseInt(t.substr(2*a,2),16);if((o=l)!=o)break;e[i+a]=l}return a}(this,e,t,i);case"utf8":case"utf-8":return n=t,s=i,A(I(e,this.length-n),this,n,s);case"ascii":return a=t,o=i,A(x(e),this,a,o);case"latin1":case"binary":return function(e,t,i,r){return A(x(t),e,i,r)}(this,e,t,i);case"base64":return l=t,h=i,A(C(e),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,c=i,A(function(e,t){for(var i,r,n=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(i=e.charCodeAt(s))>>8,n.push(i%256),n.push(r);return n}(e,this.length-u),this,u,c);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r},o.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=t,n=1,s=this[e+--r];r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=1,a=0;for(this[t]=255&e;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i},o.prototype.writeUIntBE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=i-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i},o.prototype.writeUInt8=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,i,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=0,a=1,o=0;for(this[t]=255&e;++s<i&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+i},o.prototype.writeIntBE=function(e,t,i,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=i-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,i){return T(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return T(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return _(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return _(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,r){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n=r-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,r);else if(this===e&&i<t&&t<r)for(var s=n-1;s>=0;--s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,r),t);return n},o.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{var a=o.isBuffer(e)?e:o.from(e,r),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=a[n%l]}return this};var S=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var i,r=e.length,n=null,s=[],a=0;a<r;++a){if((i=e.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319||a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function x(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function C(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var P=function(){for(var e="0123456789abcdef",t=Array(256),i=0;i<16;++i)for(var r=16*i,n=0;n<16;++n)t[r+n]=e[i]+e[n];return t}()},783:function(e,t){t.read=function(e,t,i,r,n){var s,a,o=8*n-r-1,l=(1<<o)-1,h=l>>1,u=-7,c=i?n-1:0,d=i?-1:1,f=e[t+c];for(c+=d,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=256*s+e[t+c],c+=d,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=r;u>0;a=256*a+e[t+c],c+=d,u-=8);if(0===s)s=1-h;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=h}return(f?-1:1)*a*Math.pow(2,s-r)},t.write=function(e,t,i,r,n,s){var a,o,l,h=8*s-n-1,u=(1<<h)-1,c=u>>1,d=5960464477539062e-23*(23===n),f=r?0:s-1,p=r?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=u?(o=0,a=u):a+c>=1?(o=(t*l-1)*Math.pow(2,n),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;e[i+f]=255&o,f+=p,o/=256,n-=8);for(a=a<<n|o,h+=n;h>0;e[i+f]=255&a,f+=p,a/=256,h-=8);e[i+f-p]|=128*m}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}},a=!0;try{r[e](i,i.exports,s),a=!1}finally{a&&delete n[e]}return i.exports}s.ab="/ROOT/comet-browser/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},83885,e=>{"use strict";let t,i,r;var n,s,a,o,l,h,u,c,d,f,p,m,g,y,v,w,b=e.i(70795);let E=function(e){let t=[],i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:((64512&n)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[i++]=n>>18|240,t[i++]=n>>12&63|128):t[i++]=n>>12|224,t[i++]=n>>6&63|128),t[i++]=63&n|128)}return t},T=function(e){let t=[],i=0,r=0;for(;i<e.length;){let n=e[i++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){let s=e[i++];t[r++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){let s=((7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{let s=e[i++],a=e[i++];t[r++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&a)}}return t.join("")},_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let n=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,h=n>>2,u=(3&n)<<4|a>>4,c=(15&a)<<2|l>>6,d=63&l;!o&&(d=64,s||(c=64)),r.push(i[h],i[u],i[c],i[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(E(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):T(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let n=i[e.charAt(t++)],s=t<e.length?i[e.charAt(t)]:0,a=++t<e.length?i[e.charAt(t)]:64,o=++t<e.length?i[e.charAt(t)]:64;if(++t,null==n||null==s||null==a||null==o)throw new S;let l=n<<2|s>>4;if(r.push(l),64!==a){let e=s<<4&240|a>>2;if(r.push(e),64!==o){let e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class S extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let I=function(e){let t=E(e);return _.encodeByteArray(t,!0)},x=function(e){return I(e).replace(/\./g,"")},C=function(e){try{return _.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},A=()=>{try{return("undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g).__FIREBASE_DEFAULTS__||(()=>{if(void 0===b.default||void 0===b.default.env)return;let e=b.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&C(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},k=e=>A()?.emulatorHosts?.[e],P=()=>A()?.config,R=e=>A()?.[`_${e}`];class N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function D(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O(e){return(await fetch(e,{credentials:"include"})).ok}let M={},L=!1;function V(e,t){if("undefined"==typeof window||"undefined"==typeof document||!D(window.location.host)||M[e]===t||M[e]||L)return;function i(e){return`__firebase__banner__${e}`}M[e]=t;let r="__firebase__banner",n=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(M))M[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(r),t=!1,e||((e=document.createElement("div")).setAttribute("id",r),t=!0),{created:t,element:e}),a=i("text"),o=document.getElementById(a)||document.createElement("span"),l=i("learnmore"),h=document.getElementById(l)||document.createElement("a"),u=i("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e,t=s.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",h.setAttribute("id",l),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline";let i=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;L=!0,(e=document.getElementById(r))&&e.remove()},e);c.setAttribute("width","24"),c.setAttribute("id",u),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px",t.append(c,o,h,i),document.body.appendChild(t)}n?(o.innerText="Preview backend disconnected.",c.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(c.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,o.innerText="Preview backend running in this workspace."),o.setAttribute("id",a)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function U(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function F(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}class j extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){var i,r;let n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?(i=a,r=n,i.replace($,(e,t)=>{let i=r[t];return null!=i?String(i):`<${t}?>`})):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new j(s,l,n)}}let $=/\{\$([^}]+)}/g;function z(e,t){if(e===t)return!0;let i=Object.keys(e),r=Object.keys(t);for(let n of i){if(!r.includes(n))return!1;let i=e[n],s=t[n];if(H(i)&&H(s)){if(!z(i,s))return!1}else if(i!==s)return!1}for(let e of r)if(!i.includes(e))return!1;return!0}function H(e){return null!==e&&"object"==typeof e}function W(e){let t=[];for(let[i,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function q(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[i,r]=e.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function G(e){let t=e.indexOf("?");if(!t)return"";let i=e.indexOf("#",t);return e.substring(t,i>0?i:void 0)}class K{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:i}:e).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);let n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X(){}function Y(e){return e&&e._delegate?e._delegate:e}class Q{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let J="[DEFAULT]";class Z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new N;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(i)return null;throw e}if(i)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:J})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=J){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=J){return this.instances.has(e)}getOptions(e=J){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[e,t]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let n=this.instances.get(i);return n&&e(n,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var i;let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e)===J?void 0:i,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=J){return this.component?this.component.multipleInstances?e:J:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let et=[];(n=a||(a={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT";let ei={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},er=a.INFO,en={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},es=(e,t,...i)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),n=en[t];if(n)console[n](`[${r}]  ${e.name}:`,...i);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ea{constructor(e){this.name=e,this._logLevel=er,this._logHandler=es,this._userLogHandler=null,et.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ei[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...e),this._logHandler(this,a.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...e),this._logHandler(this,a.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,a.INFO,...e),this._logHandler(this,a.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,a.WARN,...e),this._logHandler(this,a.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...e),this._logHandler(this,a.ERROR,...e)}}let eo=new WeakMap,el=new WeakMap,eh=new WeakMap,eu=new WeakMap,ec=new WeakMap,ed={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return el.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eh.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ef(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ef(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",s)},n=()=>{t(ef(e.result)),r()},s=()=>{i(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&eo.set(t,e)}).catch(()=>{}),ec.set(t,e),t}if(eu.has(e))return eu.get(e);let r=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ep(this),t),ef(eo.get(this))}:function(...t){return ef(e.apply(ep(this),t))}:function(t,...i){let r=e.call(ep(this),t,...i);return eh.set(r,t.sort?t.sort():[t]),ef(r)};return e instanceof IDBTransaction&&function(e){if(el.has(e))return;let t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",s),e.removeEventListener("abort",s)},n=()=>{t(),r()},s=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",s),e.addEventListener("abort",s)});el.set(e,t)}(e),(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,ed):e}(e);return r!==e&&(eu.set(e,r),ec.set(r,e)),r}let ep=e=>ec.get(e),em=["get","getKey","getAll","getAllKeys","count"],eg=["put","add","delete","clear"],ey=new Map;function ev(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(ey.get(t))return ey.get(t);let i=t.replace(/FromIndex$/,""),r=t!==i,n=eg.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(n||em.includes(i)))return;let s=async function(e,...t){let s=this.transaction(e,n?"readwrite":"readonly"),a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[i](...t),n&&s.done]))[0]};return ey.set(t,s),s}ed={...r=ed,get:(e,t,i)=>ev(e,t)||r.get(e,t,i),has:(e,t)=>!!ev(e,t)||r.has(e,t)};class ew{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if(t=e.getComponent(),t?.type!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let eb="@firebase/app",eE="0.14.6",eT=new ea("@firebase/app"),e_="[DEFAULT]",eS={[eb]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eI=new Map,ex=new Map,eC=new Map;function eA(e,t){try{e.container.addComponent(t)}catch(i){eT.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function ek(e,t){e.container.addOrOverwriteComponent(t)}function eP(e){let t=e.name;if(eC.has(t))return eT.debug(`There were multiple attempts to register component ${t}.`),!1;for(let i of(eC.set(t,e),eI.values()))eA(i,e);for(let t of ex.values())eA(t,e);return!0}function eR(e,t){let i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function eN(e,t,i=e_){eR(e,t).clearInstance(i)}function eD(e){return void 0!==e.options}function eO(e){return!eD(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function eM(e){return null!=e&&void 0!==e.settings}function eL(){eC.clear()}let eV=new B("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eU{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Q("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eV.create("app-deleted",{appName:this._name})}}function eF(e,t){let i=C(e.split(".")[1]);null===i?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(i).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(i).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class ej extends eU{constructor(e,t,i,r){const n=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:i,automaticDataCollectionEnabled:n};void 0!==e.apiKey?super(e,s,r):super(e.options,s,r),this._serverConfig={automaticDataCollectionEnabled:n,...t},this._serverConfig.authIdToken&&eF(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&eF(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,eG(eb,eE,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){eq(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw eV.create("server-app-deleted")}}let eB="12.6.0";function e$(e,t={}){let i=e;"object"!=typeof t&&(t={name:t});let r={name:e_,automaticDataCollectionEnabled:!0,...t},n=r.name;if("string"!=typeof n||!n)throw eV.create("bad-app-name",{appName:String(n)});if(i||(i=P()),!i)throw eV.create("no-options");let s=eI.get(n);if(s)if(z(i,s.options)&&z(r,s.config))return s;else throw eV.create("duplicate-app",{appName:n});let a=new ee(n);for(let e of eC.values())a.addComponent(e);let o=new eU(i,r,a);return eI.set(n,o),o}function ez(e,t={}){let i;if(("undefined"!=typeof window||F())&&!F())throw eV.create("invalid-server-app-environment");let r=t||{};if(e&&(eD(e)?i=e.options:eO(e)?r=e:i=e),void 0===r.automaticDataCollectionEnabled&&(r.automaticDataCollectionEnabled=!0),i||(i=P()),!i)throw eV.create("no-options");let n={...r,...i};if(void 0!==n.releaseOnDeref&&delete n.releaseOnDeref,void 0!==r.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw eV.create("finalization-registry-not-supported",{});let s=""+[...JSON.stringify(n)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),a=ex.get(s);if(a)return a.incRefCount(r.releaseOnDeref),a;let o=new ee(s);for(let e of eC.values())o.addComponent(e);let l=new ej(i,r,s,o);return ex.set(s,l),l}function eH(e=e_){let t=eI.get(e);if(!t&&e===e_&&P())return e$();if(!t)throw eV.create("no-app",{appName:e});return t}function eW(){return Array.from(eI.values())}async function eq(e){let t=!1,i=e.name;eI.has(i)?(t=!0,eI.delete(i)):ex.has(i)&&0>=e.decRefCount()&&(ex.delete(i),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function eG(e,t,i){let r=eS[e]??e;i&&(r+=`-${i}`);let n=r.match(/\s|\//),s=t.match(/\s|\//);if(n||s){let e=[`Unable to register library "${r}" with version "${t}":`];n&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),n&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eT.warn(e.join(" "));return}eP(new Q(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function eK(e,t){if(null!==e&&"function"!=typeof e)throw eV.create("invalid-log-argument");for(let i of et){let r=null;t&&t.level&&(r=ei[t.level]),null===e?i.userLogHandler=null:i.userLogHandler=(t,i,...n)=>{let s=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");i>=(r??t.logLevel)&&e({level:a[i].toLowerCase(),message:s,args:n,type:t.name})}}}function eX(e){et.forEach(t=>{t.setLogLevel(e)})}let eY="firebase-heartbeat-store",eQ=null;function eJ(){return eQ||(eQ=(function(e,t,{blocked:i,upgrade:r,blocking:n,terminated:s}={}){let a=indexedDB.open(e,1),o=ef(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ef(a.result),e.oldVersion,e.newVersion,ef(a.transaction),e)}),i&&a.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(eY)}catch(e){console.warn(e)}}}).catch(e=>{throw eV.create("idb-open",{originalErrorMessage:e.message})})),eQ}async function eZ(e){try{let t=(await eJ()).transaction(eY),i=await t.objectStore(eY).get(e1(e));return await t.done,i}catch(e){if(e instanceof j)eT.warn(e.message);else{let t=eV.create("idb-get",{originalErrorMessage:e?.message});eT.warn(t.message)}}}async function e0(e,t){try{let i=(await eJ()).transaction(eY,"readwrite"),r=i.objectStore(eY);await r.put(t,e1(e)),await i.done}catch(e){if(e instanceof j)eT.warn(e.message);else{let t=eV.create("idb-set",{originalErrorMessage:e?.message});eT.warn(t.message)}}}function e1(e){return`${e.name}!${e.options.appId}`}class e2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e5(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=e3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eT.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=e3(),{heartbeatsToSend:t,unsentEntries:i}=function(e,t=1024){let i=[],r=e.slice();for(let n of e){let e=i.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),e6(i)>t){e.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),e6(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=x(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return eT.warn(e),""}}}function e3(){return new Date().toISOString().substring(0,10)}class e5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let i=!0,r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{t(n.error?.message||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await eZ(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return e0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return e0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function e6(e){return x(JSON.stringify({version:2,heartbeats:e})).length}function e4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}eP(new Q("platform-logger",e=>new ew(e),"PRIVATE")),eP(new Q("heartbeat",e=>new e2(e),"PRIVATE")),eG(eb,eE,""),eG(eb,eE,"esm2020"),eG("fire-js",""),e.s(["SDK_VERSION",()=>eB,"_DEFAULT_ENTRY_NAME",()=>e_,"_addComponent",()=>eA,"_addOrOverwriteComponent",()=>ek,"_apps",()=>eI,"_clearComponents",()=>eL,"_components",()=>eC,"_getProvider",()=>eR,"_isFirebaseApp",()=>eD,"_isFirebaseServerApp",()=>eM,"_isFirebaseServerAppSettings",()=>eO,"_registerComponent",()=>eP,"_removeServiceInstance",()=>eN,"_serverApps",()=>ex,"deleteApp",()=>eq,"getApp",()=>eH,"getApps",()=>eW,"initializeApp",()=>e$,"initializeServerApp",()=>ez,"onLog",()=>eK,"registerVersion",()=>eG,"setLogLevel",()=>eX],32199),eG("firebase","12.7.0","app"),e.i(32199);let e8=new B("auth","Firebase",e4()),e7=new ea("@firebase/auth");function e9(e,...t){e7.logLevel<=a.ERROR&&e7.error(`Auth (${eB}): ${e}`,...t)}function te(e,...t){throw tn(e,...t)}function tt(e,...t){return tn(e,...t)}function ti(e,t,i){return new B("auth","Firebase",{...e4(),[t]:i}).create(t,{appName:e.name})}function tr(e){return ti(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tn(e,...t){if("string"!=typeof e){let i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(i,...r)}return e8.create(e,...t)}function ts(e,t,...i){if(!e)throw tn(t,...i)}function ta(e){let t="INTERNAL ASSERTION FAILED: "+e;throw e9(t),Error(t)}function to(){return"undefined"!=typeof self&&self.location?.href||""}function tl(){return"undefined"!=typeof self&&self.location?.protocol||null}class th{constructor(e,t){var i;this.shortDelay=e,this.longDelay=t,i="Short delay should be less than long delay!",t>e||ta(i),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){let e;return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===tl()||"https:"===tl()||"object"==typeof(e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==e.id||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tu(e,t){var i,r;i=e.emulator,r="Emulator should always be set here",i||ta(r);let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class tc{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let td={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tf=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tp=new th(3e4,6e4);function tm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function tg(e,t,i,r,n={}){return ty(e,n,async()=>{let n={},s={};r&&("GET"===t?s=r:n={body:JSON.stringify(r)});let a=W({key:e.config.apiKey,...s}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);let l={method:t,headers:o,...n};return("undefined"==typeof navigator||"Cloudflare-Workers"!==navigator.userAgent)&&(l.referrerPolicy="no-referrer"),e.emulatorConfig&&D(e.emulatorConfig.host)&&(l.credentials="include"),tc.fetch()(await tw(e,e.config.apiHost,i,a),l)})}async function ty(e,t,i){e._canInitEmulator=!1;let r={...td,...t};try{let t=new tb(e),n=await Promise.race([i(),t.promise]);t.clearNetworkTimeout();let s=await n.json();if("needConfirmation"in s)throw tE(e,"account-exists-with-different-credential",s);if(n.ok&&!("errorMessage"in s))return s;{let[t,i]=(n.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw tE(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw tE(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw tE(e,"user-disabled",s);let a=r[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw ti(e,a,i);te(e,a)}}catch(t){if(t instanceof j)throw t;te(e,"network-request-failed",{message:String(t)})}}async function tv(e,t,i,r,n={}){let s=await tg(e,t,i,r,n);return"mfaPendingCredential"in s&&te(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function tw(e,t,i,r){let n=`${t}${i}?${r}`,s=e.config.emulator?tu(e.config,n):`${e.config.apiScheme}://${n}`;return tf.includes(i)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(s).toString():s}class tb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(tt(this.auth,"network-request-failed")),tp.get())})}}function tE(e,t,i){let r={appName:e.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);let n=tt(e,t,r);return n.customData._tokenResponse=i,n}function tT(e){return void 0!==e&&void 0!==e.enterprise}class t_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tS(e,t){return tg(e,"GET","/v2/recaptchaConfig",tm(e,t))}async function tI(e,t){return tg(e,"POST","/v1/accounts:delete",t)}async function tx(e,t){return tg(e,"POST","/v1/accounts:lookup",t)}function tC(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function tA(e,t=!1){let i=Y(e),r=await i.getIdToken(t),n=tP(r);ts(n&&n.exp&&n.auth_time&&n.iat,i.auth,"internal-error");let s="object"==typeof n.firebase?n.firebase:void 0,a=s?.sign_in_provider;return{claims:n,token:r,authTime:tC(tk(n.auth_time)),issuedAtTime:tC(tk(n.iat)),expirationTime:tC(tk(n.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function tk(e){return 1e3*Number(e)}function tP(e){let[t,i,r]=e.split(".");if(void 0===t||void 0===i||void 0===r)return e9("JWT malformed, contained fewer than 3 sections"),null;try{let e=C(i);if(!e)return e9("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return e9("Caught error parsing JWT payload as JSON",e?.toString()),null}}function tR(e){let t=tP(e);return ts(t,"internal-error"),ts(void 0!==t.exp,"internal-error"),ts(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function tN(e,t,i=!1){if(i)return t;try{return await t}catch(t){throw t instanceof j&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class tD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(!e)return this.errorBackoff=3e4,Math.max(0,(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tO{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tC(this.lastLoginAt),this.creationTime=tC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tM(e){var t,i;let r=e.auth,n=await e.getIdToken(),s=await tN(e,tx(r,{idToken:n}));ts(s?.users.length,r,"internal-error");let a=s.users[0];e._notifyReloadListener(a);let o=a.providerUserInfo?.length?tV(a.providerUserInfo):[],l=(t=e.providerData,i=o,[...t.filter(e=>!i.some(t=>t.providerId===e.providerId)),...i]),h=e.isAnonymous,u=!(e.email&&a.passwordHash)&&!l?.length;Object.assign(e,{uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new tO(a.createdAt,a.lastLoginAt),isAnonymous:!!h&&u})}async function tL(e){let t=Y(e);await tM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tV(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function tU(e,t){let i=await ty(e,{},async()=>{let i=W({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:n}=e.config,s=await tw(e,r,"/v1/token",`key=${n}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let o={method:"POST",headers:a,body:i};return e.emulatorConfig&&D(e.emulatorConfig.host)&&(o.credentials="include"),tc.fetch()(s,o)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function tF(e,t){return tg(e,"POST","/v2/accounts:revokeToken",tm(e,t))}class tj{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ts(e.idToken,"internal-error"),ts(void 0!==e.idToken,"internal-error"),ts(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):tR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ts(0!==e.length,"internal-error");let t=tR(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(ts(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:n}=await tU(e,t);this.updateTokensAndExpiration(i,r,Number(n))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:n}=t,s=new tj;return i&&(ts("string"==typeof i,"internal-error",{appName:e}),s.refreshToken=i),r&&(ts("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),n&&(ts("number"==typeof n,"internal-error",{appName:e}),s.expirationTime=n),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tj,this.toJSON())}_performRefresh(){return ta("not implemented")}}function tB(e,t){ts("string"==typeof e||void 0===e,"internal-error",{appName:t})}class t${constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new tD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new tO(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await tN(this,this.stsTokenManager.getToken(this.auth,e));return ts(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tA(this,e)}reload(){return tL(this)}_assign(e){this!==e&&(ts(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new t$({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ts(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await tM(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eM(this.auth.app))return Promise.reject(tr(this.auth));let e=await this.getIdToken();return await tN(this,tI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,n=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:u,emailVerified:c,isAnonymous:d,providerData:f,stsTokenManager:p}=t;ts(u&&p,e,"internal-error");let m=tj.fromJSON(this.name,p);ts("string"==typeof u,e,"internal-error"),tB(i,e.name),tB(r,e.name),ts("boolean"==typeof c,e,"internal-error"),ts("boolean"==typeof d,e,"internal-error"),tB(n,e.name),tB(s,e.name),tB(a,e.name),tB(o,e.name),tB(l,e.name),tB(h,e.name);let g=new t$({uid:u,auth:e,email:r,emailVerified:c,displayName:i,isAnonymous:d,photoURL:s,phoneNumber:n,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:h});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t,i=!1){let r=new tj;r.updateFromServerResponse(t);let n=new t$({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await tM(n),n}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];ts(void 0!==r.localId,"internal-error");let n=void 0!==r.providerUserInfo?tV(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!n?.length,a=new tj;a.updateFromIdToken(i);let o=new t$({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s});return Object.assign(o,{uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:n,metadata:new tO(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!n?.length}),o}}let tz=new Map;function tH(e){var t,i;t="Expected a class definition",e instanceof Function||ta(t);let r=tz.get(e);return r?(i="Instance stored in cache mismatched with class",r instanceof e||ta(i)):(r=new e,tz.set(e,r)),r}class tW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function tq(e,t,i){return`firebase:${e}:${t}:${i}`}tW.type="NONE";class tG{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:n}=this.auth;this.fullUserKey=tq(this.userKey,r.apiKey,n),this.fullPersistenceKey=tq("persistence",r.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await tx(this.auth,{idToken:e}).catch(()=>void 0);return t?t$._fromGetAccountInfoResponse(this.auth,t,e):null}return t$._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new tG(tH(tW),e,i);let r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),n=r[0]||tH(tW),s=tq(i,e.config.apiKey,e.name),a=null;for(let i of t)try{let t=await i._get(s);if(t){let r;if("string"==typeof t){let i=await tx(e,{idToken:t}).catch(()=>void 0);if(!i)break;r=await t$._fromGetAccountInfoResponse(e,i,t)}else r=t$._fromJSON(e,t);i!==n&&(a=r),n=i;break}}catch{}let o=r.filter(e=>e._shouldAllowMigration);return n._shouldAllowMigration&&o.length&&(n=o[0],a&&await n._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==n)try{await e._remove(s)}catch{}}))),new tG(n,e,i)}}function tK(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(tJ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tX(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(t0(t))return"Blackberry";if(t1(t))return"Webos";if(tY(t))return"Safari";if((t.includes("chrome/")||tQ(t))&&!t.includes("edge/"))return"Chrome";if(tZ(t))return"Android";let i=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(i?.length===2)return i[1]}return"Other"}function tX(e=U()){return/firefox\//i.test(e)}function tY(e=U()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tQ(e=U()){return/crios\//i.test(e)}function tJ(e=U()){return/iemobile/i.test(e)}function tZ(e=U()){return/android/i.test(e)}function t0(e=U()){return/blackberry/i.test(e)}function t1(e=U()){return/webos/i.test(e)}function t2(e=U()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function t3(e=U()){return t2(e)||tZ(e)||t1(e)||t0(e)||/windows phone/i.test(e)||tJ(e)}function t5(e,t=[]){let i;switch(e){case"Browser":i=tK(U());break;case"Worker":i=`${tK(U())}-${e}`;break;default:i=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${eB}/${r}`}class t6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=t=>new Promise((i,r)=>{try{let r=e(t);i(r)}catch(e){r(e)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}async function t4(e,t={}){return tg(e,"GET","/v2/passwordPolicy",tm(e,t))}class t8{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let i;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}class t7{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t9(this),this.idTokenSubscription=new t9(this),this.beforeStateQueue=new t6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tH(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted){if(this.persistenceManager=await tG.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await tx(this,{idToken:e}),i=await t$._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(eM(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,n=i?._redirectEventId,s=await this.tryRedirectSignIn(e);(!t||t===n)&&s?.user&&(i=s.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(ts(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tM(e)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(eM(this.app))return Promise.reject(tr(this));let t=e?Y(e):null;return t&&ts(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ts(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return eM(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return eM(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tH(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new t8(await t4(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new B("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await tF(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&tH(e)||this._popupRedirectResolver;ts(t,this,"argument-error"),this.redirectPersistenceManager=await tG.create(this,[tH(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return(this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e)?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let n="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ts(a,this,"internal-error"),a.then(()=>{s||n(this.currentUser)}),"function"==typeof t){let n=e.addObserver(t,i,r);return()=>{s=!0,n()}}{let i=e.addObserver(t);return()=>{s=!0,i()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ts(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=t5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(eM(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&function(e,...t){e7.logLevel<=a.WARN&&e7.warn(`Auth (${eB}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}class t9{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){let i=new K(e,void 0);return i.subscribe.bind(i)}(e=>this.observer=e)}get next(){return ts(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ie={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function it(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ii{constructor(){this.enterprise=new ir}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ir{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}let is="NO_RECAPTCHA";class ia{constructor(e){this.type="recaptcha-enterprise",this.auth=Y(e)}async verify(e="verify",t=!1){async function i(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,i)=>{tS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0===r.recaptchaKey)i(Error("recaptcha Enterprise site key undefined"));else{let i=new t_(r);return null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,t(i.siteKey)}}).catch(e=>{i(e)})})}function r(t,i,r){let n=window.grecaptcha;tT(n)?n.enterprise.ready(()=>{n.enterprise.execute(t,{action:e}).then(e=>{i(e)}).catch(()=>{i(is)})}):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ii().execute("siteKey",{action:"verify"}):new Promise((e,n)=>{i(this.auth).then(i=>{if(!t&&tT(window.grecaptcha))r(i,e,n);else{var s;if("undefined"==typeof window)return void n(Error("RecaptchaVerifier is only supported in browser"));let t=ie.recaptchaEnterpriseScript;0!==t.length&&(t+=i),(s=t,ie.loadJS(s)).then(()=>{r(i,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function io(e,t,i,r=!1,n=!1){let s,a=new ia(e);if(n)s=is;else try{s=await a.verify(i)}catch(e){s=await a.verify(i,!0)}let o={...t};if("mfaSmsEnrollment"===i||"mfaSmsSignIn"===i){if("phoneEnrollmentInfo"in o){let e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){let e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function il(e,t,i,r,n){if("EMAIL_PASSWORD_PROVIDER"===n)if(!e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return r(e,t).catch(async n=>{if("auth/missing-recaptcha-token"!==n.code)return Promise.reject(n);{console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let n=await io(e,t,i,"getOobCode"===i);return r(e,n)}});else{let n=await io(e,t,i,"getOobCode"===i);return r(e,n)}if("PHONE_PROVIDER"!==n)return Promise.reject(n+" provider is not supported.");if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let n=await io(e,t,i);return r(e,n).catch(async n=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&("auth/missing-recaptcha-token"===n.code||"auth/invalid-app-credential"===n.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${i} flow.`);let n=await io(e,t,i,!1,!0);return r(e,n)}return Promise.reject(n)})}{let n=await io(e,t,i,!1,!0);return r(e,n)}}async function ih(e){let t=Y(e),i=new t_(await tS(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new ia(t).verify()}function iu(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ic(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class id{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ta("not implemented")}_getIdTokenResponse(e){return ta("not implemented")}_linkToIdToken(e,t){return ta("not implemented")}_getReauthenticationResolver(e){return ta("not implemented")}}async function ip(e,t){return tg(e,"POST","/v1/accounts:signUp",t)}async function im(e,t){return tv(e,"POST","/v1/accounts:signInWithPassword",tm(e,t))}async function ig(e,t){return tv(e,"POST","/v1/accounts:signInWithEmailLink",tm(e,t))}async function iy(e,t){return tv(e,"POST","/v1/accounts:signInWithEmailLink",tm(e,t))}class iv extends id{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new iv(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new iv(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return il(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",im,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ig(e,{email:this._email,oobCode:this._password});default:te(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return il(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ip,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iy(e,{idToken:t,email:this._email,oobCode:this._password});default:te(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function iw(e,t){return tv(e,"POST","/v1/accounts:signInWithIdp",tm(e,t))}class ib extends id{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new ib(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):te("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let{providerId:t,signInMethod:i,...r}="string"==typeof e?JSON.parse(e):e;if(!t||!i)return null;let n=new ib(t,i);return n.idToken=r.idToken||void 0,n.accessToken=r.accessToken||void 0,n.secret=r.secret,n.nonce=r.nonce,n.pendingToken=r.pendingToken||null,n}_getIdTokenResponse(e){return iw(e,this.buildRequest())}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,iw(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,iw(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=W(t)}return e}}async function iE(e,t){return tg(e,"POST","/v1/accounts:sendVerificationCode",tm(e,t))}async function iT(e,t){return tv(e,"POST","/v1/accounts:signInWithPhoneNumber",tm(e,t))}async function i_(e,t){let i=await tv(e,"POST","/v1/accounts:signInWithPhoneNumber",tm(e,t));if(i.temporaryProof)throw tE(e,"account-exists-with-different-credential",i);return i}let iS={USER_NOT_FOUND:"user-not-found"};async function iI(e,t){return tv(e,"POST","/v1/accounts:signInWithPhoneNumber",tm(e,{...t,operation:"REAUTH"}),iS)}class ix extends id{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ix({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ix({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return iT(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return i_(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return iI(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:n}=e;return i||t||r||n?new ix({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:n}):null}}class iC{constructor(e){const t=q(G(e)),i=t.apiKey??null,r=t.oobCode??null,n=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);ts(i&&r&&n,"argument-error"),this.apiKey=i,this.operation=n,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t,i,r,n=(i=(t=q(G(e)).link)?q(G(t)).deep_link_id:null,((r=q(G(e)).deep_link_id)?q(G(r)).link:null)||r||i||t||e);try{return new iC(n)}catch{return null}}}class iA{constructor(){this.providerId=iA.PROVIDER_ID}static credential(e,t){return iv._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let i=iC.parseLink(t);return ts(i,"argument-error"),iv._fromEmailAndCode(e,i.code,i.tenantId)}}iA.PROVIDER_ID="password",iA.EMAIL_PASSWORD_SIGN_IN_METHOD="password",iA.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ik{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class iP extends ik{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class iR extends iP{constructor(){super("facebook.com")}static credential(e){return ib._fromParams({providerId:iR.PROVIDER_ID,signInMethod:iR.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iR.credentialFromTaggedObject(e)}static credentialFromError(e){return iR.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iR.credential(e.oauthAccessToken)}catch{return null}}}iR.FACEBOOK_SIGN_IN_METHOD="facebook.com",iR.PROVIDER_ID="facebook.com";class iN extends iP{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ib._fromParams({providerId:iN.PROVIDER_ID,signInMethod:iN.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return iN.credentialFromTaggedObject(e)}static credentialFromError(e){return iN.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return iN.credential(t,i)}catch{return null}}}iN.GOOGLE_SIGN_IN_METHOD="google.com",iN.PROVIDER_ID="google.com";class iD extends iP{constructor(){super("github.com")}static credential(e){return ib._fromParams({providerId:iD.PROVIDER_ID,signInMethod:iD.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iD.credentialFromTaggedObject(e)}static credentialFromError(e){return iD.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iD.credential(e.oauthAccessToken)}catch{return null}}}iD.GITHUB_SIGN_IN_METHOD="github.com",iD.PROVIDER_ID="github.com";class iO extends iP{constructor(){super("twitter.com")}static credential(e,t){return ib._fromParams({providerId:iO.PROVIDER_ID,signInMethod:iO.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return iO.credentialFromTaggedObject(e)}static credentialFromError(e){return iO.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return iO.credential(t,i)}catch{return null}}}iO.TWITTER_SIGN_IN_METHOD="twitter.com",iO.PROVIDER_ID="twitter.com";class iM{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){return new iM({user:await t$._fromIdTokenResponse(e,i,r),providerId:iL(i),_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){return await e._updateTokensIfNecessary(i,!0),new iM({user:e,providerId:iL(i),_tokenResponse:i,operationType:t})}}function iL(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class iV extends j{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,iV.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new iV(e,t,i,r)}}function iU(e,t,i,r){return("reauthenticate"===t?i._getReauthenticationResolver(e):i._getIdTokenResponse(e)).catch(i=>{if("auth/multi-factor-auth-required"===i.code)throw iV._fromErrorAndOperation(e,i,t,r);throw i})}async function iF(e,t,i=!1){let r=await tN(e,t._linkToIdToken(e.auth,await e.getIdToken()),i);return iM._forOperation(e,"link",r)}async function ij(e,t,i=!1){let{auth:r}=e;if(eM(r.app))return Promise.reject(tr(r));let n="reauthenticate";try{let s=await tN(e,iU(r,n,t,e),i);ts(s.idToken,r,"internal-error");let a=tP(s.idToken);ts(a,r,"internal-error");let{sub:o}=a;return ts(e.uid===o,r,"user-mismatch"),iM._forOperation(e,n,s)}catch(e){throw e?.code==="auth/user-not-found"&&te(r,"user-mismatch"),e}}async function iB(e,t,i=!1){if(eM(e.app))return Promise.reject(tr(e));let r="signIn",n=await iU(e,r,t),s=await iM._fromIdTokenResponse(e,r,n);return i||await e._updateCurrentUser(s.user),s}class i${constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?iz._fromServerResponse(e,t):"totpInfo"in t?iH._fromServerResponse(e,t):te(e,"internal-error")}}class iz extends i${constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new iz(t)}}class iH extends i${constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new iH(t)}}function iW(e,t){return tg(e,"POST","/v2/accounts/mfaEnrollment:start",tm(e,t))}new WeakMap;let iq="__sak";class iG{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(iq,"1"),this.storage.removeItem(iq),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class iK extends iG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){let i;if(!e.key)return void this.forAllChangedKeys((e,t,i)=>{this.notifyListeners(e,i)});let r=e.key;t?this.detachListener():this.stopPolling();let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},s=this.storage.getItem(r);((i=U()).indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0)&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let e of Array.from(i))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iK.type="LOCAL";class iX extends iG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iX.type="SESSION";class iY{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let i=new iY(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:i,data:r}=e.data,n=this.handlersMap[i];if(!n?.size)return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:i});let s=Array.from(n).map(async t=>t(e.origin,r)),a=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function iQ(e="",t=10){let i="";for(let e=0;e<t;e++)i+=Math.floor(10*Math.random());return e+i}iY.receivers=[];class iJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r,n,s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((a,o)=>{let l=iQ("",20);s.port1.start();let h=setTimeout(()=>{o(Error("unsupported_event"))},i);n={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(e.data.response);break;default:clearTimeout(h),clearTimeout(r),o(Error("invalid_response"))}}},this.handlers.add(n),s.port1.addEventListener("message",n.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{n&&this.removeMessageHandler(n)})}}function iZ(){return window}function i0(){return void 0!==iZ().WorkerGlobalScope&&"function"==typeof iZ().importScripts}async function i1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let i2="firebaseLocalStorageDb",i3="firebaseLocalStorage",i5="fbase_key";class i6{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function i4(e,t){return e.transaction([i3],t?"readwrite":"readonly").objectStore(i3)}function i8(){let e=indexedDB.open(i2,1);return new Promise((t,i)=>{e.addEventListener("error",()=>{i(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(i3,{keyPath:i5})}catch(e){i(e)}}),e.addEventListener("success",async()=>{let i=e.result;i.objectStoreNames.contains(i3)?t(i):(i.close(),await new i6(indexedDB.deleteDatabase(i2)).toPromise(),t(await i8()))})})}async function i7(e,t,i){return new i6(i4(e,!0).put({[i5]:t,value:i})).toPromise()}async function i9(e,t){let i=i4(e,!1).get(t),r=await new i6(i).toPromise();return void 0===r?null:r.value}function re(e,t){return new i6(i4(e,!0).delete(t)).toPromise()}class rt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await i8()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iY._getInstance(i0()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i1(),!this.activeServiceWorker)return;this.sender=new iJ(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await i8();return await i7(e,iq,"1"),await re(e,iq),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>i7(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>i9(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>re(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new i6(i4(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],i=new Set;if(0!==e.length)for(let{fbase_key:r,value:n}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(n)&&(this.notifyListeners(r,n),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!i.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let e of Array.from(i))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function ri(e,t){return tg(e,"POST","/v2/accounts/mfaSignIn:start",tm(e,t))}rt.type="LOCAL",it("rcb"),new th(3e4,6e4);let rr="recaptcha";async function rn(e,t,i){if(!e._getRecaptchaConfig())try{await ih(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"==typeof t?{phoneNumber:t}:t,"session"in r){let t=r.session;if("phoneNumber"in r){ts("enroll"===t.type,e,"internal-error");let n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===is){ts(i?.type===rr,e,"argument-error");let r=await rs(e,t,i);return iW(e,r)}return iW(e,t)},a=il(e,n,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{ts("signin"===t.type,e,"internal-error");let n=r.multiFactorHint?.uid||r.multiFactorUid;ts(n,e,"missing-multi-factor-info");let s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===is){ts(i?.type===rr,e,"argument-error");let r=await rs(e,t,i);return ri(e,r)}return ri(e,t)},o=il(e,s,"mfaSmsSignIn",a,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=async(e,t)=>{if(t.captchaResponse===is){ts(i?.type===rr,e,"argument-error");let r=await rs(e,t,i);return iE(e,r)}return iE(e,t)},s=il(e,t,"sendVerificationCode",n,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{i?._reset()}}async function rs(e,t,i){ts(i.type===rr,e,"argument-error");let r=await i.verify();ts("string"==typeof r,e,"argument-error");let n={...t};if("phoneEnrollmentInfo"in n){let e=n.phoneEnrollmentInfo.phoneNumber,t=n.phoneEnrollmentInfo.captchaResponse,i=n.phoneEnrollmentInfo.clientType,s=n.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(n,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:i,recaptchaVersion:s}}),n}if(!("phoneSignInInfo"in n))return Object.assign(n,{recaptchaToken:r}),n;{let e=n.phoneSignInInfo.captchaResponse,t=n.phoneSignInInfo.clientType,i=n.phoneSignInInfo.recaptchaVersion;return Object.assign(n,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:i}}),n}}class ra{constructor(e){this.providerId=ra.PROVIDER_ID,this.auth=Y(e)}verifyPhoneNumber(e,t){return rn(this.auth,e,Y(t))}static credential(e,t){return ix._fromVerification(e,t)}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:i}=e;return t&&i?ix._fromTokenResponse(t,i):null}}function ro(e,t){return t?tH(t):(ts(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ra.PROVIDER_ID="phone",ra.PHONE_SIGN_IN_METHOD="phone";class rl extends id{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rh(e){return iB(e.auth,new rl(e),e.bypassAuthState)}function ru(e){let{auth:t,user:i}=e;return ts(i,t,"internal-error"),ij(i,new rl(e),e.bypassAuthState)}async function rc(e){let{auth:t,user:i}=e;return ts(i,t,"internal-error"),iF(i,new rl(e),e.bypassAuthState)}class rd{constructor(e,t,i,r,n=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:n,error:s,type:a}=e;if(s)return void this.reject(s);let o={auth:this.auth,requestUri:t,sessionId:i,tenantId:n||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rh;case"linkViaPopup":case"linkViaRedirect":return rc;case"reauthViaPopup":case"reauthViaRedirect":return ru;default:te(this.auth,"internal-error")}}resolve(e){var t,i;t=this.pendingPromise,i="Pending promise was never set",t||ta(i),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,i;t=this.pendingPromise,i="Pending promise was never set",t||ta(i),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let rf=new th(2e3,1e4);async function rp(e,t,i){if(eM(e.app))return Promise.reject(tt(e,"operation-not-supported-in-this-environment"));let r=Y(e);if(!(t instanceof ik))throw ik.name!==t.constructor.name&&te(e,"argument-error"),ti(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`);let n=ro(r,i);return new rm(r,"signInViaPopup",t,n).executeNotNull()}class rm extends rd{constructor(e,t,i,r,n){super(e,t,r,n),this.provider=i,this.authWindow=null,this.pollId=null,rm.currentPopupAction&&rm.currentPopupAction.cancel(),rm.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return ts(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||ta(t);let i=iQ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],i),this.authWindow.associatedEvent=i,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(tt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rm.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rf.get())};e()}}rm.currentPopupAction=null;let rg=new Map;class ry extends rd{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rg.get(this.auth._key());if(!e){try{let t=await rv(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}rg.set(this.auth._key(),e)}return this.bypassAuthState||rg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rv(e,t){var i;let r=tq("pendingRedirect",(i=t).config.apiKey,i.name),n=tH(e._redirectPersistence);if(!await n._isAvailable())return!1;let s=await n._get(r)==="true";return await n._remove(r),s}function rw(e,t){rg.set(e._key(),t)}async function rb(e,t,i=!1){if(eM(e.app))return Promise.reject(tr(e));let r=Y(e),n=ro(r,t),s=new ry(r,n,i),a=await s.execute();return a&&!i&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class rE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!r_(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(tt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rT(e))}saveEventToCache(e){this.cachedEventUids.add(rT(e)),this.lastProcessedEventTime=Date.now()}}function rT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function r_({type:e,error:t}){return"unknown"===e&&t?.code==="auth/no-auth-event"}async function rS(e,t={}){return tg(e,"GET","/v1/projects",t)}let rI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rx=/^https?/;async function rC(e){if(e.config.emulator)return;let{authorizedDomains:t}=await rS(e);for(let e of t)try{if(function(e){let t=to(),{protocol:i,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let n=new URL(e);return""===n.hostname&&""===r?"chrome-extension:"===i&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===i&&n.hostname===r}if(!rx.test(i))return!1;if(rI.test(e))return r===e;let n=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}(e))return}catch{}te(e,"unauthorized-domain")}let rA=new th(3e4,6e4);function rk(){let e=iZ().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let rP=null,rR=new th(5e3,15e3),rN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function rO(e){let t,i,r,n,s,a=await (rP=rP||new Promise((t,i)=>{function r(){rk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rk(),i(tt(e,"network-request-failed"))},timeout:rA.get()})}if(iZ().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(iZ().gapi?.load)r();else{var n;let t=it("iframefcb");return iZ()[t]=()=>{gapi.load?r():i(tt(e,"network-request-failed"))},(n=`${ie.gapiScript}?onload=${t}`,ie.loadJS(n)).catch(e=>i(e))}}).catch(e=>{throw rP=null,e})),o=iZ().gapi;return ts(o,e,"internal-error"),a.open({where:document.body,url:(ts((t=e.config).authDomain,e,"auth-domain-config-required"),i=t.emulator?tu(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:eB},(n=rD.get(e.config.apiHost))&&(r.eid=n),(s=e._getFrameworks()).length&&(r.fw=s.join(",")),`${i}?${W(r).slice(1)}`),messageHandlersFilter:o.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rN,dontclear:!0},t=>new Promise(async(i,r)=>{await t.restyle({setHideOnLeave:!1});let n=tt(e,"network-request-failed"),s=iZ().setTimeout(()=>{r(n)},rR.get());function a(){iZ().clearTimeout(s),i(t)}t.ping(a).then(a,()=>{r(n)})}))}let rM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let rV=encodeURIComponent("fac");async function rU(e,t,i,r,n,s){ts(e.config.authDomain,e,"auth-domain-config-required"),ts(e.config.apiKey,e,"invalid-api-key");let a={apiKey:e.config.apiKey,appName:e.name,authType:i,redirectUrl:r,v:eB,eventId:n};if(t instanceof ik)for(let[i,r]of(t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",!function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())&&(a.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))a[i]=r;if(t instanceof iP){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}for(let t of(e.tenantId&&(a.tid=e.tenantId),Object.keys(a)))void 0===a[t]&&delete a[t];let o=await e._getAppCheckToken(),l=o?`#${rV}=${encodeURIComponent(o)}`:"";return`${function({config:e}){return e.emulator?tu(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${W(a).slice(1)}${l}`}let rF="webStorageSupport",rj=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iX,this._completeRedirectFn=rb,this._overrideRedirectResult=rw}async _openPopup(e,t,i,r){var n,s;n=this.eventManagers[e._key()]?.manager,s="_initialize() not called before _openPopup()",n||ta(s);let a=await rU(e,t,i,to(),r);return function(e,t,i,r=500,n=600){let s=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),o="",l={...rM,width:r.toString(),height:n.toString(),top:s,left:a},h=U().toLowerCase();i&&(o=tQ(h)?"_blank":i),tX(h)&&(t=t||"http://localhost",l.scrollbars="yes");let u=Object.entries(l).reduce((e,[t,i])=>`${e}${t}=${i},`,"");if(function(e=U()){return t2(e)&&!!window.navigator?.standalone}(h)&&"_self"!==o){var c,d;let e,i;return c=t||"",d=o,(e=document.createElement("a")).href=c,e.target=d,(i=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i),new rL(null)}let f=window.open(t||"",o,u);ts(f,e,"popup-blocked");try{f.focus()}catch(e){}return new rL(f)}(e,a,iQ())}async _openRedirect(e,t,i,r){var n;return await this._originValidation(e),n=await rU(e,t,i,to(),r),iZ().location.href=n,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var i;let{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(i="If manager is not set, promise should be",r||ta(i),r)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await rO(e),i=new rE(e);return t.register("authEvent",t=>(ts(t?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rF,{type:rF},i=>{let r=i?.[0]?.[rF];void 0!==r&&t(!!r),te(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return t3()||tY()||t2()}};var rB="@firebase/auth",r$="1.12.0";class rz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ts(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let rH=R("authIdTokenMaxAge")||300,rW=null;ie={loadJS:e=>new Promise((t,i)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{let t=tt("internal-error");t.customData=e,i(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},s="Browser",eP(new Q("auth",(e,{options:t})=>{let i,r,n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=n.options;ts(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});let u=new t7(n,a,o,{apiKey:l,authDomain:h,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:t5(s)});return r=(Array.isArray(i=t?.persistence||[])?i:[i]).map(tH),t?.errorMap&&u._updateErrorMap(t.errorMap),u._initializeWithPersistence(r,t?.popupRedirectResolver),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),eP(new Q("auth-internal",e=>new rz(Y(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),eG(rB,r$,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(s)),eG(rB,r$,"esm2020"),e.s([],70145),e.i(70145),e.i(9738);var rq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,rG={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}var t=function(){this.blockSize=-1};function i(){}function r(e,t,i){i||(i=0);let r=Array(16);if("string"==typeof t)for(var n=0;n<16;++n)r[n]=t.charCodeAt(i++)|t.charCodeAt(i++)<<8|t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<24;else for(n=0;n<16;++n)r[n]=t[i++]|t[i++]<<8|t[i++]<<16|t[i++]<<24;t=e.g[0],i=e.g[1],n=e.g[2];let s=e.g[3],a;a=t+(s^i&(n^s))+r[0]+0xd76aa478|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[1]+0xe8c7b756|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[2]+0x242070db|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[3]+0xc1bdceee|0,a=t+(s^(i=n+(a<<22|a>>>10))&(n^s))+r[4]+0xf57c0faf|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[5]+0x4787c62a|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[6]+0xa8304613|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[7]+0xfd469501|0,a=t+(s^(i=n+(a<<22|a>>>10))&(n^s))+r[8]+0x698098d8|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[9]+0x8b44f7af|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[10]+0xffff5bb1|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[11]+0x895cd7be|0,a=t+(s^(i=n+(a<<22|a>>>10))&(n^s))+r[12]+0x6b901122|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[13]+0xfd987193|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[14]+0xa679438e|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[15]+0x49b40821|0,i=n+(a<<22|a>>>10),a=t+(n^s&(i^n))+r[1]+0xf61e2562|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[11]+0x265e5a51|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[0]+0xe9b6c7aa|0,i=n+(a<<20|a>>>12),a=t+(n^s&(i^n))+r[5]+0xd62f105d|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[15]+0xd8a1e681|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[4]+0xe7d3fbc8|0,i=n+(a<<20|a>>>12),a=t+(n^s&(i^n))+r[9]+0x21e1cde6|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[3]+0xf4d50d87|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[8]+0x455a14ed|0,i=n+(a<<20|a>>>12),a=t+(n^s&(i^n))+r[13]+0xa9e3e905|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[7]+0x676f02d9|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[12]+0x8d2a4c8a|0,a=t+((i=n+(a<<20|a>>>12))^n^s)+r[5]+0xfffa3942|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[8]+0x8771f681|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[11]+0x6d9d6122|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[14]+0xfde5380c|0,a=t+((i=n+(a<<23|a>>>9))^n^s)+r[1]+0xa4beea44|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[4]+0x4bdecfa9|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[7]+0xf6bb4b60|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[10]+0xbebfbc70|0,a=t+((i=n+(a<<23|a>>>9))^n^s)+r[13]+0x289b7ec6|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[0]+0xeaa127fa|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[3]+0xd4ef3085|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[6]+0x4881d05|0,a=t+((i=n+(a<<23|a>>>9))^n^s)+r[9]+0xd9d4d039|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[12]+0xe6db99e5|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[15]+0x1fa27cf8|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[2]+0xc4ac5665|0,i=n+(a<<23|a>>>9),a=t+(n^(i|~s))+r[0]+0xf4292244|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[14]+0xab9423a7|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[5]+0xfc93a039|0,i=n+(a<<21|a>>>11),a=t+(n^(i|~s))+r[12]+0x655b59c3|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[10]+0xffeff47d|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[1]+0x85845dd1|0,i=n+(a<<21|a>>>11),a=t+(n^(i|~s))+r[8]+0x6fa87e4f|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[6]+0xa3014314|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[13]+0x4e0811a1|0,i=n+(a<<21|a>>>11),a=t+(n^(i|~s))+r[4]+0xf7537e82|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[2]+0x2ad7d2bb|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(n+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+n|0,e.g[3]=e.g[3]+s|0}function n(e,t){this.h=t;let i=[],r=!0;for(let n=e.length-1;n>=0;n--){let s=0|e[n];r&&s==t||(i[n]=s,r=!1)}this.g=i}i.prototype=t.prototype,e.F=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.D=function(e,i,r){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[i].apply(e,n)},e.prototype.u=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.v=function(e,t){void 0===t&&(t=e.length);let i=t-this.blockSize,n=this.C,s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=i;)r(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(n[s++]=e.charCodeAt(a++),s==this.blockSize){r(this,n),s=0;break}}else for(;a<t;)if(n[s++]=e[a++],s==this.blockSize){r(this,n),s=0;break}}this.h=s,this.o+=t},e.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var i=e.length-8;i<e.length;++i)e[i]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,i=0;i<4;++i)for(let r=0;r<32;r+=8)e[t++]=this.g[i]>>>r&255;return e};var s,a={};function l(e){var t;return -128<=e&&e<128?(t=function(e){return new n([0|e],e<0?-1:0)},Object.prototype.hasOwnProperty.call(a,e)?a[e]:a[e]=t(e)):new n([0|e],e<0?-1:0)}function h(e){if(isNaN(e)||!isFinite(e))return u;if(e<0)return m(h(-e));let t=[],i=1;for(let r=0;e>=i;r++)t[r]=e/i|0,i*=0x100000000;return new n(t,0)}var u=l(0),c=l(1),d=l(0x1000000);function f(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return -1==e.h}function m(e){let t=e.g.length,i=[];for(let r=0;r<t;r++)i[r]=~e.g[r];return new n(i,~e.h).add(c)}function g(e,t){return e.add(m(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function w(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(u,u);if(p(e))return t=w(m(e),t),new v(m(t.g),m(t.h));if(p(t))return t=w(e,m(t)),new v(m(t.g),t.h);if(e.g.length>30){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var i=c,r=t;0>=r.l(e);)i=b(i),r=b(r);var n=E(i,1),s=E(r,1);for(r=E(r,2),i=E(i,2);!f(r);){var a=s.add(r);0>=a.l(e)&&(n=n.add(i),s=a),r=E(r,1),i=E(i,1)}return t=g(e,n.j(t)),new v(n,t)}for(n=u;e.l(t)>=0;){for(r=(r=Math.ceil(Math.log(i=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))<=48?1:Math.pow(2,r-48),a=(s=h(i)).j(t);p(a)||a.l(e)>0;)i-=r,a=(s=h(i)).j(t);f(s)&&(s=c),n=n.add(s),e=g(e,a)}return new v(n,e)}function b(e){let t=e.g.length+1,i=[];for(let r=0;r<t;r++)i[r]=e.i(r)<<1|e.i(r-1)>>>31;return new n(i,e.h)}function E(e,t){let i=t>>5;t%=32;let r=e.g.length-i,s=[];for(let n=0;n<r;n++)s[n]=t>0?e.i(n+i)>>>t|e.i(n+i+1)<<32-t:e.i(n+i);return new n(s,e.h)}(s=n.prototype).m=function(){if(p(this))return-m(this).m();let e=0,t=1;for(let i=0;i<this.g.length;i++){let r=this.i(i);e+=(r>=0?r:0x100000000+r)*t,t*=0x100000000}return e},s.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);let t=h(Math.pow(e,6));var i=this;let r="";for(;;){let n=w(i,t).g,s=(((i=g(i,n.j(t))).g.length>0?i.g[0]:i.h)>>>0).toString(e);if(f(i=n))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},s.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return p(e=g(this,e))?-1:+!f(e)},s.abs=function(){return p(this)?m(this):this},s.add=function(e){let t=Math.max(this.g.length,e.g.length),i=[],r=0;for(let n=0;n<=t;n++){let t=r+(65535&this.i(n))+(65535&e.i(n)),s=(t>>>16)+(this.i(n)>>>16)+(e.i(n)>>>16);r=s>>>16,t&=65535,s&=65535,i[n]=s<<16|t}return new n(i,-0x80000000&i[i.length-1]?-1:0)},s.j=function(e){if(f(this)||f(e))return u;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(d)&&0>e.l(d))return h(this.m()*e.m());let t=this.g.length+e.g.length,i=[];for(var r=0;r<2*t;r++)i[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let n=this.i(r)>>>16,s=65535&this.i(r),a=e.i(t)>>>16,o=65535&e.i(t);i[2*r+2*t]+=s*o,y(i,2*r+2*t),i[2*r+2*t+1]+=n*o,y(i,2*r+2*t+1),i[2*r+2*t+1]+=s*a,y(i,2*r+2*t+1),i[2*r+2*t+2]+=n*a,y(i,2*r+2*t+2)}for(e=0;e<t;e++)i[e]=i[2*e+1]<<16|i[2*e];for(e=t;e<2*t;e++)i[e]=0;return new n(i,0)},s.B=function(e){return w(this,e).h},s.and=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)&e.i(r);return new n(i,this.h&e.h)},s.or=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)|e.i(r);return new n(i,this.h|e.h)},s.xor=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)^e.i(r);return new n(i,this.h^e.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,rG.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.B,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=h,n.fromString=function e(t,i){if(0==t.length)throw Error("number format error: empty string");if((i=i||10)<2||36<i)throw Error("radix out of range: "+i);if("-"==t.charAt(0))return m(e(t.substring(1),i));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');let r=h(Math.pow(i,8)),n=u;for(let e=0;e<t.length;e+=8){var s=Math.min(8,t.length-e);let a=parseInt(t.substring(e,e+s),i);s<8?(s=h(Math.pow(i,s)),n=n.j(s).add(h(a))):n=(n=n.j(r)).add(h(a))}return n},o=rG.Integer=n}).apply(void 0!==rq?rq:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var rK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,rX={};(function(){var e,t,i=Object.defineProperty,r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof rK&&rK];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function n(e,t){if(t)e:{var n=r;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in n))break e;n=n[a]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}n("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),n("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),n("Object.entries",function(e){return e||function(e){var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push([t,e[t]]);return i}});var s=s||{},a=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e,t,i){return e.call.apply(e.bind,arguments)}function y(e,t,i){return(y=g).apply(null,arguments)}function v(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var t=i.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function i(){}i.prototype=t.prototype,e.Z=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.Ob=function(e,i,r){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[i].apply(e,n)}}var b="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function E(e){let t=e.length;if(t>0){let i=Array(t);for(let r=0;r<t;r++)i[r]=e[r];return i}return[]}function T(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var i=typeof r;if("array"==(i="object"!=i?i:r?Array.isArray(r)?"array":i:"null")||"object"==i&&"number"==typeof r.length){i=e.length||0;let t=r.length||0;e.length=i+t;for(let n=0;n<t;n++)e[i+n]=r[n]}else e.push(r)}}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,x=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){let i=_.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},A=()=>{let e=Promise.resolve(void 0);I=()=>{e.then(k)}};function k(){let e;for(var t;e=null,C.g&&(e=C.g,C.g=C.g.next,C.g||(C.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){a.setTimeout(()=>{throw e},0)}(e)}_.j(t),_.h<100&&(_.h++,t.next=_.g,_.g=t)}x=!1}function P(){this.u=this.u,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(e){}return e}();function D(e){return/^[\s\xa0]*$/.test(e)}function O(e,t){R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}w(O,R),O.prototype.init=function(e,t){let i=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==i?t=e.fromElement:"mouseout"==i&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),L=0;function V(e,t,i,r,n){this.listener=e,this.proxy=null,this.src=t,this.type=i,this.capture=!!r,this.ha=n,this.key=++L,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function F(e,t,i){for(let r in e)t.call(i,e[r],r,e)}function j(e){let t={};for(let i in e)t[i]=e[i];return t}let B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(e,t){let i,r;for(let t=1;t<arguments.length;t++){for(i in r=arguments[t])e[i]=r[i];for(let t=0;t<B.length;t++)i=B[t],Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}}function z(e){this.src=e,this.g={},this.h=0}function H(e,t){let i=t.type;if(i in e.g){var r,n=e.g[i],s=Array.prototype.indexOf.call(n,t,void 0);(r=s>=0)&&Array.prototype.splice.call(n,s,1),r&&(U(t),0==e.g[i].length&&(delete e.g[i],e.h--))}}function W(e,t,i,r){for(let n=0;n<e.length;++n){let s=e[n];if(!s.da&&s.listener==t&&!!i==s.capture&&s.ha==r)return n}return -1}z.prototype.add=function(e,t,i,r,n){let s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);let a=W(e,t,r,n);return a>-1?(t=e[a],i||(t.fa=!1)):((t=new V(t,this.src,s,!!r,n)).fa=i,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),G={};function K(e,t,i,r,n,s){if(!t)throw Error("Invalid event type");let a=o(n)?!!n.capture:!!n,l=J(e);if(l||(e[q]=l=new z(e)),(i=l.add(t,i,r,a,s)).proxy)return i;if(r=function e(t){return Q.call(e.src,e.listener,t)},i.proxy=r,r.src=e,r.listener=i,e.addEventListener)N||(n=a),void 0===n&&(n=!1),e.addEventListener(t.toString(),r,n);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return i}function X(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])H(t.i,e);else{var i=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(i,r,e.capture):t.detachEvent?t.detachEvent(Y(i),r):t.addListener&&t.removeListener&&t.removeListener(r),(i=J(t))?(H(i,e),0==i.h&&(i.src=null,t[q]=null)):U(e)}}}function Y(e){return e in G?G[e]:G[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new O(t,this);let i=e.listener,r=e.ha||e.src;e.fa&&X(e),e=i.call(r,t)}return e}function J(e){return(e=e[q])instanceof z?e:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(e){return"function"==typeof e?e:(e[Z]||(e[Z]=function(t){return e.handleEvent(t)}),e[Z])}function et(){P.call(this),this.i=new z(this),this.M=this,this.G=null}function ei(e,t){let i,r;var n,s=e.G;if(s)for(n=[];s;s=s.G)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var a=t;$(t=new R(s,e),a)}if(a=!0,n)for(r=n.length-1;r>=0;r--)a=er(i=t.g=n[r],s,!0,t)&&a;if(a=er(i=t.g=e,s,!0,t)&&a,a=er(i,s,!1,t)&&a,n)for(r=0;r<n.length;r++)a=er(i=t.g=n[r],s,!1,t)&&a}function er(e,t,i,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let n=!0;for(let s=0;s<t.length;++s){let a=t[s];if(a&&!a.da&&a.capture==i){let t=a.listener,i=a.ha||a.src;a.fa&&H(e.i,a),n=!1!==t.call(i,r)&&n}}return n&&!r.defaultPrevented}w(et,P),et.prototype[M]=!0,et.prototype.removeEventListener=function(e,t,i,r){!function e(t,i,r,n,s){if(Array.isArray(i))for(var a=0;a<i.length;a++)e(t,i[a],r,n,s);else(n=o(n)?!!n.capture:!!n,r=ee(r),t&&t[M])?(t=t.i,(a=String(i).toString())in t.g&&(r=W(i=t.g[a],r,n,s))>-1&&(U(i[r]),Array.prototype.splice.call(i,r,1),0==i.length&&(delete t.g[a],t.h--))):t&&(t=J(t))&&(i=t.g[i.toString()],t=-1,i&&(t=W(i,r,n,s)),(r=t>-1?i[t]:null)&&X(r))}(this,e,t,i,r)},et.prototype.N=function(){if(et.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let i=e.g[t];for(let e=0;e<i.length;e++)U(i[e]);delete e.g[t],e.h--}}this.G=null},et.prototype.J=function(e,t,i,r){return this.i.add(String(e),t,!1,i,r)},et.prototype.K=function(e,t,i,r){return this.i.add(String(e),t,!0,i,r)};class en extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=function(e,t){if("function"!=typeof e)if(e&&"function"==typeof e.handleEvent)e=y(e.handleEvent,e);else throw Error("Invalid listener argument");return Number(t)>0x7fffffff?-1:a.setTimeout(e,t||0)}(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let i=t.h;t.h=null,t.m.apply(null,i)}(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(e){P.call(this),this.h=e,this.g={}}w(es,P);var ea=[];function eo(e){F(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}es.prototype.N=function(){es.Z.N.call(this),eo(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=a.JSON.stringify,eh=a.JSON.parse,eu=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function ec(){}function ed(){}var ef={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ep(){R.call(this,"d")}function em(){R.call(this,"c")}w(ep,R),w(em,R);var eg={},ey=null;function ev(){return ey=ey||new et}function ew(e){R.call(this,eg.Ia,e)}function eb(e){let t=ev();ei(t,new ew(t))}function eE(e,t){R.call(this,eg.STAT_EVENT,e),this.stat=t}function eT(e){let t=ev();ei(t,new eE(t,e))}function e_(e,t){R.call(this,eg.Ja,e),this.size=t}function eS(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function eI(){this.g=!0}function ex(e,t,i,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{let s=JSON.parse(t);if(s){for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var i=s[e];if(!(i.length<2)){var r=i[1];if(Array.isArray(r)&&!(r.length<1)){var n=r[0];if("noop"!=n&&"stop"!=n&&"close"!=n)for(let e=1;e<r.length;e++)r[e]=""}}}}return el(s)}catch(e){return t}}(e,i)+(r?" "+r:"")})}eg.Ia="serverreachability",w(ew,R),eg.STAT_EVENT="statevent",w(eE,R),eg.Ja="timingevent",w(e_,R),eI.prototype.ua=function(){this.g=!1},eI.prototype.info=function(){};var eC={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eA={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function ek(){}function eP(e){return encodeURIComponent(String(e))}function eR(e,t,i,r){this.j=e,this.i=t,this.l=i,this.S=r||1,this.V=new es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eN}function eN(){this.i=null,this.g="",this.h=!1}w(ek,ec),ek.prototype.g=function(){return new XMLHttpRequest},e=new ek;var eD={},eO={};function eM(e,t,i){e.M=1,e.A=e6(e0(t)),e.u=i,e.R=!0,eL(e,null)}function eL(e,t){e.F=Date.now(),eU(e),e.B=e0(e.A);var i,r,n,s,a,l,h=e.B,u=e.S;Array.isArray(u)||(u=[String(u)]),th(h.i,"t",u),e.C=0,h=e.j.L,e.h=new eN,e.g=tX(e.j,h?t:null,!e.u),e.P>0&&(e.O=new en(y(e.Y,e,e.g),e.P)),t=e.V,h=e.g,u=e.ba;var c="readystatechange";Array.isArray(c)||(c&&(ea[0]=c.toString()),c=ea);for(let e=0;e<c.length;e++){let i=function e(t,i,r,n,s){if(n&&n.once)return function e(t,i,r,n,s){if(Array.isArray(i)){for(let a=0;a<i.length;a++)e(t,i[a],r,n,s);return null}return r=ee(r),t&&t[M]?t.K(i,r,o(n)?!!n.capture:!!n,s):K(t,i,r,!0,n,s)}(t,i,r,n,s);if(Array.isArray(i)){for(let a=0;a<i.length;a++)e(t,i[a],r,n,s);return null}return r=ee(r),t&&t[M]?t.J(i,r,o(n)?!!n.capture:!!n,s):K(t,i,r,!1,n,s)}(h,c[e],u||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.J?j(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),eb(),i=e.i,r=e.v,n=e.B,s=e.l,a=e.S,l=e.u,i.info(function(){if(i.g)if(l){var e="",t=l.split("&");for(let i=0;i<t.length;i++){var o=t[i].split("=");if(o.length>1){let t=o[0];o=o[1];let i=t.split("_");e=i.length>=2&&"type"==i[1]?e+(t+"=")+o+"&":e+(t+"=redacted&")}}}else e=null;else e=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+r+"\n"+n+"\n"+e})}function eV(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function eU(e){e.T=Date.now()+e.H,eF(e,e.H)}function eF(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=eS(y(e.aa,e),t)}function ej(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function eB(e){0==e.j.I||e.K||tH(e.j,e)}function e$(e){ej(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,eo(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function ez(e,t){try{var i=e.j;if(0!=i.I&&(i.g==e||eK(i.h,e))){if(!e.L&&eK(i.h,e)&&3==i.I){try{var r=i.Ba.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var n=r;if(0==n[0]){e:if(!i.v){if(i.g)if(i.g.F+3e3<e.F)tz(i),tD(i);else break e;tj(i),eT(18)}}else i.xa=n[1],0<i.xa-i.K&&n[2]<37500&&i.F&&0==i.A&&!i.C&&(i.C=eS(y(i.Va,i),6e3));1>=eG(i.h)&&i.ta&&(i.ta=void 0)}else tq(i,11)}else if((e.L||i.g==e)&&tz(i),!D(t))for(n=i.Ba.g.parse(t),t=0;t<n.length;t++){let o=n[t],l=o[0];if(!(l<=i.K))if(i.K=l,o=o[1],2==i.I)if("c"==o[0]){i.M=o[1],i.ba=o[2];let t=o[3];null!=t&&(i.ka=t,i.j.info("VER="+i.ka));let n=o[4];null!=n&&(i.za=n,i.j.info("SVER="+i.za));let l=o[5];null!=l&&"number"==typeof l&&l>0&&(i.O=r=1.5*l,i.j.info("backChannelRequestTimeoutMs_="+r)),r=i;let h=e.g;if(h){let e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(eX(s,s.h),s.h=null))}if(r.G){let e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,e5(r.J,r.G,e))}}if(i.I=3,i.l&&i.l.ra(),i.aa&&(i.T=Date.now()-e.F,i.j.info("Handshake RTT: "+i.T+"ms")),(r=i).na=tK(r,r.L?r.ba:null,r.W),e.L){eY(r.h,e);var a=r.O;a&&(e.H=a),e.D&&(ej(e),eU(e)),r.g=e}else tF(r);i.i.length>0&&tM(i)}else"stop"!=o[0]&&"close"!=o[0]||tq(i,7);else 3==i.I&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?tq(i,7):tN(i):"noop"!=o[0]&&i.l&&i.l.qa(o),i.A=0)}}eb(4)}catch(e){}}eR.prototype.ba=function(e){e=e.target;let t=this.O;t&&3==tA(e)?t.j():this.Y(e)},eR.prototype.Y=function(e){try{if(e==this.g)e:{let f=tA(this.g),p=this.g.ya(),m=this.g.ca();if(!(f<3)&&(3!=f||this.g&&(this.h.h||this.g.la()||tk(this.g)))){this.K||4!=f||7==p||(8==p||m<=0?eb(3):eb(2)),ej(this);var t=this.g.ca();this.X=t;var i=function(e){if(!eV(e))return e.g.la();let t=tk(e.g);if(""===t)return"";let i="",r=t.length,n=4==tA(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return e$(e),eB(e),"";e.h.i=new a.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,i+=e.h.i.decode(t[s],{stream:!(n&&s==r-1)});return t.length=0,e.h.g+=i,e.C=0,e.h.g}(this);if(this.o=200==t,r=this.i,n=this.v,s=this.B,o=this.l,l=this.S,r.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+n+"\n"+s+"\n"+f+" "+t}),this.o){if(this.U&&!this.L){t:{if(this.g){var r,n,s,o,l,h,u=this.g;if((h=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(h)){var c=h;break t}}c=null}if(e=c)ex(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ez(this,e);else{this.o=!1,this.m=3,eT(12),e$(this),eB(this);break e}}if(this.R){let t;for(e=!0;!this.K&&this.C<i.length;)if((t=function(e,t){var i=e.C,r=t.indexOf("\n",i);return -1==r?eO:isNaN(i=Number(t.substring(i,r)))?eD:(r+=1)+i>t.length?eO:(t=t.slice(r,r+i),e.C=r+i,t)}(this,i))==eO){4==f&&(this.m=4,eT(14),e=!1),ex(this.i,this.l,null,"[Incomplete Response]");break}else if(t==eD){this.m=4,eT(15),ex(this.i,this.l,i,"[Invalid Chunk]"),e=!1;break}else ex(this.i,this.l,t,null),ez(this,t);if(eV(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=i.length||this.h.h||(this.m=1,eT(16),e=!1),this.o=this.o&&e,e){if(i.length>0&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.aa&&!d.P&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),tB(d),d.P=!0,eT(11))}}else ex(this.i,this.l,i,"[Invalid Chunked Response]"),e$(this),eB(this)}else ex(this.i,this.l,i,null),ez(this,i);4==f&&e$(this),this.o&&!this.K&&(4==f?tH(this.j,this):(this.o=!1,eU(this)))}else(function(e){let t={};e=(e.g&&tA(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(D(e[r]))continue;var i=function(e){var t=1;e=e.split(":");let i=[];for(;t>0&&e.length;)i.push(e.shift()),t--;return e.length&&i.push(e.join(":")),i}(e[r]);let n=i[0];if("string"!=typeof(i=i[1]))continue;i=i.trim();let s=t[n]||[];t[n]=s,s.push(i)}var r=function(e){return e.join(", ")};for(let e in t)r.call(void 0,t[e],e,t)})(this.g),400==t&&i.indexOf("Unknown SID")>0?(this.m=3,eT(12)):(this.m=0,eT(13)),e$(this),eB(this)}}}catch(e){}finally{}},eR.prototype.cancel=function(){this.K=!0,e$(this)},eR.prototype.aa=function(){var e,t;this.D=null;let i=Date.now();i-this.T>=0?(e=this.i,t=this.B,e.info(function(){return"TIMEOUT: "+t}),2!=this.M&&(eb(),eT(17)),e$(this),this.m=2,eB(this)):eF(this,this.T-i)};var eH=class{constructor(e,t){this.g=e,this.map=t}};function eW(e){this.l=e||10,e=a.PerformanceNavigationTiming?(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eq(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eG(e){return e.h?1:e.g?e.g.size:0}function eK(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eX(e,t){e.g?e.g.add(t):e.h=t}function eY(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eQ(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let i of e.g.values())t=t.concat(i.G);return t}return E(e.i)}eW.prototype.cancel=function(){if(this.i=eQ(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var eJ=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eZ(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof eZ?(this.l=e.l,e1(this,e.j),this.o=e.o,this.g=e.g,e2(this,e.u),this.h=e.h,e3(this,tu(e.i)),this.m=e.m):e&&(t=String(e).match(eJ))?(this.l=!1,e1(this,t[1]||"",!0),this.o=e4(t[2]||""),this.g=e4(t[3]||"",!0),e2(this,t[4]),this.h=e4(t[5]||"",!0),e3(this,t[6]||"",!0),this.m=e4(t[7]||"")):(this.l=!1,this.i=new tn(null,this.l))}function e0(e){return new eZ(e)}function e1(e,t,i){e.j=i?e4(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function e2(e,t){if(t){if(isNaN(t=Number(t))||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function e3(e,t,i){var r,n;t instanceof tn?(e.i=t,r=e.i,(n=e.l)&&!r.j&&(ts(r),r.i=null,r.g.forEach(function(e,t){let i=t.toLowerCase();t!=i&&(ta(this,t),th(this,i,e))},r)),r.j=n):(i||(t=e8(t,ti)),e.i=new tn(t,e.l))}function e5(e,t,i){e.i.set(t,i)}function e6(e){return e5(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function e4(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function e8(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,e7),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function e7(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eZ.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(e8(t,e9,!0),":");var i=this.g;return(i||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(e8(t,e9,!0),"@"),e.push(eP(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.u)&&e.push(":",String(i))),(i=this.h)&&(this.g&&"/"!=i.charAt(0)&&e.push("/"),e.push(e8(i,"/"==i.charAt(0)?tt:te,!0))),(i=this.i.toString())&&e.push("?",i),(i=this.m)&&e.push("#",e8(i,tr)),e.join("")},eZ.prototype.resolve=function(e){let t=e0(this),i=!!e.j;i?e1(t,e.j):i=!!e.o,i?t.o=e.o:i=!!e.g,i?t.g=e.g:i=null!=e.u;var r=e.h;if(i)e2(t,e.u);else if(i=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var n=t.h.lastIndexOf("/");-1!=n&&(r=t.h.slice(0,n+1)+r)}if(".."==(n=r)||"."==n)r="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){r=0==n.lastIndexOf("/",0),n=n.split("/");let e=[];for(let t=0;t<n.length;){let i=n[t++];"."==i?r&&t==n.length&&e.push(""):".."==i?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==n.length&&e.push("")):(e.push(i),r=!0)}r=e.join("/")}else r=n}return i?t.h=r:i=""!==e.i.toString(),i?e3(t,tu(e.i)):i=!!e.m,i&&(t.m=e.m),t};var e9=/[#\/\?@]/g,te=/[#\?:]/g,tt=/[#\?]/g,ti=/[#\?@]/g,tr=/#/g;function tn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ts(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let i=0;i<e.length;i++){let r=e[i].indexOf("="),n,s=null;r>=0?(n=e[i].substring(0,r),s=e[i].substring(r+1)):n=e[i],t(n,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,i){e.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))}function ta(e,t){ts(e),t=tc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function to(e,t){return ts(e),t=tc(e,t),e.g.has(t)}function tl(e,t){ts(e);let i=[];if("string"==typeof t)to(e,t)&&(i=i.concat(e.g.get(tc(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)i=i.concat(e[t]);return i}function th(e,t,i){ta(e,t),i.length>0&&(e.i=null,e.g.set(tc(e,t),E(i)),e.h+=i.length)}function tu(e){let t=new tn;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function tc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function td(e,t,i,r,n){try{n&&(n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null),r(i)}catch(e){}}function tf(){this.g=new eu}function tp(e){this.i=e.Sb||null,this.h=e.ab||!1}function tm(e,t){et.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function tg(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function ty(e){e.readyState=4,e.l=null,e.j=null,e.B=null,tv(e)}function tv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tw(e){let t="";return F(e,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function tb(e,t,i){e:{for(r in i){var r=!1;break e}r=!0}r||(i=tw(i),"string"==typeof e?null!=i&&eP(i):e5(e,t,i))}function tE(e){et.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=tn.prototype).add=function(e,t){ts(this),this.i=null,e=tc(this,e);let i=this.g.get(e);return i||this.g.set(e,i=[]),i.push(t),this.h+=1,this},t.forEach=function(e,t){ts(this),this.g.forEach(function(i,r){i.forEach(function(i){e.call(t,i,r,this)},this)},this)},t.set=function(e,t){return ts(this),this.i=null,to(this,e=tc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=tl(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var i=t[r];let n=eP(i);i=tl(this,i);for(let t=0;t<i.length;t++){let r=n;""!==i[t]&&(r+="="+eP(i[t])),e.push(r)}}return this.i=e.join("&")},w(tp,ec),tp.prototype.g=function(){return new tm(this.i,this.h)},w(tm,et),(t=tm.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,tv(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,ty(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tv(this)),this.g&&(this.readyState=3,tv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tg(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ty(this):tv(this),3==this.readyState&&tg(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,ty(this))},t.Na=function(e){this.g&&(this.response=e,ty(this))},t.ga=function(){this.g&&ty(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var i=t.next();!i.done;)e.push((i=i.value)[0]+": "+i[1]),i=t.next();return e.join("\r\n")},Object.defineProperty(tm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),w(tE,et);var tT=/^https?$/i,t_=["POST","PUT"];function tS(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,tI(e),tC(e)}function tI(e){e.A||(e.A=!0,ei(e,"complete"),ei(e,"error"))}function tx(e){if(e.h&&void 0!==s){if(e.v&&4==tA(e))setTimeout(e.Ca.bind(e),0);else if(ei(e,"readystatechange"),4==tA(e)){e.h=!1;try{let s=e.ca();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,i,r=!0;break;default:r=!1}if(!(t=r)){if(i=0===s){let t=String(e.D).match(eJ)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),i=!tT.test(t?t.toLowerCase():"")}t=i}if(t)ei(e,"complete"),ei(e,"success");else{e.o=6;try{var n=tA(e)>2?e.g.statusText:""}catch(e){n=""}e.l=n+" ["+e.ca()+"]",tI(e)}}finally{tC(e)}}}}function tC(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);let i=e.g;e.g=null,t||ei(e,"ready");try{i.onreadystatechange=null}catch(e){}}}function tA(e){return e.g?e.g.readyState:0}function tk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tP(e,t,i){return i&&i.internalChannelParams&&i.internalChannelParams[e]||t}function tR(e){this.za=0,this.i=[],this.j=new eI,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tP("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tP("baseRetryDelayMs",5e3,e),this.Za=tP("retryDelaySeedMs",1e4,e),this.Ta=tP("forwardChannelMaxRetries",2,e),this.va=tP("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new eW(e&&e.concurrentRequestLimit),this.Ba=new tf,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function tN(e){if(tO(e),3==e.I){var t=e.V++,i=e0(e.J);if(e5(i,"SID",e.M),e5(i,"RID",t),e5(i,"TYPE","terminate"),tV(e,i),(t=new eR(e,e.j,t)).M=2,t.A=e6(e0(i)),i=!1,a.navigator&&a.navigator.sendBeacon)try{i=a.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!i&&a.Image&&((new Image).src=t.A,i=!0),i||(t.g=tX(t.j,null),t.g.ea(t.A)),t.F=Date.now(),eU(t)}tG(e)}function tD(e){e.g&&(tB(e),e.g.cancel(),e.g=null)}function tO(e){tD(e),e.v&&(a.clearTimeout(e.v),e.v=null),tz(e),e.h.cancel(),e.m&&("number"==typeof e.m&&a.clearTimeout(e.m),e.m=null)}function tM(e){if(!eq(e.h)&&!e.m){e.m=!0;var t=e.Ea;I||A(),x||(I(),x=!0),C.add(t,e),e.D=0}}function tL(e,t){var i;i=t?t.l:e.V++;let r=e0(e.J);e5(r,"SID",e.M),e5(r,"RID",i),e5(r,"AID",e.K),tV(e,r),e.u&&e.o&&tb(r,e.u,e.o),i=new eR(e,e.j,i,e.D+1),null===e.u&&(i.J=e.o),t&&(e.i=t.G.concat(e.i)),t=tU(e,i,1e3),i.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),eX(e.h,i),eM(i,r,t)}function tV(e,t){e.H&&F(e.H,function(e,i){e5(t,i,e)}),e.l&&F({},function(e,i){e5(t,i,e)})}function tU(e,t,i){i=Math.min(e.i.length,i);let r=e.l?y(e.l.Ka,e.l,e):null;e:{var n=e.i;let t=-1;for(;;){let e=["count="+i];-1==t?i>0?(t=n[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let h=0;h<i;h++){var s=n[h].g;let i=n[h].map;if((s-=t)<0)t=Math.max(0,n[h].g-100),l=!1;else try{s="req"+s+"_";try{var a=i instanceof Map?i:Object.entries(i);for(let[t,i]of a){let r=i;o(i)&&(r=el(i)),e.push(s+t+"="+encodeURIComponent(r))}}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}catch(e){r&&r(i)}}if(l){a=e.join("&");break e}}a=void 0}return t.G=e=e.i.splice(0,i),a}function tF(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;I||A(),x||(I(),x=!0),C.add(t,e),e.A=0}}function tj(e){return!e.g&&!e.v&&!(e.A>=3)&&(e.Y++,e.v=eS(y(e.Da,e),tW(e,e.A)),e.A++,!0)}function tB(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function t$(e){e.g=new eR(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=e0(e.na);e5(t,"RID","rpc"),e5(t,"SID",e.M),e5(t,"AID",e.K),e5(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&e5(t,"TO",e.ia),e5(t,"TYPE","xmlhttp"),tV(e,t),e.u&&e.o&&tb(t,e.u,e.o),e.O&&(e.g.H=e.O);var i=e.g;e=e.ba,i.M=1,i.A=e6(e0(t)),i.u=null,i.R=!0,eL(i,e)}function tz(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function tH(e,t){var i,r=null;if(e.g==t){tz(e),tB(e),e.g=null;var n=2}else{if(!eK(e.h,t))return;r=t.G,eY(e.h,t),n=1}if(0!=e.I){if(t.o)if(1==n){r=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;ei(n=ev(),new e_(n,r)),tM(e)}else tF(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==n&&(i=t,!(eG(e.h)>=e.h.j-!!e.m)&&(e.m?(e.i=i.G.concat(e.i),!0):1!=e.I&&2!=e.I&&!(e.D>=(e.Sa?0:e.Ta))&&(e.m=eS(y(e.Ea,e,i),tW(e,e.D)),e.D++,!0)))||2==n&&tj(e)))switch(r&&r.length>0&&((t=e.h).i=t.i.concat(r)),s){case 1:tq(e,5);break;case 4:tq(e,10);break;case 3:tq(e,6);break;default:tq(e,2)}}}function tW(e,t){let i=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(i*=2),i*t}function tq(e,t){if(e.j.info("Error code "+t),2==t){let t,s,o;var i,r=y(e.bb,e),n=e.Ua;let l=!n;n=new eZ(n||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e1(n,"https"),e6(n),l?function(e,t){let i=new eI;if(a.Image){let r=new Image;r.onload=v(td,i,"TestLoadImage: loaded",!0,t,r),r.onerror=v(td,i,"TestLoadImage: error",!1,t,r),r.onabort=v(td,i,"TestLoadImage: abort",!1,t,r),r.ontimeout=v(td,i,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r):(i=n.toString(),t=new eI,s=new AbortController,o=setTimeout(()=>{s.abort(),td(t,"TestPingServer: timeout",!1,r)},1e4),fetch(i,{signal:s.signal}).then(e=>{clearTimeout(o),e.ok?td(t,"TestPingServer: ok",!0,r):td(t,"TestPingServer: server error",!1,r)}).catch(()=>{clearTimeout(o),td(t,"TestPingServer: error",!1,r)}))}else eT(2);e.I=0,e.l&&e.l.pa(t),tG(e),tO(e)}function tG(e){if(e.I=0,e.ja=[],e.l){let t=eQ(e.h);(0!=t.length||0!=e.i.length)&&(T(e.ja,t),T(e.ja,e.i),e.h.i.length=0,E(e.i),e.i.length=0),e.l.oa()}}function tK(e,t,i){var r=i instanceof eZ?e0(i):new eZ(i);if(""!=r.g)t&&(r.g=t+"."+r.g),e2(r,r.u);else{var n=a.location;r=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;let e=new eZ(null);r&&e1(e,r),t&&(e.g=t),n&&e2(e,n),i&&(e.h=i),r=e}return i=e.G,t=e.wa,i&&t&&e5(r,i,t),e5(r,"VER",e.ka),tV(e,r),r}function tX(e,t,i){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tE(e.Aa&&!e.ma?new tp({ab:i}):e.ma)).Fa(e.L),t}function tY(){}function tQ(){}function tJ(e,t){et.call(this),this.g=new tR(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!D(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!D(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t1(this)}function tZ(e){ep.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let i in t){e=i;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t0(){em.call(this),this.status=1}function t1(e){this.g=e}(t=tE.prototype).Fa=function(e){this.H=e},t.ea=function(t,i,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);i=i?i.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():e.g(),this.g.onreadystatechange=b(y(this.Ca,this));try{this.B=!0,this.g.open(i,String(t),!0),this.B=!1}catch(e){tS(this,e);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)r.set(s,n[s]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())r.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n));for(let[e,o]of(n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&t instanceof a.FormData,!(Array.prototype.indexOf.call(t_,i,void 0)>=0)||n||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(e,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(e){tS(this,e)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ei(this,"complete"),ei(this,"abort"),tC(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tC(this,!0)),tE.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tx(this):this.Xa())},t.Xa=function(){tx(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return tA(this)>2?this.g.status:-1}catch(e){return -1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eh(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=tR.prototype).ka=8,t.I=1,t.connect=function(e,t,i,r){eT(0),this.W=e,this.H=t||{},i&&void 0!==r&&(this.H.OSID=i,this.H.OAID=r),this.F=this.X,this.J=tK(this,null,this.W),tM(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;let n=new eR(this,this.j,e),s=this.o;if(this.U&&(s?$(s=j(s),this.U):s=this.U),null!==this.u||this.R||(n.J=s,s=null),this.S)e:{for(var t=0,i=0;i<this.i.length;i++){t:{var r=this.i[i];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break t}r=void 0}if(void 0===r)break;if((t+=r)>4096){t=i;break e}if(4096===t||i===this.i.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=tU(this,n,t),e5(i=e0(this.J),"RID",e),e5(i,"CVER",22),this.G&&e5(i,"X-HTTP-Session-Id",this.G),tV(this,i),s&&(this.R?t="headers="+eP(tw(s))+"&"+t:this.u&&tb(i,this.u,s)),eX(this.h,n),this.Ra&&e5(i,"TYPE","init"),this.S?(e5(i,"$req",t),e5(i,"SID","null"),n.U=!0,eM(n,i,null)):eM(n,i,t),this.I=2}}else 3==this.I&&(e?tL(this,e):0==this.i.length||eq(this.h)||tL(this))},t.Da=function(){if(this.v=null,t$(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=eS(y(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,eT(10),tD(this),t$(this))},t.Va=function(){null!=this.C&&(this.C=null,tD(this),tj(this),eT(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),eT(2)):(this.j.info("Failed to ping google.com"),eT(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=tY.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},tQ.prototype.g=function(e,t){return new tJ(e,t)},w(tJ,et),tJ.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tJ.prototype.close=function(){tN(this.g)},tJ.prototype.o=function(e){var t=this.g;if("string"==typeof e){var i={};i.__data__=e,e=i}else this.v&&((i={}).__data__=el(e),e=i);t.i.push(new eH(t.Ya++,e)),3==t.I&&tM(t)},tJ.prototype.N=function(){this.g.l=null,delete this.j,tN(this.g),delete this.g,tJ.Z.N.call(this)},w(tZ,ep),w(t0,em),w(t1,tY),t1.prototype.ra=function(){ei(this.g,"a")},t1.prototype.qa=function(e){ei(this.g,new tZ(e))},t1.prototype.pa=function(e){ei(this.g,new t0)},t1.prototype.oa=function(){ei(this.g,"b")},tQ.prototype.createWebChannel=tQ.prototype.g,tJ.prototype.send=tJ.prototype.o,tJ.prototype.open=tJ.prototype.m,tJ.prototype.close=tJ.prototype.close,m=rX.createWebChannelTransport=function(){return new tQ},p=rX.getStatEventTarget=function(){return ev()},f=rX.Event=eg,d=rX.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eC.NO_ERROR=0,eC.TIMEOUT=8,eC.HTTP_ERROR=6,c=rX.ErrorCode=eC,eA.COMPLETE="complete",u=rX.EventType=eA,ed.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",et.prototype.listen=et.prototype.J,h=rX.WebChannel=ed,rX.FetchXmlHttpFactory=tp,tE.prototype.listenOnce=tE.prototype.K,tE.prototype.getLastError=tE.prototype.Ha,tE.prototype.getLastErrorCode=tE.prototype.ya,tE.prototype.getStatus=tE.prototype.ca,tE.prototype.getResponseJson=tE.prototype.La,tE.prototype.getResponseText=tE.prototype.la,tE.prototype.send=tE.prototype.ea,tE.prototype.setWithCredentials=tE.prototype.Fa,l=rX.XhrIo=tE}).apply(void 0!==rK?rK:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let rY="@firebase/firestore",rQ="4.9.3";class rJ{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rJ.UNAUTHENTICATED=new rJ(null),rJ.GOOGLE_CREDENTIALS=new rJ("google-credentials-uid"),rJ.FIRST_PARTY=new rJ("first-party-uid"),rJ.MOCK_USER=new rJ("mock-user");let rZ="12.7.0",r0=new ea("@firebase/firestore");function r1(){return r0.logLevel}function r2(e,...t){if(r0.logLevel<=a.DEBUG){let i=t.map(r6);r0.debug(`Firestore (${rZ}): ${e}`,...i)}}function r3(e,...t){if(r0.logLevel<=a.ERROR){let i=t.map(r6);r0.error(`Firestore (${rZ}): ${e}`,...i)}}function r5(e,...t){if(r0.logLevel<=a.WARN){let i=t.map(r6);r0.warn(`Firestore (${rZ}): ${e}`,...i)}}function r6(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function r4(e,t,i){let r="Unexpected state";"string"==typeof t?r=t:i=t,r8(e,r,i)}function r8(e,t,i){let r=`FIRESTORE (${rZ}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==i)try{r+=" CONTEXT: "+JSON.stringify(i)}catch(e){r+=" CONTEXT: "+i}throw r3(r),Error(r)}function r7(e,t,i,r){let n="Unexpected state";"string"==typeof i?n=i:r=i,e||r8(t,n,r)}let r9={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends j{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ni{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rJ.UNAUTHENTICATED))}shutdown(){}}class nn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ns{constructor(e){this.t=e,this.currentUser=rJ.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){r7(void 0===this.o,42304);let i=this.i,r=e=>this.i!==i?(i=this.i,t(e)):Promise.resolve(),n=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),n.resolve(),n=new nt,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let t=n;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{r2("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?a(e):(r2("FirebaseAuthCredentialsProvider","Auth not yet detected"),n.resolve(),n=new nt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(r2("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(r7("string"==typeof t.accessToken,31837,{l:t}),new ni(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return r7(null===e||"string"==typeof e,2055,{h:e}),new rJ(e)}}class na{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rJ.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class no{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new na(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rJ.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nh{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eM(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){r7(void 0===this.o,3512);let i=e=>{null!=e.error&&r2("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let i=e.token!==this.m;return this.m=e.token,r2("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>i(t))};let r=e=>{r2("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):r2("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(r7("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new nl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class nu{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let i=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(i);else for(let e=0;e<40;e++)i[e]=Math.floor(256*Math.random());return i}(0);for(let r=0;r<i.length;++r)t.length<20&&i[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[r]%62))}return t}}function nc(e,t){return e<t?-1:+(e>t)}function nd(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let i=e.charAt(r),n=t.charAt(r);if(i!==n)return nf(i)===nf(n)?nc(i,n):nf(i)?1:-1}return nc(e.length,t.length)}function nf(e){let t=e.charCodeAt(0);return t>=55296&&t<=57343}function np(e,t,i){return e.length===t.length&&e.every((e,r)=>i(e,t[r]))}let nm="__name__";class ng{constructor(e,t,i){void 0===t?t=0:t>e.length&&r4(637,{offset:t,range:e.length}),void 0===i?i=e.length-t:i>e.length-t&&r4(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===ng.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof ng?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let i=ng.compareSegments(e.get(r),t.get(r));if(0!==i)return i}return nc(e.length,t.length)}static compareSegments(e,t){let i=ng.isNumericId(e),r=ng.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?ng.extractNumericId(e).compare(ng.extractNumericId(t)):nd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return o.fromString(e.substring(4,e.length-2))}}class ny extends ng{construct(e,t,i){return new ny(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new ne(r9.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(e=>e.length>0))}return new ny(t)}static emptyPath(){return new ny([])}}let nv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nw extends ng{construct(e,t,i){return new nw(e,t,i)}static isValidIdentifier(e){return nv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nw.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===nm}static keyField(){return new nw([nm])}static fromServerFormat(e){let t=[],i="",r=0,n=()=>{if(0===i.length)throw new ne(r9.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let t=e[r];if("\\"===t){if(r+1===e.length)throw new ne(r9.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ne(r9.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=t,r+=2}else"`"===t?s=!s:"."!==t||s?i+=t:n(),r++}if(n(),s)throw new ne(r9.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nw(t)}static emptyPath(){return new nw([])}}class nb{constructor(e){this.path=e}static fromPath(e){return new nb(ny.fromString(e))}static fromName(e){return new nb(ny.fromString(e).popFirst(5))}static empty(){return new nb(ny.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ny.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ny.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nb(new ny(e.slice()))}}function nE(e,t,i){if(!i)throw new ne(r9.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function nT(e){if(!nb.isDocumentKey(e))throw new ne(r9.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function n_(e){if(nb.isDocumentKey(e))throw new ne(r9.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function nS(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function nI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let i=(t=e).constructor?t.constructor.name:null;return i?`a custom ${i} object`:"an object"}}return"function"==typeof e?"a function":r4(12329,{type:typeof e})}function nx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ne(r9.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let i=nI(e);throw new ne(r9.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}function nC(e,t){let i={typeString:e};return t&&(i.value=t),i}function nA(e,t){let i;if(!nS(e))throw new ne(r9.INVALID_ARGUMENT,"JSON must be an object");for(let r in t)if(t[r]){let n=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){i=`JSON missing required field: '${r}'`;break}let a=e[r];if(n&&typeof a!==n){i=`JSON field '${r}' must be a ${n}.`;break}if(void 0!==s&&a!==s.value){i=`Expected '${r}' field to equal '${s.value}'`;break}}if(i)throw new ne(r9.INVALID_ARGUMENT,i);return!0}class nk{static now(){return nk.fromMillis(Date.now())}static fromDate(e){return nk.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*1e6);return new nk(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new ne(r9.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new ne(r9.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nc(this.nanoseconds,e.nanoseconds):nc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nk._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nA(e,nk._jsonSchema))return new nk(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nk._jsonSchemaVersion="firestore/timestamp/1.0",nk._jsonSchema={type:nC("string",nk._jsonSchemaVersion),seconds:nC("number"),nanoseconds:nC("number")};class nP{static fromTimestamp(e){return new nP(e)}static min(){return new nP(new nk(0,0))}static max(){return new nP(new nk(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nR{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new nR(nP.min(),nb.empty(),-1)}static max(){return new nR(nP.max(),nb.empty(),-1)}}class nN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function nD(e){if(e.code!==r9.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;r2("LocalStore","Unexpectedly lost primary lease")}class nO{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&r4(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nO((i,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(i,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof nO?t:nO.resolve(t)}catch(e){return nO.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nO.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nO.reject(t)}static resolve(e){return new nO((t,i)=>{t(e)})}static reject(e){return new nO((t,i)=>{i(e)})}static waitFor(e){return new nO((t,i)=>{let r=0,n=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++n,s&&n===r&&t()},e=>i(e))}),s=!0,n===r&&t()})}static or(e){let t=nO.resolve(!1);for(let i of e)t=t.next(e=>e?nO.resolve(e):i());return t}static forEach(e,t){let i=[];return e.forEach((e,r)=>{i.push(t.call(this,e,r))}),this.waitFor(i)}static mapArray(e,t){return new nO((i,r)=>{let n=e.length,s=Array(n),a=0;for(let o=0;o<n;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===n&&i(s)},e=>r(e))}})}static doWhile(e,t){return new nO((i,r)=>{let n=()=>{!0===e()?t().next(()=>{n()},r):i()};n()})}}function nM(e){return"IndexedDbTransactionError"===e.name}class nL{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}}nL.ce=-1;function nV(e){return 0===e&&1/e==-1/0}function nU(e){let t=0;for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function nF(e,t){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function nj(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nB{constructor(e,t){this.comparator=e,this.root=t||nz.EMPTY}insert(e,t){return new nB(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nz.BLACK,null,null))}remove(e){return new nB(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nz.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n$(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n$(this.root,e,this.comparator,!1)}getReverseIterator(){return new n$(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n$(this.root,e,this.comparator,!0)}}class n${constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let n=1;for(;!e.isEmpty();)if(n=t?i(e.key,t):1,t&&r&&(n*=-1),n<0)e=this.isReverse?e.left:e.right;else{if(0===n){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nz{constructor(e,t,i,r,n){this.key=e,this.value=t,this.color=null!=i?i:nz.RED,this.left=null!=r?r:nz.EMPTY,this.right=null!=n?n:nz.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,n){return new nz(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=n?n:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,n=i(e,r.key);return(r=n<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===n?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i))).fixUp()}removeMin(){if(this.left.isEmpty())return nz.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let i,r=this;if(0>t(e,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return nz.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nz.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nz.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw r4(43730,{key:this.key,value:this.value});if(this.right.isRed())throw r4(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw r4(27949);return e+ +!this.isRed()}}nz.EMPTY=null,nz.RED=!0,nz.BLACK=!1,nz.EMPTY=new class{constructor(){this.size=0}get key(){throw r4(57766)}get value(){throw r4(16141)}get color(){throw r4(16727)}get left(){throw r4(29726)}get right(){throw r4(36894)}copy(e,t,i,r,n){return this}insert(e,t,i){return new nz(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nH{constructor(e){this.comparator=e,this.data=new nB(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nW(this.data.getIterator())}getIteratorFrom(e){return new nW(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nH)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new nH(this.comparator);return t.data=e,t}}class nW{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nq{constructor(e){this.fields=e,e.sort(nw.comparator)}static empty(){return new nq([])}unionWith(e){let t=new nH(nw.comparator);for(let e of this.fields)t=t.add(e);for(let i of e)t=t.add(i);return new nq(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return np(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class nG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nK{constructor(e){this.binaryString=e}static fromBase64String(e){return new nK(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new nG("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new nK(function(e){let t="";for(let i=0;i<e.length;++i)t+=String.fromCharCode(e[i]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nK.EMPTY_BYTE_STRING=new nK("");let nX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nY(e){if(r7(!!e,39018),"string"==typeof e){let t=0,i=nX.exec(e);if(r7(!!i,46558,{timestamp:e}),i[1]){let e=i[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:nQ(e.seconds),nanos:nQ(e.nanos)}}function nQ(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nJ(e){return"string"==typeof e?nK.fromBase64String(e):nK.fromUint8Array(e)}let nZ="server_timestamp",n0="__type__",n1="__previous_value__",n2="__local_write_time__";function n3(e){return(e?.mapValue?.fields||{})[n0]?.stringValue===nZ}function n5(e){let t=e.mapValue.fields[n1];return n3(t)?n5(t):t}function n6(e){let t=nY(e.mapValue.fields[n2].timestampValue);return new nk(t.seconds,t.nanos)}class n4{constructor(e,t,i,r,n,s,a,o,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=n,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=h}}let n8="(default)";class n7{constructor(e,t){this.projectId=e,this.database=t||n8}static empty(){return new n7("","")}get isDefaultDatabase(){return this.database===n8}isEqual(e){return e instanceof n7&&e.projectId===this.projectId&&e.database===this.database}}let n9="__type__",se="__max__",st={},si="__vector__",sr="value";function sn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?n3(e)?4:sg(e)?0x1fffffffffffff:sp(e)?10:11:r4(28295,{value:e})}function ss(e,t){if(e===t)return!0;let i=sn(e);if(i!==sn(t))return!1;switch(i){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return n6(e).isEqual(n6(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=nY(e.timestampValue),n=nY(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos;case 5:return e.stringValue===t.stringValue;case 6:return nJ(e.bytesValue).isEqual(nJ(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return nQ(e.geoPointValue.latitude)===nQ(t.geoPointValue.latitude)&&nQ(e.geoPointValue.longitude)===nQ(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return nQ(e.integerValue)===nQ(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let i=nQ(e.doubleValue),r=nQ(t.doubleValue);return i===r?nV(i)===nV(r):isNaN(i)&&isNaN(r)}return!1;case 9:return np(e.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:case 11:let s=e.mapValue.fields||{},a=t.mapValue.fields||{};if(nU(s)!==nU(a))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===a[e]||!ss(s[e],a[e])))return!1;return!0;default:return r4(52216,{left:e})}}function sa(e,t){return void 0!==(e.values||[]).find(e=>ss(e,t))}function so(e,t){var i,r,n,s,a,o;if(e===t)return 0;let l=sn(e),h=sn(t);if(l!==h)return nc(l,h);switch(l){case 0:case 0x1fffffffffffff:return 0;case 1:return nc(e.booleanValue,t.booleanValue);case 2:let u,c;return u=nQ(e.integerValue||e.doubleValue),u<(c=nQ(t.integerValue||t.doubleValue))?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1;case 3:return sl(e.timestampValue,t.timestampValue);case 4:return sl(n6(e),n6(t));case 5:return nd(e.stringValue,t.stringValue);case 6:let d,f;return i=e.bytesValue,r=t.bytesValue,d=nJ(i),f=nJ(r),d.compareTo(f);case 7:return function(e,t){let i=e.split("/"),r=t.split("/");for(let e=0;e<i.length&&e<r.length;e++){let t=nc(i[e],r[e]);if(0!==t)return t}return nc(i.length,r.length)}(e.referenceValue,t.referenceValue);case 8:let p;return n=e.geoPointValue,s=t.geoPointValue,0!==(p=nc(nQ(n.latitude),nQ(s.latitude)))?p:nc(nQ(n.longitude),nQ(s.longitude));case 9:return sh(e.arrayValue,t.arrayValue);case 10:let m,g,y,v,w;return a=e.mapValue,o=t.mapValue,m=a.fields||{},g=o.fields||{},y=m[sr]?.arrayValue,v=g[sr]?.arrayValue,0!==(w=nc(y?.values?.length||0,v?.values?.length||0))?w:sh(y,v);case 11:return function(e,t){if(e===st&&t===st)return 0;if(e===st)return 1;if(t===st)return -1;let i=e.fields||{},r=Object.keys(i),n=t.fields||{},s=Object.keys(n);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){let t=nd(r[e],s[e]);if(0!==t)return t;let a=so(i[r[e]],n[s[e]]);if(0!==a)return a}return nc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw r4(23264,{he:l})}}function sl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nc(e,t);let i=nY(e),r=nY(t),n=nc(i.seconds,r.seconds);return 0!==n?n:nc(i.nanos,r.nanos)}function sh(e,t){let i=e.values||[],r=t.values||[];for(let e=0;e<i.length&&e<r.length;++e){let t=so(i[e],r[e]);if(t)return t}return nc(i.length,r.length)}function su(e){var t,i;let r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=nY(e.timestampValue),`time(${r.seconds},${r.nanos})`):"stringValue"in e?e.stringValue:"bytesValue"in e?nJ(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,nb.fromName(t).toString()):"geoPointValue"in e?(i=e.geoPointValue,`geo(${i.latitude},${i.longitude})`):"arrayValue"in e?function(e){let t="[",i=!0;for(let r of e.values||[])i?i=!1:t+=",",t+=su(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),i="{",r=!0;for(let n of t)r?r=!1:i+=",",i+=`${n}:${su(e.fields[n])}`;return i+"}"}(e.mapValue):r4(61005,{value:e})}function sc(e){return!!e&&"integerValue"in e}function sd(e){return!!e&&"arrayValue"in e}function sf(e){return!!e&&"mapValue"in e}function sp(e){return(e?.mapValue?.fields||{})[n9]?.stringValue===si}function sm(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return nF(e.mapValue.fields,(e,i)=>t.mapValue.fields[e]=sm(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=sm(e.arrayValue.values[i]);return t}return{...e}}function sg(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===se}class sy{constructor(e){this.value=e}static empty(){return new sy({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(!sf(t=(t.mapValue.fields||{})[e.get(i)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sm(t)}setAll(e){let t=nw.emptyPath(),i={},r=[];e.forEach((e,n)=>{if(!t.isImmediateParentOf(n)){let e=this.getFieldsMap(t);this.applyChanges(e,i,r),i={},r=[],t=n.popLast()}e?i[n.lastSegment()]=sm(e):r.push(n.lastSegment())});let n=this.getFieldsMap(t);this.applyChanges(n,i,r)}delete(e){let t=this.field(e.popLast());sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];sf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){for(let r of(nF(t,(t,i)=>e[t]=i),i))delete e[r]}clone(){return new sy(sm(this.value))}}class sv{constructor(e,t,i,r,n,s,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=n,this.data=s,this.documentState=a}static newInvalidDocument(e){return new sv(e,0,nP.min(),nP.min(),nP.min(),sy.empty(),0)}static newFoundDocument(e,t,i,r){return new sv(e,1,t,nP.min(),i,r,0)}static newNoDocument(e,t){return new sv(e,2,t,nP.min(),nP.min(),sy.empty(),0)}static newUnknownDocument(e,t){return new sv(e,3,t,nP.min(),nP.min(),sy.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(nP.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sy.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sy.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nP.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sw{constructor(e,t){this.position=e,this.inclusive=t}}function sb(e,t,i){let r=0;for(let n=0;n<e.position.length;n++){let s=t[n],a=e.position[n];if(r=s.field.isKeyField()?nb.comparator(nb.fromName(a.referenceValue),i.key):so(a,i.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function sE(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!ss(e.position[i],t.position[i]))return!1;return!0}class sT{constructor(e,t="asc"){this.field=e,this.dir=t}}class s_{}class sS extends s_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new sA(e,t,i):"array-contains"===t?new sN(e,i):"in"===t?new sD(e,i):"not-in"===t?new sO(e,i):"array-contains-any"===t?new sM(e,i):new sS(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new sk(e,i):new sP(e,i)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(so(t,this.value)):null!==t&&sn(this.value)===sn(t)&&this.matchesComparison(so(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return r4(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sI extends s_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sI(e,t)}matches(e){return sx(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sx(e){return"and"===e.op}function sC(e){for(let t of e.filters)if(t instanceof sI)return!1;return!0}class sA extends sS{constructor(e,t,i){super(e,t,i),this.key=nb.fromName(i.referenceValue)}matches(e){let t=nb.comparator(e.key,this.key);return this.matchesComparison(t)}}class sk extends sS{constructor(e,t){super(e,"in",t),this.keys=sR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sP extends sS{constructor(e,t){super(e,"not-in",t),this.keys=sR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sR(e,t){return(t.arrayValue?.values||[]).map(e=>nb.fromName(e.referenceValue))}class sN extends sS{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sd(t)&&sa(t.arrayValue,this.value)}}class sD extends sS{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&sa(this.value.arrayValue,t)}}class sO extends sS{constructor(e,t){super(e,"not-in",t)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!sa(this.value.arrayValue,t)}}class sM extends sS{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>sa(this.value.arrayValue,e))}}class sL{constructor(e,t=null,i=[],r=[],n=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=n,this.startAt=s,this.endAt=a,this.Te=null}}function sV(e,t=null,i=[],r=[],n=null,s=null,a=null){return new sL(e,t,i,r,n,s,a)}function sU(e){if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof sS)return t.field.canonicalString()+t.op.toString()+su(t.value);if(sC(t)&&sx(t))return t.filters.map(t=>e(t)).join(",");{let i=t.filters.map(t=>e(t)).join(",");return`${t.op}(${i})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>su(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>su(e)).join(",")),e.Te=t}return e.Te}function sF(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++){var i,r;if(i=e.orderBy[n],r=t.orderBy[n],!(i.dir===r.dir&&i.field.isEqual(r.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!function e(t,i){return t instanceof sS?i instanceof sS&&t.op===i.op&&t.field.isEqual(i.field)&&ss(t.value,i.value):t instanceof sI?i instanceof sI&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((t,r,n)=>t&&e(r,i.filters[n]),!0):void r4(19439)}(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sE(e.startAt,t.startAt)&&sE(e.endAt,t.endAt)}class sj{constructor(e,t=null,i=[],r=[],n=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=n,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sB(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function s$(e){if(null===e.Ie){let t;e.Ie=[];let i=new Set;for(let t of e.explicitOrderBy)e.Ie.push(t),i.add(t.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new nH(nw.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{i.has(t.canonicalString())||t.isKeyField()||e.Ie.push(new sT(t,r))}),i.has(nw.keyField().canonicalString())||e.Ie.push(new sT(nw.keyField(),r))}return e.Ie}function sz(e){return e.Ee||(e.Ee=function(e,t){if("F"===e.limitType)return sV(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new sT(e.field,t)});let i=e.endAt?new sw(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sw(e.startAt.position,e.startAt.inclusive):null;return sV(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}(e,s$(e))),e.Ee}function sH(e,t,i){return new sj(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function sW(e,t){return sF(sz(e),sz(t))&&e.limitType===t.limitType}function sq(e){return`${sU(sz(e))}|lt:${e.limitType}`}function sG(e){var t;let i;return`Query(target=${i=(t=sz(e)).path.canonicalString(),null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof sS?`${t.field.canonicalString()} ${t.op} ${su(t.value)}`:t instanceof sI?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(e=>su(e)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(e=>su(e)).join(",")),`Target(${i})`}; limitType=${e.limitType})`}function sK(e,t){var i,r,n,s;let a,o,l;return t.isFoundDocument()&&(a=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(a):nb.isDocumentKey(e.path)?e.path.isEqual(a):e.path.isImmediateParentOf(a))&&function(e,t){for(let i of s$(e))if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1;return!0}(e,t)&&function(e,t){for(let i of e.filters)if(!i.matches(t))return!1;return!0}(e,t)&&(i=e,r=t,(!i.startAt||(n=i.startAt,o=sb(n,s$(i),r),n.inclusive?!!(o<=0):!!(o<0)))&&(!i.endAt||(s=i.endAt,l=sb(s,s$(i),r),s.inclusive?!!(l>=0):!!(l>0))))}class sX{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i){for(let[t,r]of i)if(this.equalsFn(t,e))return r}}has(e){return void 0!==this.get(e)}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nF(this.inner,(t,i)=>{for(let[t,r]of i)e(t,r)})}isEmpty(){return nj(this.inner)}size(){return this.innerSize}}let sY=new nB(nb.comparator),sQ=new nB(nb.comparator);function sJ(...e){let t=sQ;for(let i of e)t=t.insert(i.key,i);return t}function sZ(e){let t=sQ;return e.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function s0(){return new sX(e=>e.toString(),(e,t)=>e.isEqual(t))}let s1=new nB(nb.comparator),s2=new nH(nb.comparator);function s3(...e){let t=s2;for(let i of e)t=t.add(i);return t}let s5=new nH(nc);function s6(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nV(t)?"-0":t}}function s4(e){return{integerValue:""+e}}class s8{constructor(){this._=void 0}}function s7(e,t){return e instanceof an?sc(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class s9 extends s8{}class ae extends s8{constructor(e){super(),this.elements=e}}function at(e,t){let i=aa(t);for(let t of e.elements)i.some(e=>ss(e,t))||i.push(t);return{arrayValue:{values:i}}}class ai extends s8{constructor(e){super(),this.elements=e}}function ar(e,t){let i=aa(t);for(let t of e.elements)i=i.filter(e=>!ss(e,t));return{arrayValue:{values:i}}}class an extends s8{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function as(e){return nQ(e.integerValue||e.doubleValue)}function aa(e){return sd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ao{constructor(e,t){this.field=e,this.transform=t}}class al{constructor(e,t){this.version=e,this.transformResults=t}}class ah{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ah}static exists(e){return new ah(void 0,e)}static updateTime(e){return new ah(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ac{}function ad(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ab(e.key,ah.none()):new am(e.key,e.data,ah.none());{let i=e.data,r=sy.empty(),n=new nH(nw.comparator);for(let e of t.fields)if(!n.has(e)){let t=i.field(e);null===t&&e.length>1&&(e=e.popLast(),t=i.field(e)),null===t?r.delete(e):r.set(e,t),n=n.add(e)}return new ag(e.key,r,new nq(n.toArray()),ah.none())}}function af(e,t,i,r){return e instanceof am?function(e,t,i,r){if(!au(e.precondition,t))return i;let n=e.value.clone(),s=aw(e.fieldTransforms,r,t);return n.setAll(s),t.convertToFoundDocument(t.version,n).setHasLocalMutations(),null}(e,t,i,r):e instanceof ag?function(e,t,i,r){if(!au(e.precondition,t))return i;let n=aw(e.fieldTransforms,r,t),s=t.data;return(s.setAll(ay(e)),s.setAll(n),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===i)?null:i.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,i,r):au(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):i}function ap(e,t){var i,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(i=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===i&&void 0===r||!(!i||!r)&&np(i,r,(e,t)=>{var i,r;return e.field.isEqual(t.field)&&(i=e.transform,r=t.transform,i instanceof ae&&r instanceof ae||i instanceof ai&&r instanceof ai?np(i.elements,r.elements,ss):i instanceof an&&r instanceof an?ss(i.Ae,r.Ae):i instanceof s9&&r instanceof s9)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class am extends ac{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ag extends ac{constructor(e,t,i,r,n=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=n,this.type=1}getFieldMask(){return this.fieldMask}}function ay(e){let t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){let r=e.data.field(i);t.set(i,r)}}),t}function av(e,t,i){let r=new Map;r7(e.length===i.length,32656,{Re:i.length,Ve:e.length});for(let s=0;s<i.length;s++){var n;let a=e[s],o=a.transform,l=t.data.field(a.field);r.set(a.field,(n=i[s],o instanceof ae?at(o,l):o instanceof ai?ar(o,l):n))}return r}function aw(e,t,i){let r=new Map;for(let n of e){let e=n.transform,s=i.data.field(n.field);r.set(n.field,function(e,t,i){var r;let n,s,a;return e instanceof s9?(r=t,n={fields:{[n0]:{stringValue:nZ},[n2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}},r&&n3(r)&&(r=n5(r)),r&&(n.fields[n1]=r),{mapValue:n}):e instanceof ae?at(e,t):e instanceof ai?ar(e,t):(a=as(s=s7(e,t))+as(e.Ae),sc(s)&&sc(e.Ae)?s4(a):s6(e.serializer,a))}(e,s,t))}return r}class ab extends ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aE extends ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aT{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&function(e,t,i){let r,n;e instanceof am?(r=e.value.clone(),n=av(e.fieldTransforms,t,i.transformResults),r.setAll(n),t.convertToFoundDocument(i.version,r).setHasCommittedMutations()):e instanceof ag?function(e,t,i){if(!au(e.precondition,t))return t.convertToUnknownDocument(i.version);let r=av(e.fieldTransforms,t,i.transformResults),n=t.data;n.setAll(ay(e)),n.setAll(r),t.convertToFoundDocument(i.version,n).setHasCommittedMutations()}(e,t,i):t.convertToNoDocument(i.version).setHasCommittedMutations()}(r,e,i[t])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=af(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=af(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=s0();return this.mutations.forEach(r=>{let n=e.get(r.key),s=n.overlayedDocument,a=this.applyToLocalView(s,n.mutatedFields),o=ad(s,a=t.has(r.key)?null:a);null!==o&&i.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(nP.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),s3())}isEqual(e){return this.batchId===e.batchId&&np(this.mutations,e.mutations,(e,t)=>ap(e,t))&&np(this.baseMutations,e.baseMutations,(e,t)=>ap(e,t))}}class a_{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){r7(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=s1,n=e.mutations;for(let e=0;e<n.length;e++)r=r.insert(n[e].key,i[e].version);return new a_(e,t,i,r)}}class aS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}(y=g||(g={}))[y.OK=0]="OK",y[y.CANCELLED=1]="CANCELLED",y[y.UNKNOWN=2]="UNKNOWN",y[y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",y[y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",y[y.NOT_FOUND=5]="NOT_FOUND",y[y.ALREADY_EXISTS=6]="ALREADY_EXISTS",y[y.PERMISSION_DENIED=7]="PERMISSION_DENIED",y[y.UNAUTHENTICATED=16]="UNAUTHENTICATED",y[y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",y[y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",y[y.ABORTED=10]="ABORTED",y[y.OUT_OF_RANGE=11]="OUT_OF_RANGE",y[y.UNIMPLEMENTED=12]="UNIMPLEMENTED",y[y.INTERNAL=13]="INTERNAL",y[y.UNAVAILABLE=14]="UNAVAILABLE",y[y.DATA_LOSS=15]="DATA_LOSS",new o([0xffffffff,0xffffffff],0);class aI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ax(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aC(e){let t;return r7(!!e,49232),nP.fromTimestamp(new nk((t=nY(e)).seconds,t.nanos))}function aA(e,t){return ak(e,t).canonicalString()}function ak(e,t){let i=new ny(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?i:i.child(t)}function aP(e,t){return aA(e.databaseId,t.path)}function aR(e,t,i){return{name:aP(e,t),fields:i.value.mapValue.fields}}function aN(e){return nw.fromServerFormat(e.fieldPath)}class aD{constructor(e){this.yt=e}}class aO{Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(+!!e.booleanValue);else if("integerValue"in e)this.Ft(t,15),t.Mt(nQ(e.integerValue));else if("doubleValue"in e){let i=nQ(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),nV(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),"string"==typeof i&&(i=nY(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(nJ(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?sg(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):sp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):r4(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};for(let e of(this.Ft(t,55),Object.keys(i)))this.Ot(e,t),this.Ct(i[e],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let r=i[sr].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(nQ(r)),this.Ot(sr,t),this.Ct(i[sr],t)}Qt(e,t){let i=e.values||[];for(let e of(this.Ft(t,50),i))this.Ct(e,t)}Lt(e,t){this.Ft(t,37),nb.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}aO.Kt=new aO;class aM{constructor(){this.Cn=new aL}addToCollectionParentIndex(e,t){return this.Cn.add(t),nO.resolve()}getCollectionParents(e,t){return nO.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return nO.resolve()}deleteFieldIndex(e,t){return nO.resolve()}deleteAllFieldIndexes(e){return nO.resolve()}createTargetIndexes(e,t){return nO.resolve()}getDocumentsMatchingTarget(e,t){return nO.resolve(null)}getIndexType(e,t){return nO.resolve(0)}getFieldIndexes(e,t){return nO.resolve([])}getNextCollectionGroupToUpdate(e){return nO.resolve(null)}getMinOffset(e,t){return nO.resolve(nR.min())}getMinOffsetFromCollectionGroup(e,t){return nO.resolve(nR.min())}updateCollectionGroup(e,t,i){return nO.resolve()}updateIndexEntries(e,t){return nO.resolve()}}class aL{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new nH(ny.comparator),n=!r.has(i);return this.index[t]=r.add(i),n}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new nH(ny.comparator)).toArray()}}new Uint8Array(0);let aV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class aU{static withCacheSize(e){return new aU(e,aU.DEFAULT_COLLECTION_PERCENTILE,aU.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}aU.DEFAULT_COLLECTION_PERCENTILE=10,aU.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,aU.DEFAULT=new aU(0x2800000,aU.DEFAULT_COLLECTION_PERCENTILE,aU.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),aU.DISABLED=new aU(-1,0,0);class aF{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new aF(0)}static cr(){return new aF(-1)}}let aj="LruGarbageCollector";function aB([e,t],[i,r]){let n=nc(e,i);return 0===n?nc(t,r):n}class a${constructor(e){this.Ir=e,this.buffer=new nH(aB),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>aB(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class az{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){r2(aj,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){nM(e)?r2(aj,"Ignoring IndexedDB error during garbage collection: ",e):await nD(e)}await this.Vr(3e5)})}}class aH{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return nO.resolve(nL.ce);let i=new a$(t);return this.mr.forEachTarget(e,e=>i.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>i.Ar(e))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(r2("LruGarbageCollector","Garbage collection skipped; disabled"),nO.resolve(aV)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(r2("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aV):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,n,s,o,l,h,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(r2("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(i=r,o=Date.now(),this.removeTargets(e,i,t))).next(t=>(n=t,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(e=>(h=Date.now(),r1()<=a.DEBUG&&r2("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(o-s)+"ms\n"+`	Removed ${n} targets in `+(l-o)+"ms\n"+`	Removed ${e} documents in `+(h-l)+"ms\n"+`Total Duration: ${h-u}ms`),nO.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:n,documentsRemoved:e})))}}class aW{constructor(){this.changes=new sX(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return void 0!==i?nO.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class aG{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==i&&af(i.mutation,e,nq.empty(),nk.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,s3()).next(()=>t))}getLocalViewOfDocuments(e,t,i=s3()){let r=s0();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(e=>{let t=sJ();return e.forEach((e,i)=>{t=t.insert(e,i.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let i=s0();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,s3()))}populateOverlays(e,t,i){let r=[];return i.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,i)=>{t.set(e,i)})})}computeViews(e,t,i,r){let n=sY,s=s0(),a=s0();return t.forEach((e,t)=>{let a=i.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ag)?n=n.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),af(a.mutation,t,a.mutation.getFieldMask(),nk.now())):s.set(t.key,nq.empty())}),this.recalculateAndSaveOverlays(e,n).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>a.set(e,new aq(t,s.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){let i=s0(),r=new nB((e,t)=>e-t),n=s3();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let n of e)n.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=i.get(e)||nq.empty();a=n.applyToLocalView(s,a),i.set(e,a);let o=(r.get(n.batchId)||s3()).add(e);r=r.insert(n.batchId,o)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let r=a.getNext(),o=r.key,l=r.value,h=s0();l.forEach(e=>{if(!n.has(e)){let r=ad(t.get(e),i.get(e));null!==r&&h.set(e,r),n=n.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,h))}return nO.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,i,r){return nb.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):null!==t.collectionGroup?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(n=>{let s=r-n.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-n.size):nO.resolve(s0()),a=-1,o=n;return s.next(t=>nO.forEach(t,(t,i)=>(a<i.largestBatchId&&(a=i.largestBatchId),n.get(t)?nO.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,n)).next(()=>this.computeViews(e,o,t,s3())).next(e=>({batchId:a,changes:sZ(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nb(t)).next(e=>{let t=sJ();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let n=t.collectionGroup,s=sJ();return this.indexManager.getCollectionParents(e,n).next(a=>nO.forEach(a,a=>{let o=new sj(a.child(n),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,o,i,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(n=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,n,r))).next(e=>{n.forEach((t,i)=>{let r=i.getKey();null===e.get(r)&&(e=e.insert(r,sv.newInvalidDocument(r)))});let i=sJ();return e.forEach((e,r)=>{let s=n.get(e);void 0!==s&&af(s.mutation,r,nq.empty(),nk.now()),sK(t,r)&&(i=i.insert(e,r))}),i})}}class aK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return nO.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:t.id,version:t.version,createTime:aC(t.createTime)}),nO.resolve()}getNamedQuery(e,t){return nO.resolve(this.kr.get(t))}saveNamedQuery(e,t){var i;let r;return this.kr.set(t.name,{name:t.name,query:(r=function(e){var t,i,r,n,s,a,o;let l,h,u,c,d,f,p=(t=e.parent,r7((a=l=ny.fromString(t)).length>=4&&"projects"===a.get(0)&&"databases"===a.get(2),10190,{key:l.toString()}),4===(h=l).length?ny.emptyPath():(r7((o=h).length>4&&"documents"===o.get(4),29091,{key:o.toString()}),o.popFirst(5))),m=e.structuredQuery,g=m.from?m.from.length:0,y=null;if(g>0){r7(1===g,65062);let e=m.from[0];e.allDescendants?y=e.collectionId:p=p.child(e.collectionId)}let v=[];m.where&&(v=(u=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=aN(e.unaryFilter.field);return sS.create(t,"==",{doubleValue:NaN});case"IS_NULL":let i=aN(e.unaryFilter.field);return sS.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=aN(e.unaryFilter.field);return sS.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=aN(e.unaryFilter.field);return sS.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return r4(61313);default:return r4(60726)}}(t):void 0!==t.fieldFilter?sS.create(aN(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return r4(58110);default:return r4(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?sI.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return r4(1026)}}(t.compositeFilter.op)):r4(30097,{filter:t})}(m.where))instanceof sI&&sC(i=u)&&sx(i)?u.getFilters():[u]);let w=[];m.orderBy&&(w=m.orderBy.map(e=>new sT(aN(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let b=null;m.limit&&(b=null==(c="object"==typeof(r=m.limit)?r.value:r)?null:c);let E=null;m.startAt&&(d=!!(n=m.startAt).before,E=new sw(n.values||[],d));let T=null;return m.endAt&&(f=!(s=m.endAt).before,T=new sw(s.values||[],f)),new sj(p,y,w,v,b,"F",E,T)}({parent:(i=t.bundledQuery).parent,structuredQuery:i.structuredQuery}),"LAST"===i.limitType?sH(r,r.limit,"L"):r),readTime:aC(t.readTime)}),nO.resolve()}}class aX{constructor(){this.overlays=new nB(nb.comparator),this.qr=new Map}getOverlay(e,t){return nO.resolve(this.overlays.get(t))}getOverlays(e,t){let i=s0();return nO.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&i.set(t,e)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((i,r)=>{this.St(e,t,r)}),nO.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.qr.get(i);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(i)),nO.resolve()}getOverlaysForCollection(e,t,i){let r=s0(),n=t.length+1,s=new nb(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===n&&e.largestBatchId>i&&r.set(e.getKey(),e)}return nO.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let n=new nB((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>i){let t=n.get(e.largestBatchId);null===t&&(t=s0(),n=n.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=s0(),o=n.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return nO.resolve(a)}St(e,t,i){let r=this.overlays.get(i.key);if(null!==r){let e=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(i.key,new aS(t,i));let n=this.qr.get(t);void 0===n&&(n=s3(),this.qr.set(t,n)),this.qr.set(t,n.add(i.key))}}class aY{constructor(){this.sessionToken=nK.EMPTY_BYTE_STRING}getSessionToken(e){return nO.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nO.resolve()}}class aQ{constructor(){this.Qr=new nH(aJ.$r),this.Ur=new nH(aJ.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let i=new aJ(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new aJ(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){let t=new nb(new ny([])),i=new aJ(t,e),r=new aJ(t,e+1),n=[];return this.Ur.forEachInRange([i,r],e=>{this.Gr(e),n.push(e.key)}),n}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new nb(new ny([])),i=new aJ(t,e),r=new aJ(t,e+1),n=s3();return this.Ur.forEachInRange([i,r],e=>{n=n.add(e.key)}),n}containsKey(e){let t=new aJ(e,0),i=this.Qr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class aJ{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return nb.comparator(e.key,t.key)||nc(e.Yr,t.Yr)}static Kr(e,t){return nc(e.Yr,t.Yr)||nb.comparator(e.key,t.key)}}class aZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new nH(aJ.$r)}checkEmpty(e){return nO.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){let n=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new aT(n,t,i,r);for(let t of(this.mutationQueue.push(s),r))this.Zr=this.Zr.add(new aJ(t.key,n)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return nO.resolve(s)}lookupMutationBatch(e,t){return nO.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let i=this.ei(t+1),r=i<0?0:i;return nO.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return nO.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return nO.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new aJ(t,0),r=new aJ(t,1/0),n=[];return this.Zr.forEachInRange([i,r],e=>{let t=this.Xr(e.Yr);n.push(t)}),nO.resolve(n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nH(nc);return t.forEach(e=>{let t=new aJ(e,0),r=new aJ(e,1/0);this.Zr.forEachInRange([t,r],e=>{i=i.add(e.Yr)})}),nO.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,n=i;nb.isDocumentKey(n)||(n=n.child(""));let s=new aJ(new nb(n),0),a=new nH(nc);return this.Zr.forEachWhile(e=>{let t=e.key.path;return!!i.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),nO.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(e=>{let i=this.Xr(e);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){r7(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let i=this.Zr;return nO.forEach(t.mutations,r=>{let n=new aJ(r.key,t.batchId);return i=i.delete(n),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){let i=new aJ(t,0),r=this.Zr.firstAfterOrEqual(i);return nO.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,nO.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class a0{constructor(e){this.ri=e,this.docs=new nB(nb.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),n=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-n,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return nO.resolve(i?i.document.mutableCopy():sv.newInvalidDocument(t))}getEntries(e,t){let i=sY;return t.forEach(e=>{let t=this.docs.get(e);i=i.insert(e,t?t.document.mutableCopy():sv.newInvalidDocument(e))}),nO.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let n=sY,s=t.path,a=new nb(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let i=e.readTime.compareTo(t.readTime);return 0!==i||0!==(i=nb.comparator(e.documentKey,t.documentKey))?i:nc(e.largestBatchId,t.largestBatchId)}(new nR(a.readTime,a.key,-1),i)||(r.has(a.key)||sK(t,a))&&(n=n.insert(a.key,a.mutableCopy()))}return nO.resolve(n)}getAllFromCollectionGroup(e,t,i,r){r4(9500)}ii(e,t){return nO.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new a1(this)}getSize(e){return nO.resolve(this.size)}}class a1 extends aW{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),nO.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class a2{constructor(e){this.persistence=e,this.si=new sX(e=>sU(e),sF),this.lastRemoteSnapshotVersion=nP.min(),this.highestTargetId=0,this.oi=0,this._i=new aQ,this.targetCount=0,this.ai=aF.ur()}forEachTarget(e,t){return this.si.forEach((e,i)=>t(i)),nO.resolve()}getLastRemoteSnapshotVersion(e){return nO.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nO.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),nO.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),nO.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new aF(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,nO.resolve()}updateTargetData(e,t){return this.Pr(t),nO.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,nO.resolve()}removeTargets(e,t,i){let r=0,n=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.si.delete(s),n.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),nO.waitFor(n).next(()=>r)}getTargetCount(e){return nO.resolve(this.targetCount)}getTargetData(e,t){let i=this.si.get(t)||null;return nO.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),nO.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);let r=this.persistence.referenceDelegate,n=[];return r&&t.forEach(t=>{n.push(r.markPotentiallyOrphaned(e,t))}),nO.waitFor(n)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),nO.resolve()}getMatchingKeysForTargetId(e,t){let i=this._i.Hr(t);return nO.resolve(i)}containsKey(e,t){return nO.resolve(this._i.containsKey(t))}}class a3{constructor(e,t){this.ui={},this.overlays={},this.ci=new nL(0),this.li=!1,this.li=!0,this.hi=new aY,this.referenceDelegate=e(this),this.Pi=new a2(this),this.indexManager=new aM,this.remoteDocumentCache=new a0(e=>this.referenceDelegate.Ti(e)),this.serializer=new aD(t),this.Ii=new aK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new aZ(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){r2("MemoryPersistence","Starting transaction:",e);let r=new a5(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return nO.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class a5 extends nN{constructor(e){super(),this.currentSequenceNumber=e}}class a6{constructor(e){this.persistence=e,this.Ri=new aQ,this.Vi=null}static mi(e){return new a6(e)}get fi(){if(this.Vi)return this.Vi;throw r4(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),nO.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),nO.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),nO.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nO.forEach(this.fi,i=>{let r=nb.fromPath(i);return this.gi(e,r).next(e=>{e||t.removeEntry(r,nP.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return nO.or([()=>nO.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class a4{constructor(e,t){this.persistence=e,this.pi=new sX(e=>(function(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let i=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=r}}return i}(e.get(i),t);return t+"\x01\x01"})(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=new aH(this,t)}static mi(e,t){return new a4(e,t)}Ei(){}di(e){return nO.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return nO.forEach(this.pi,(i,r)=>this.br(e,i,r).next(e=>e?nO.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),n=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(i++,n.removeEntry(r,nP.min()))})).next(()=>n.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),nO.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),nO.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),nO.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),nO.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(sn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let i=n5(t);return i?16+e(i):16;case 5:return 2*t.stringValue.length;case 6:return nJ(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,i)=>t+e(i),0);case 10:case 11:var r;let n;return r=t.mapValue,n=0,nF(r.fields,(t,i)=>{n+=t.length+e(i)}),n;default:throw r4(13486,{value:t})}}(e.data.value)),t}br(e,t,i){return nO.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return nO.resolve(void 0!==e&&e>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class a8{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=s3(),r=s3();for(let e of t.docChanges)switch(e.type){case 0:i=i.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new a8(e,t.fromCache,i,r)}}class a7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class a9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){let t;return!function(){let t=A()?.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Number((t=U().match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1")>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){let n={result:null};return this.ys(e,t).next(e=>{n.result=e}).next(()=>{if(!n.result)return this.ws(e,t,r,i).next(e=>{n.result=e})}).next(()=>{if(n.result)return;let i=new a7;return this.Ss(e,t,i).next(r=>{if(n.result=r,this.Vs)return this.bs(e,t,i,r.size)})}).next(()=>n.result)}bs(e,t,i,r){return i.documentReadCount<this.fs?(r1()<=a.DEBUG&&r2("QueryEngine","SDK will not create cache indexes for query:",sG(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),nO.resolve()):(r1()<=a.DEBUG&&r2("QueryEngine","Query:",sG(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(r1()<=a.DEBUG&&r2("QueryEngine","The SDK decides to create cache indexes for query:",sG(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sz(t))):nO.resolve())}ys(e,t){if(sB(t))return nO.resolve(null);let i=sz(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(i=sz(t=sH(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{let n=s3(...r);return this.ps.getDocuments(e,n).next(r=>this.indexManager.getMinOffset(e,i).next(i=>{let s=this.Ds(t,r);return this.Cs(t,s,n,i.readTime)?this.ys(e,sH(t,null,"F")):this.vs(e,s,t,i)}))})))}ws(e,t,i,r){return sB(t)||r.isEqual(nP.min())?nO.resolve(null):this.ps.getDocuments(e,i).next(n=>{let s,o,l=this.Ds(t,n);return this.Cs(t,l,i,r)?nO.resolve(null):(r1()<=a.DEBUG&&r2("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sG(t)),this.vs(e,l,t,(s=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,new nR(nP.fromTimestamp(1e9===o?new nk(s+1,0):new nk(s,o)),nb.empty(),-1))).next(e=>e))})}Ds(e,t){let i=new nH((t,i)=>{let r=!1;for(let n of s$(e)){let e=function(e,t,i){var r;let n,s,a=e.field.isKeyField()?nb.comparator(t.key,i.key):(r=e.field,n=t.data.field(r),s=i.data.field(r),null!==n&&null!==s?so(n,s):r4(42886));switch(e.dir){case"asc":return a;case"desc":return -1*a;default:return r4(19790,{direction:e.dir})}}(n,t,i);if(0!==e)return e;r=r||n.field.isKeyField()}return 0});return t.forEach((t,r)=>{sK(e,r)&&(i=i.add(r))}),i}Cs(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;let n="F"===e.limitType?t.last():t.first();return!!n&&(n.hasPendingWrites||n.version.compareTo(r)>0)}Ss(e,t,i){return r1()<=a.DEBUG&&r2("QueryEngine","Using full collection scan to execute query:",sG(t)),this.ps.getDocumentsMatchingQuery(e,t,nR.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class oe{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new nB(nc),this.xs=new sX(e=>sU(e),sF),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aG(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function ot(e,t){return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(n=>(r=n,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(t=>{let n=[],s=[],a=s3();for(let e of r)for(let t of(n.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return e.localDocuments.getDocuments(i,a).next(e=>({Ls:e,removedBatchIds:n,addedBatchIds:s}))})})}class oi{constructor(){this.activeTargetIds=s5}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class or{constructor(){this.Mo=new oi,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new oi,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class on{Oo(e){}shutdown(){}}let os="ConnectivityMonitor";class oa{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){for(let e of(r2(os,"Network connectivity changed: AVAILABLE"),this.qo))e(0)}ko(){for(let e of(r2(os,"Network connectivity changed: UNAVAILABLE"),this.qo))e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oo=null;function ol(){return null===oo?oo=0x10000000+Math.round(0x80000000*Math.random()):oo++,"0x"+oo.toString(16)}let oh="RestConnection",ou={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oc{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===n8?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,n){let s=ol(),a=this.zo(e,t.toUriEncodedString());r2(oh,`Sending RPC '${e}' ${s}:`,a,i);let o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,n);let{host:l}=new URL(a),h=D(l);return this.Jo(e,a,o,i,h).then(t=>(r2(oh,`Received RPC '${e}' ${s}: `,t),t),t=>{throw r5(oh,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",i),t})}Ho(e,t,i,r,n,s){return this.Go(e,t,i,r,n)}jo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+rZ,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,i)=>e[i]=t),i&&i.headers.forEach((t,i)=>e[i]=t)}zo(e,t){let i=ou[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class od{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}let of="WebChannelConnection";class op extends oc{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,n){let s=ol();return new Promise((n,a)=>{let o=new l;o.setWithCredentials(!0),o.listenOnce(u.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case c.NO_ERROR:let t=o.getResponseJson();r2(of,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),n(t);break;case c.TIMEOUT:r2(of,`RPC '${e}' ${s} timed out`),a(new ne(r9.DEADLINE_EXCEEDED,"Request time out"));break;case c.HTTP_ERROR:let i=o.getStatus();if(r2(of,`RPC '${e}' ${s} failed with status:`,i,"response text:",o.getResponseText()),i>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e,i=(e=t.status.toLowerCase().replace(/_/g,"-"),Object.values(r9).indexOf(e)>=0?e:r9.UNKNOWN);a(new ne(i,t.message))}else a(new ne(r9.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ne(r9.UNAVAILABLE,"Connection failed."));break;default:r4(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{r2(of,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(r);r2(of,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",h,i,15)})}T_(e,t,i){let r=ol(),n=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=m(),a=p(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,i),o.encodeInitMessageHeaders=!0;let u=n.join("");r2(of,`Creating RPC '${e}' stream ${r}: ${u}`,o);let c=s.createWebChannel(u,o);this.I_(c);let y=!1,v=!1,w=new od({Yo:t=>{v?r2(of,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(y||(r2(of,`Opening RPC '${e}' stream ${r} transport.`),c.open(),y=!0),r2(of,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Zo:()=>c.close()}),b=(e,t,i)=>{e.listen(t,e=>{try{i(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(c,h.EventType.OPEN,()=>{v||(r2(of,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),b(c,h.EventType.CLOSE,()=>{v||(v=!0,r2(of,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(c))}),b(c,h.EventType.ERROR,t=>{v||(v=!0,r5(of,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),w.a_(new ne(r9.UNAVAILABLE,"The operation could not be completed")))}),b(c,h.EventType.MESSAGE,t=>{if(!v){let i=t.data[0];r7(!!i,16349);let n=i?.error||i[0]?.error;if(n){r2(of,`RPC '${e}' stream ${r} received error:`,n);let t=n.status,i=function(e){let t=g[e];if(void 0!==t){if(void 0===t)return r3("GRPC error has no .code"),r9.UNKNOWN;switch(t){case g.OK:return r9.OK;case g.CANCELLED:return r9.CANCELLED;case g.UNKNOWN:return r9.UNKNOWN;case g.DEADLINE_EXCEEDED:return r9.DEADLINE_EXCEEDED;case g.RESOURCE_EXHAUSTED:return r9.RESOURCE_EXHAUSTED;case g.INTERNAL:return r9.INTERNAL;case g.UNAVAILABLE:return r9.UNAVAILABLE;case g.UNAUTHENTICATED:return r9.UNAUTHENTICATED;case g.INVALID_ARGUMENT:return r9.INVALID_ARGUMENT;case g.NOT_FOUND:return r9.NOT_FOUND;case g.ALREADY_EXISTS:return r9.ALREADY_EXISTS;case g.PERMISSION_DENIED:return r9.PERMISSION_DENIED;case g.FAILED_PRECONDITION:return r9.FAILED_PRECONDITION;case g.ABORTED:return r9.ABORTED;case g.OUT_OF_RANGE:return r9.OUT_OF_RANGE;case g.UNIMPLEMENTED:return r9.UNIMPLEMENTED;case g.DATA_LOSS:return r9.DATA_LOSS;default:return r4(39323,{code:t})}}}(t),s=n.message;void 0===i&&(i=r9.INTERNAL,s="Unknown error status: "+t+" with message "+n.message),v=!0,w.a_(new ne(i,s)),c.close()}else r2(of,`RPC '${e}' stream ${r} received:`,i),w.u_(i)}}),b(a,f.STAT_EVENT,t=>{t.stat===d.PROXY?r2(of,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===d.NOPROXY&&r2(of,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function om(){return"undefined"!=typeof document?document:null}function og(e){return new aI(e,!0)}class oy{constructor(e,t,i=1e3,r=1.5,n=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=n,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&r2("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}let ov="PersistentStream";class ow{constructor(e,t,i,r,n,s,a,o){this.Mi=e,this.S_=i,this.b_=r,this.connection=n,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oy(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===r9.RESOURCE_EXHAUSTED?(r3(t.toString()),r3("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===r9.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,i])=>{this.D_===t&&this.G_(e,i)},t=>{e(()=>{let e=new ne(r9.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){let i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{i(()=>this.z_(e))}),this.stream.onMessage(e=>{i(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return r2(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(r2(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ob extends ow{constructor(e,t,i,r,n,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=n}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return r7(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,r7(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){var t,i;r7(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let r=(t=e.writeResults,i=e.commitTime,t&&t.length>0?(r7(void 0!==i,14353),t.map(e=>{let t;return(t=e.updateTime?aC(e.updateTime):aC(i)).isEqual(nP.min())&&(t=aC(i)),new al(t,e.transformResults||[])})):[]),n=aC(e.commitTime);return this.listener.na(n,r)}ra(){var e;let t={};t.database=new ny(["projects",(e=this.serializer).databaseId.projectId,"databases",e.databaseId.database]).canonicalString(),this.q_(t)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var i,r;let n;if(t instanceof am)n={update:aR(e,t.key,t.value)};else if(t instanceof ab)n={delete:aP(e,t.key)};else if(t instanceof ag){let i;n={update:aR(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach(e=>i.push(e.canonicalString())),{fieldPaths:i})}}else{if(!(t instanceof aE))return r4(16599,{Vt:t.type});n={verify:aP(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let i=t.transform;if(i instanceof s9)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(i instanceof ae)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:i.elements}};if(i instanceof ai)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:i.elements}};if(i instanceof an)return{fieldPath:t.field.canonicalString(),increment:i.Ae};throw r4(20930,{transform:t.transform})})(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:ax(e,i.updateTime.toTimestamp())}:void 0!==i.exists?{exists:i.exists}:r4(27497)),n})(this.serializer,e))};this.q_(t)}}class oE{}class oT extends oE{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ne(r9.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.Go(e,ak(t,i),r,n,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===r9.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ne(r9.UNKNOWN,e.toString())})}Ho(e,t,i,r,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,ak(t,i),r,s,a,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===r9.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ne(r9.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class o_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(r3(t),this.aa=!1):r2("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}let oS="RemoteStore";class oI{constructor(e,t,i,r,n){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=n,this.Aa.Oo(e=>{i.enqueueAndForget(async()=>{oA(this)&&(r2(oS,"Restarting streams for network reachability change."),await async function(e){e.Ea.add(4),await oC(e),e.Ra.set("Unknown"),e.Ea.delete(4),await ox(e)}(this))})}),this.Ra=new o_(i,r)}}async function ox(e){if(oA(e))for(let t of e.da)await t(!0)}async function oC(e){for(let t of e.da)await t(!1)}function oA(e){return 0===e.Ea.size}async function ok(e,t,i){if(!nM(t))throw t;e.Ea.add(1),await oC(e),e.Ra.set("Offline"),i||(i=()=>{var t;return(t=e.localStore).persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}),e.asyncQueue.enqueueRetryable(async()=>{r2(oS,"Retrying IndexedDB access"),await i(),e.Ea.delete(1),await ox(e)})}function oP(e,t){return t().catch(i=>ok(e,i,t))}async function oR(e){var t;let i=oj(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:-1;for(;oA(t=e)&&t.Ta.length<10;)try{let t=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}(e.localStore,r);if(null===t){0===e.Ta.length&&i.L_();break}r=t.batchId,function(e,t){e.Ta.push(t);let i=oj(e);i.O_()&&i.X_&&i.ea(t.mutations)}(e,t)}catch(t){await ok(e,t)}oN(e)&&oD(e)}function oN(e){return oA(e)&&!oj(e).x_()&&e.Ta.length>0}function oD(e){oj(e).start()}async function oO(e){oj(e).ra()}async function oM(e){let t=oj(e);for(let i of e.Ta)t.ea(i.mutations)}async function oL(e,t,i){let r=e.Ta.shift(),n=a_.from(r,t,i);await oP(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await oR(e)}async function oV(e,t){t&&oj(e).X_&&await async function(e,t){var i;if(function(e){switch(e){case r9.OK:return r4(64938);case r9.CANCELLED:case r9.UNKNOWN:case r9.DEADLINE_EXCEEDED:case r9.RESOURCE_EXHAUSTED:case r9.INTERNAL:case r9.UNAVAILABLE:case r9.UNAUTHENTICATED:return!1;case r9.INVALID_ARGUMENT:case r9.NOT_FOUND:case r9.ALREADY_EXISTS:case r9.PERMISSION_DENIED:case r9.FAILED_PRECONDITION:case r9.ABORTED:case r9.OUT_OF_RANGE:case r9.UNIMPLEMENTED:case r9.DATA_LOSS:return!0;default:return r4(15467,{code:e})}}(i=t.code)&&i!==r9.ABORTED){let i=e.Ta.shift();oj(e).B_(),await oP(e,()=>e.remoteSyncer.rejectFailedWrite(i.batchId,t)),await oR(e)}}(e,t),oN(e)&&oD(e)}async function oU(e,t){e.asyncQueue.verifyOperationInProgress(),r2(oS,"RemoteStore received new credentials");let i=oA(e);e.Ea.add(3),await oC(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await ox(e)}async function oF(e,t){t?(e.Ea.delete(2),await ox(e)):t||(e.Ea.add(2),await oC(e),e.Ra.set("Unknown"))}function oj(e){var t,i,r;return e.fa||(t=e.datastore,i=e.asyncQueue,r={Xo:()=>Promise.resolve(),t_:oO.bind(null,e),r_:oV.bind(null,e),ta:oM.bind(null,e),na:oL.bind(null,e)},t.sa(),e.fa=new ob(i,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r),e.da.push(async t=>{t?(e.fa.B_(),await oR(e)):(await e.fa.stop(),e.Ta.length>0&&(r2(oS,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class oB{constructor(e,t,i,r,n){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=n,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,n){let s=new oB(e,t,Date.now()+i,r,n);return s.start(i),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ne(r9.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o$(e,t){if(r3("AsyncQueue",`${t}: ${e}`),nM(e))return new ne(r9.UNAVAILABLE,`${t}: ${e}`);throw e}class oz{constructor(){this.queries=oH(),this.onlineState="Unknown",this.Ca=new Set}terminate(){var e;let t;e=new ne(r9.ABORTED,"Firestore shutting down"),t=this.queries,this.queries=oH(),t.forEach((t,i)=>{for(let t of i.Sa)t.onError(e)})}}function oH(){return new sX(e=>sq(e),sW)}(w=v||(v={})).Ma="default",w.Cache="cache";class oW{constructor(e,t,i,r,n,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=n,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new sX(e=>sq(e),sW),this.Iu=new Map,this.Eu=new Set,this.du=new nB(nb.comparator),this.Au=new Map,this.Ru=new aQ,this.Vu={},this.mu=new Map,this.fu=aF.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function oq(e,t,i){var r,n,s;let a=((r=e).remoteStore.remoteSyncer.applySuccessfulWrite=oK.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=oX.bind(null,r),r);try{let e,r,o,l,h,u=await (n=a.localStore,o=nk.now(),l=t.reduce((e,t)=>e.add(t.key),s3()),n.persistence.runTransaction("Locally write mutations","readwrite",i=>{let s=sY,a=s3();return n.Ns.getEntries(i,l).next(e=>{(s=e).forEach((e,t)=>{t.isValidDocument()||(a=a.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(i,s)).next(r=>{e=r;let s=[];for(let i of t){let t=function(e,t){let i=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),n=s7(r.transform,e||null);null!=n&&(null===i&&(i=sy.empty()),i.set(r.field,n))}return i||null}(i,e.get(i.key).overlayedDocument);null!=t&&s.push(new ag(i.key,t,function e(t){let i=[];return nF(t.fields,(t,r)=>{let n=new nw([t]);if(sf(r)){let t=e(r.mapValue).fields;if(0===t.length)i.push(n);else for(let e of t)i.push(n.child(e))}else i.push(n)}),new nq(i)}(t.value.mapValue),ah.exists(!0)))}return n.mutationQueue.addMutationBatch(i,o,s,t)}).next(t=>{r=t;let s=t.applyToLocalDocumentSet(e,a);return n.documentOverlayCache.saveOverlays(i,t.batchId,s)})}).then(()=>({batchId:r.batchId,changes:sZ(e)})));a.sharedClientState.addPendingMutation(u.batchId),s=u.batchId,(h=a.Vu[a.currentUser.toKey()])||(h=new nB(nc)),h=h.insert(s,i),a.Vu[a.currentUser.toKey()]=h,await oJ(a,u.changes),await oR(a.remoteStore)}catch(t){let e=o$(t,"Failed to persist write");i.reject(e)}}function oG(e,t,i){var r;if(e.isPrimaryClient&&0===i||!e.isPrimaryClient&&1===i){let i,n=[];e.Tu.forEach((e,i)=>{let r=i.view.va(t);r.snapshot&&n.push(r.snapshot)}),(r=e.eventManager).onlineState=t,i=!1,r.queries.forEach((e,r)=>{for(let e of r.Sa)e.va(t)&&(i=!0)}),i&&r.Ca.forEach(e=>{e.next()}),n.length&&e.Pu.H_(n),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function oK(e,t){var i;let r=t.batch.batchId;try{let n=await (i=e.localStore,i.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let r,n,s,a=t.batch.keys(),o=i.Ns.newChangeBuffer({trackRemovals:!0});return(n=(r=t.batch).keys(),s=nO.resolve(),n.forEach(i=>{s=s.next(()=>o.getEntry(e,i)).next(e=>{let n=t.docVersions.get(i);r7(null!==n,48541),0>e.version.compareTo(n)&&(r.applyToRemoteDocument(e,t),e.isValidDocument()&&(e.setReadTime(t.commitVersion),o.addEntry(e)))})}),s.next(()=>i.mutationQueue.removeMutationBatch(e,r))).next(()=>o.apply(e)).next(()=>i.mutationQueue.performConsistencyCheck(e)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(e,a,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=s3();for(let i=0;i<e.mutationResults.length;++i)e.mutationResults[i].transformResults.length>0&&(t=t.add(e.batch.mutations[i].key));return t}(t))).next(()=>i.localDocuments.getDocuments(e,a))}));oQ(e,r,null),oY(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await oJ(e,n)}catch(e){await nD(e)}}async function oX(e,t,i){var r;try{let n=await (r=e.localStore,r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(r7(null!==t,37113),i=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,i,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)).next(()=>r.localDocuments.getDocuments(e,i))}));oQ(e,t,i),oY(e,t),e.sharedClientState.updateMutationState(t,"rejected",i),await oJ(e,n)}catch(e){await nD(e)}}function oY(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function oQ(e,t,i){let r=e.Vu[e.currentUser.toKey()];if(r){let n=r.get(t);n&&(i?n.reject(i):n.resolve(),r=r.remove(t)),e.Vu[e.currentUser.toKey()]=r}}async function oJ(e,t,i){let r=[],n=[],s=[];e.Tu.isEmpty()||(e.Tu.forEach((a,o)=>{s.push(e.pu(o,t,i).then(t=>{if((t||i)&&e.isPrimaryClient){let r=t?!t.fromCache:i?.targetChanges.get(o.targetId)?.current;e.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(t){r.push(t);let e=a8.As(o.targetId,t);n.push(e)}}))}),await Promise.all(s),e.Pu.H_(r),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",i=>nO.forEach(t,t=>nO.forEach(t.Es,r=>e.persistence.referenceDelegate.addReference(i,t.targetId,r)).next(()=>nO.forEach(t.ds,r=>e.persistence.referenceDelegate.removeReference(i,t.targetId,r)))))}catch(e){if(!nM(e))throw e;r2("LocalStore","Failed to update sequence numbers: "+e)}for(let i of t){let t=i.targetId;if(!i.fromCache){let i=e.Ms.get(t),r=i.snapshotVersion,n=i.withLastLimboFreeSnapshotVersion(r);e.Ms=e.Ms.insert(t,n)}}}(e.localStore,n))}async function oZ(e,t){if(!e.currentUser.isEqual(t)){r2("SyncEngine","User change. New user:",t.toKey());let i=await ot(e.localStore,t);e.currentUser=t,e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ne(r9.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await oJ(e,i.Ls)}}class o0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=og(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){var t,i;return t=this.persistence,i=new a9,new oe(t,i,e.initialUser,this.serializer)}Cu(e){return new a3(a6.mi,this.serializer)}Du(e){return new or}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}o0.provider={build:()=>new o0};class o1 extends o0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){return r7(this.persistence.referenceDelegate instanceof a4,46915),new az(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Cu(e){let t=void 0!==this.cacheSizeBytes?aU.withCacheSize(this.cacheSizeBytes):aU.DEFAULT;return new a3(e=>a4.mi(e,t),this.serializer)}}class o2{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>oG(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=oZ.bind(null,this.syncEngine),await oF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oz}createDatastore(e){var t;let i=og(e.databaseInfo.databaseId),r=new op(e.databaseInfo);return t=e.authCredentials,new oT(t,e.appCheckCredentials,r,i)}createRemoteStore(e){var t,i;return t=this.localStore,i=this.datastore,new oI(t,i,e.asyncQueue,e=>oG(this.syncEngine,e,0),oa.v()?new oa:new on)}createSyncEngine(e,t){var i,r,n,s,a,o;let l;return i=this.localStore,r=this.remoteStore,n=this.eventManager,s=this.sharedClientState,a=e.initialUser,o=e.maxConcurrentLimboResolutions,l=new oW(i,r,n,s,a,o),t&&(l.gu=!0),l}async terminate(){await async function(e){r2(oS,"RemoteStore shutting down."),e.Ea.add(5),await oC(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}o2.provider={build:()=>new o2};let o3="FirestoreClient";class o5{constructor(e,t,i,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=rJ.UNAUTHENTICATED,this.clientId=nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=n,this.authCredentials.start(i,async e=>{r2(o3,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(i,e=>(r2(o3,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){let t=o$(i,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function o6(e,t){e.asyncQueue.verifyOperationInProgress(),r2(o3,"Initializing OfflineComponentProvider");let i=e.configuration;await t.initialize(i);let r=i.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ot(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function o4(e,t){e.asyncQueue.verifyOperationInProgress();let i=await o8(e);r2(o3,"Initializing OnlineComponentProvider"),await t.initialize(i,e.configuration),e.setCredentialChangeListener(e=>oU(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,i)=>oU(t.remoteStore,i)),e._onlineComponents=t}async function o8(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){r2(o3,"Using user provided OfflineComponentProvider");try{await o6(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===r9.FAILED_PRECONDITION||t.code===r9.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;r5("Error using user provided cache. Falling back to memory cache: "+t),await o6(e,new o0)}}else r2(o3,"Using default OfflineComponentProvider"),await o6(e,new o1(void 0));return e._offlineComponents}async function o7(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(r2(o3,"Using user provided OnlineComponentProvider"),await o4(e,e._uninitializedComponentsProvider._online)):(r2(o3,"Using default OnlineComponentProvider"),await o4(e,new o2))),e._onlineComponents}function o9(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let le=new Map,lt="firestore.googleapis.com";class li{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new ne(r9.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lt,this.ssl=!0}else this.host=e.host,this.ssl=e.ssl??!0;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ne(r9.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,i,r){if(!0===t&&!0===r)throw new ne(r9.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o9(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ne(r9.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ne(r9.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ne(r9.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,i;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,t.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lr{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new li({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(r9.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ne(r9.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new li(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nr;switch(e.type){case"firstParty":return new no(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ne(r9.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){let e;return(e=le.get(this))&&(r2("ComponentProvider","Removing Datastore"),le.delete(this),e.terminate()),Promise.resolve()}}class ln{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ln(this.firestore,e,this._query)}}class ls{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ls(this.firestore,e,this._key)}toJSON(){return{type:ls._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(nA(t,ls._jsonSchema))return new ls(e,i||null,new nb(ny.fromString(t.referencePath)))}}ls._jsonSchemaVersion="firestore/documentReference/1.0",ls._jsonSchema={type:nC("string",ls._jsonSchemaVersion),referencePath:nC("string")};class la extends ln{constructor(e,t,i){super(e,t,new sj(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ls(this.firestore,null,new nb(e))}withConverter(e){return new la(this.firestore,e,this._path)}}let lo="AsyncQueue";class ll{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oy(this,"async_queue_retry"),this._c=()=>{let e=om();e&&r2(lo,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=om();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=om();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new nt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nM(e))throw e;r2(lo,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,r3("INTERNAL UNHANDLED ERROR: ",lh(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=oB.createAndSchedule(this,e,t,i,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&r4(47125,{Pc:lh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{for(let t of(this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.tc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}}function lh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class lu extends lr{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new ll,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ll(e),this._firestoreClient=void 0,await e}}}class lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lc(nK.fromBase64String(e))}catch(e){throw new ne(r9.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new lc(nK.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nA(e,lc._jsonSchema))return lc.fromBase64String(e.bytes)}}lc._jsonSchemaVersion="firestore/bytes/1.0",lc._jsonSchema={type:nC("string",lc._jsonSchemaVersion),bytes:nC("string")};class ld{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ne(r9.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nw(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lf{constructor(e){this._methodName=e}}class lp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(r9.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(r9.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nc(this._lat,e._lat)||nc(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lp._jsonSchemaVersion}}static fromJSON(e){if(nA(e,lp._jsonSchema))return new lp(e.latitude,e.longitude)}}lp._jsonSchemaVersion="firestore/geoPoint/1.0",lp._jsonSchema={type:nC("string",lp._jsonSchemaVersion),latitude:nC("number"),longitude:nC("number")};class lm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:lm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nA(e,lm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new lm(e.vectorValues);throw new ne(r9.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lm._jsonSchemaVersion="firestore/vectorValue/1.0",lm._jsonSchema={type:nC("string",lm._jsonSchemaVersion),vectorValues:nC("object")};let lg=/^__.*__$/;class ly{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ag(e,this.data,this.fieldMask,t,this.fieldTransforms):new am(e,this.data,t,this.fieldTransforms)}}function lv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw r4(40011,{Ac:e})}}class lw{constructor(e,t,i,r,n,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===n&&this.Rc(),this.fieldTransforms=n||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){let t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(lv(this.Ac)&&lg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lb{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||og(e)}Cc(e,t,i,r=!1){return new lw({Ac:e,methodName:t,Dc:i,path:nw.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}class lE extends lf{_toFieldTransform(e){return new ao(e.path,new s9)}isEqual(e){return e instanceof lE}}function lT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nk||e instanceof lp||e instanceof lc||e instanceof ls||e instanceof lf||e instanceof lm)}function l_(e,t,i){if(!lT(i)||!nS(i)){let r=nI(i);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}let lS=RegExp("[~\\*/\\[\\]]");function lI(e,t,i){if(t.search(lS)>=0)throw lx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new ld(...t.split("."))._internalPath}catch(r){throw lx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function lx(e,t,i,r,n){let s=r&&!r.isEmpty(),a=void 0!==n,o=`Function ${t}() called with invalid data`;i&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${n}`),l+=")"),new ne(r9.INVALID_ARGUMENT,o+e+l)}class lC{constructor(e,t,i,r,n){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=n}get id(){return this._key.path.lastSegment()}get ref(){return new ls(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new lA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lA extends lC{data(){return super.data()}}function lk(e,t){return"string"==typeof t?lI(e,t):t instanceof ld?t._internalPath:t._delegate._internalPath}class lP{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lR extends lC{constructor(e,t,i,r,n,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=n}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new lN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(lk("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(r9.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=lR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),this._firestore,this.ref.path,t.bundle="NOT SUPPORTED"),t}}lR._jsonSchemaVersion="firestore/documentSnapshot/1.0",lR._jsonSchema={type:nC("string",lR._jsonSchemaVersion),bundleSource:nC("string","DocumentSnapshot"),bundleName:nC("string"),bundle:nC("string")};class lN extends lR{data(e={}){return super.data(e)}}class lD{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lP(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new lN(this._firestore,this._userDataWriter,i.key,i,new lP(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(r9.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(i=>{let r=new lN(e._firestore,e._userDataWriter,i.doc.key,i.doc,new lP(e._snapshot.mutatedKeys.has(i.doc.key),e._snapshot.fromCache),e.query.converter);return i.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let i=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let r=new lN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lP(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),n=-1,s=-1;return 0!==t.type&&(n=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(s=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return r4(61501,{type:e})}}(t.type),doc:r,oldIndex:n,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(r9.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=lD._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),i.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),this._firestore,this.query._query,e.bundleName,e.bundle="NOT SUPPORTED",e}}lD._jsonSchemaVersion="firestore/querySnapshot/1.0",lD._jsonSchema={type:nC("string",lD._jsonSchemaVersion),bundleSource:nC("string","QuerySnapshot"),bundleName:nC("string"),bundle:nC("string")},new WeakMap,function(e=!0){rZ=eB,eP(new Q("firestore",(t,{instanceIdentifier:i,options:r})=>{let n=t.getProvider("app").getImmediate(),s=new lu(new ns(t.getProvider("auth-internal")),new nh(n,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ne(r9.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new n7(e.options.projectId,t)}(n,i),n);return r={useFetchStreams:e,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),eG(rY,rQ,void 0),eG(rY,rQ,"esm2020")}();let lO={apiKey:b.default.env.NEXT_PUBLIC_FIREBASE_API_KEY||"YOUR_API_KEY",authDomain:b.default.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"YOUR_PROJECT_ID.firebaseapp.com",projectId:b.default.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"YOUR_PROJECT_ID",storageBucket:b.default.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"YOUR_PROJECT_ID.appspot.com",messagingSenderId:b.default.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"YOUR_MESSAGING_SENDER_ID",appId:b.default.env.NEXT_PUBLIC_FIREBASE_APP_ID||"YOUR_APP_ID",measurementId:b.default.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||""},lM=new class{app;auth;firestore;googleProvider;constructor(){eW().length?this.app=eH():this.app=e$(lO),this.auth=function(e=eH()){let t=eR(e,"auth");if(t.isInitialized())return t.getImmediate();let i=function(e,t){let i=eR(e,"auth");if(i.isInitialized()){let e=i.getImmediate();if(z(i.getOptions(),t??{}))return e;te(e,"already-initialized")}return i.initialize({options:t})}(e,{popupRedirectResolver:rj,persistence:[rt,iK,iX]}),r=R("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t,r=(t=e.toString(),async e=>{let i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>rH)return;let n=i?.token;rW!==n&&(rW=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});Y(i).beforeAuthStateChanged(r,()=>r(i.currentUser)),Y(i).onIdTokenChanged(e=>r(e),void 0,void 0)}}let n=k("auth");return n&&function(e,t,i){let r=Y(e);ts(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let n=iu(t),{host:s,port:a}=function(e){let t=iu(e),i=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!i)return{host:"",port:null};let r=i[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){let e=n[1];return{host:e,port:ic(r.substr(e.length+1))}}{let[e,t]=r.split(":");return{host:e,port:ic(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${n}//${s}${o}/`},h=Object.freeze({host:s,port:a,protocol:n.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator){ts(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ts(z(l,r.config.emulator)&&z(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,D(s)?(O(`${n}//${s}${o}`),V("Auth",!0)):function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(i,`http://${n}`),i}(this.app),this.firestore=function(e,t){let i=eR("object"==typeof e?e:eH(),"firestore").getImmediate({identifier:"string"==typeof e?e:n8});if(!i._initialized){let e=(e=>{let t=k(e);if(!t)return;let i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(i+1),10);return"["===t[0]?[t.substring(1,i-1),r]:[t.substring(0,i),r]})("firestore");e&&function(e,t,i,r={}){e=nx(e,lr);let n=D(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${i}`;n&&(O(`https://${o}`),V("Firestore",!0)),s.host!==lt&&s.host!==o&&r5("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l={...s,host:o,ssl:n,emulatorOptions:r};if(!z(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,i;if("string"==typeof r.mockUserToken)t=r.mockUserToken,i=rJ.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let i=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}},...e};return[x(JSON.stringify({alg:"none",type:"JWT"})),x(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);let n=r.mockUserToken.sub||r.mockUserToken.user_id;if(!n)throw new ne(r9.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new rJ(n)}e._authCredentials=new nn(new ni(t,i))}}(i,...e)}return i}(this.app),this.googleProvider=new iN}async signInWithGoogle(){try{return(await rp(this.auth,this.googleProvider)).user}catch(e){return console.error("Error during Google sign-in:",e),null}}async signOut(){try{var e;await (e=this.auth,Y(e).signOut())}catch(e){console.error("Error during sign-out:",e)}}onAuthStateChanged(e){var t;return t=this.auth,Y(t).onAuthStateChanged(e,void 0,void 0)}async addHistoryEntry(e,t,i){try{var r,n,s;let a,o,l,h,u;if(!e)throw Error("User ID is required to add a history entry.");let c=function(e,t,...i){if(e=Y(e),nE("collection","path",t),e instanceof lr){let r=ny.fromString(t,...i);return n_(r),new la(e,null,r)}{if(!(e instanceof ls||e instanceof la))throw new ne(r9.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(ny.fromString(t,...i));return n_(r),new la(e.firestore,null,r)}}(this.firestore,`users/${e}/history`);await (r={url:t,title:i,timestamp:new lE("serverTimestamp")},a=nx(c.firestore,lu),o=function(e,t,...i){if(e=Y(e),1==arguments.length&&(t=nu.newId()),nE("doc","path",t),e instanceof lr){let r=ny.fromString(t,...i);return nT(r),new ls(e,null,new nb(r))}{if(!(e instanceof ls||e instanceof la))throw new ne(r9.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(ny.fromString(t,...i));return nT(r),new ls(e.firestore,e instanceof la?e.converter:null,new nb(r))}}(c),n=c.converter,l=n?n.toFirestore(r):r,(function(e,t){var i;let r;return i=function(e){if(e._terminated)throw new ne(r9.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,i,r,n;let s,a=e._freezeSettings(),o=(t=e._databaseId,i=e._app?.options.appId||"",r=e._persistenceKey,new n4(t,i,r,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,o9(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator));e._componentsProvider||a.localCache?._offlineComponentProvider&&a.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new o5(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&(n=e._componentsProvider,s=n?._online.build(),{_offline:n?._offline.build(s),_online:s}))}(e),e._firestoreClient}(e),r=new nt,i.asyncQueue.enqueueAndForget(async()=>oq(await o7(i).then(e=>e.syncEngine),t,r)),r.promise})(a,[(function(e,t,i,r,n,s={}){let a,o,l=e.Cc(s.merge||s.mergeFields?2:0,t,i,n);l_("Data must be an object, but it was:",l,r);let h=function e(t,i){let r={};return nj(t)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):nF(t,(t,n)=>{let s=function t(i,r){if(lT(i=Y(i)))return l_("Unsupported field value:",r,i),e(i,r);if(i instanceof lf)return function(e,t){if(!lv(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let i=e._toFieldTransform(t);i&&t.fieldTransforms.push(i)}(i,r),null;if(void 0===i&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),i instanceof Array){if(r.settings.fc&&4!==r.Ac)throw r.Sc("Nested arrays are not supported");let e=[],n=0;for(let s of i){let i=t(s,r.wc(n));null==i&&(i={nullValue:"NULL_VALUE"}),e.push(i),n++}return{arrayValue:{values:e}}}return function(e,t){var i,r,n,s,a;if(null===(e=Y(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return i=t.serializer,"number"==typeof(n=r=e)&&Number.isInteger(n)&&!nV(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?s4(r):s6(i,r);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let i=nk.fromDate(e);return{timestampValue:ax(t.serializer,i)}}if(e instanceof nk){let i=new nk(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ax(t.serializer,i)}}if(e instanceof lp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lc)return{bytesValue:(s=t.serializer,a=e._byteString,s.useProto3Json?a.toBase64():a.toUint8Array())};if(e instanceof ls){let i=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(i))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:aA(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof lm)return{mapValue:{fields:{[n9]:{stringValue:si},[sr]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return s6(t.serializer,e)})}}}}};throw t.Sc(`Unsupported field value: ${nI(e)}`)}(i,r)}(n,i.mc(t));null!=s&&(r[t]=s)}),{mapValue:{fields:r}}}(r,l);if(s.merge)a=new nq(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let r of s.mergeFields){let n=function(e,t,i){if((t=Y(t))instanceof ld)return t._internalPath;if("string"==typeof t)return lI(e,t);throw lx("Field path arguments must be of type string or ",e,!1,void 0,i)}(t,r,i);if(!l.contains(n))throw new ne(r9.INVALID_ARGUMENT,`Field '${n}' is specified in your field mask but missing from your input data.`);(function(e,t){return e.some(e=>e.isEqual(t))})(e,n)||e.push(n)}a=new nq(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new ly(new sy(h),a,o)})((h=(s=c.firestore)._freezeSettings(),u=og(s._databaseId),new lb(s._databaseId,!!h.ignoreUndefinedProperties,u)),"addDoc",o._key,l,null!==c.converter,{}).toMutation(o._key,ah.exists(!1))]).then(()=>o))}catch(e){console.error("Error adding history entry:",e)}}};e.s(["default",0,lM],83885)},30138,e=>{"use strict";let t=(0,e.i(40370).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],30138)},32266,e=>{"use strict";let t=(0,e.i(40370).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],32266)},9277,e=>{"use strict";let t=(0,e.i(40370).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],9277)},93627,83821,58293,92329,e=>{"use strict";var t=e.i(40370);let i=(0,t.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>i],93627);let r=(0,t.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);e.s(["LogOut",()=>r],83821);let n=(0,t.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);e.s(["LayoutDashboard",()=>n],58293);let s=(0,t.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>s],92329)},18342,e=>{"use strict";var t=e.i(70795),i=e.i(8250),r=e.i(50067),n=e.i(40487),s=e.i(83951),a=e.i(9277),o=e.i(45766),l=e.i(32266),h=e.i(38870),u=e.i(93627),c=e.i(83821),d=e.i(58293),f=e.i(92329),p=e.i(30138),m=e.i(74456),g=e.i(83885);function y(){let e=(0,m.useAppStore)(),y=t.default.env.NEXT_PUBLIC_APP_NAME||"Comet",[v,w]=(0,r.useState)("landing"),[b,E]=(0,r.useState)(null),[T,_]=(0,r.useState)(!1),[S,I]=(0,r.useState)("user"),[x,C]=(0,r.useState)(""),[A,k]=(0,r.useState)(""),[P,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>_(window.scrollY>50);window.addEventListener("scroll",e);let t=g.default.onAuthStateChanged(e=>{E(e),e&&"login"===v&&w("landing")}),i=localStorage.getItem("comet_personal_ai_key");return i&&k(i),()=>{window.removeEventListener("scroll",e),t()}},[v]);let N=async()=>{let e=await g.default.signInWithGoogle();e&&(E(e),w("landing"))},D=async()=>{await g.default.signOut(),E(null),w("landing")};return(0,i.jsxs)("div",{className:"min-h-screen bg-deep-space-bg text-white font-sans overflow-x-hidden relative selection:bg-deep-space-accent-neon/30",children:[(0,i.jsx)("nav",{className:`fixed top-0 left-0 right-0 z-[100] transition-all duration-500 px-8 py-6 ${T||"landing"!==v?"glass-vibrant border-b border-white/10 py-4 shadow-2xl":""}`,children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>w("landing"),children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-deep-space-accent-neon flex items-center justify-center text-deep-space-bg font-black text-xl shadow-glow",children:y.charAt(0)}),(0,i.jsx)("span",{className:"text-2xl font-black tracking-tighter uppercase",children:y})]}),(0,i.jsxs)("div",{className:"hidden md:flex items-center gap-10",children:["landing"===v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("a",{href:"#features",className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 hover:text-white transition-all",children:"Features"}),(0,i.jsx)("a",{href:"#intelligence",className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 hover:text-white transition-all",children:"Intelligence"})]}),b?(0,i.jsxs)("div",{className:"flex items-center gap-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[b.photoURL?(0,i.jsx)("img",{src:b.photoURL,alt:"Avatar",className:"w-6 h-6 rounded-full border border-white/10"}):(0,i.jsx)(u.User,{size:12,className:"text-deep-space-accent-neon"}),(0,i.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/60",children:b.displayName||"Authorized Node"})]}),(0,i.jsx)("button",{onClick:()=>w("admin"===v?"landing":"admin"),className:"text-deep-space-accent-neon hover:text-white transition-all",children:(0,i.jsx)(d.LayoutDashboard,{size:20})}),(0,i.jsx)("button",{onClick:D,className:"text-white/20 hover:text-red-400 transition-all",children:(0,i.jsx)(c.LogOut,{size:20})})]}):(0,i.jsx)("button",{onClick:()=>w("login"),className:"px-8 py-3 bg-white text-black font-black rounded-2xl text-[10px] uppercase tracking-widest hover:scale-105 transition-all shadow-2xl",children:"Get Started"})]})]})}),(0,i.jsxs)(s.AnimatePresence,{mode:"wait",children:["landing"===v&&(0,i.jsxs)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,i.jsx)("header",{className:"relative z-10 pt-48 pb-32 px-8 max-w-7xl mx-auto text-center",children:(0,i.jsxs)(n.motion.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},children:[(0,i.jsxs)("div",{className:"inline-flex items-center gap-2 px-6 py-2 bg-deep-space-accent-neon/10 border border-deep-space-accent-neon/20 rounded-full mb-10",children:[(0,i.jsx)(l.Sparkles,{size:14,className:"text-deep-space-accent-neon"}),(0,i.jsx)("span",{className:"text-[11px] font-black text-deep-space-accent-neon uppercase tracking-[0.3em]",children:"CROSS-OS NEURAL SYNC ACTIVE"})]}),(0,i.jsxs)("h1",{className:"text-6xl md:text-9xl font-black tracking-tighter mb-10 uppercase leading-none",children:["Web Browsing,",(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-deep-space-accent-neon to-white",children:"Redefined."})]}),(0,i.jsx)("p",{className:"max-w-2xl mx-auto text-white/40 text-xl font-medium mb-12",children:"Hardened Chromium core with native AI orchestration and multi-device synchronization."}),(0,i.jsx)("div",{className:"flex gap-4 justify-center",children:(0,i.jsx)("button",{onClick:()=>e.setActiveView("browser"),className:"px-10 py-5 bg-deep-space-accent-neon text-deep-space-bg font-black rounded-2xl text-[10px] uppercase tracking-widest hover:scale-105 transition-all shadow-glow",children:"Launch Browser Environment"})})]})}),b&&(0,i.jsx)("section",{id:"intelligence",className:"relative z-10 py-20 px-8 max-w-7xl mx-auto",children:(0,i.jsxs)("div",{className:"glass-vibrant border border-white/10 rounded-[4rem] p-16 flex flex-col md:flex-row items-center gap-16",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h2",{className:"text-4xl font-black uppercase tracking-tighter mb-6",children:"Personal AI Node"}),(0,i.jsx)("p",{className:"text-white/40 mb-10 font-medium",children:"Configure your unique AI identity. This key belongs solely to you and syncs across all your authenticated Comet nodes."}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("input",{type:"password",placeholder:"Personal AI API Key",value:A,onChange:e=>k(e.target.value),className:"flex-1 bg-black/40 border border-white/5 rounded-2xl px-6 py-4 text-sm outline-none focus:border-deep-space-accent-neon/30 transition-all font-mono"}),(0,i.jsx)("button",{onClick:()=>{localStorage.setItem("comet_personal_ai_key",A),R(!0),setTimeout(()=>R(!1),3e3)},className:"px-6 py-4 bg-white text-black font-black rounded-2xl text-[10px] uppercase tracking-widest hover:scale-105 transition-all",children:P?"Verified":"Deploy"})]})]}),(0,i.jsx)("div",{className:"w-64 h-64 rounded-full bg-deep-space-accent-neon/5 flex items-center justify-center border border-white/5",children:(0,i.jsx)(o.Cpu,{size:100,className:"text-deep-space-accent-neon animate-pulse"})})]})})]},"landing"),"login"===v&&(0,i.jsx)(n.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"min-h-screen flex items-center justify-center p-8",children:(0,i.jsxs)("div",{className:"w-full max-w-md glass-vibrant border border-white/10 rounded-[3rem] p-12 text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-deep-space-accent-neon flex items-center justify-center text-deep-space-bg mx-auto mb-8 shadow-glow",children:(0,i.jsx)(h.Shield,{size:32})}),(0,i.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tighter mb-2",children:"Comet Access"}),(0,i.jsx)("p",{className:"text-[10px] text-white/30 uppercase tracking-widest mb-10",children:"Select Authorization Method"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("button",{onClick:N,className:"w-full flex items-center justify-center gap-4 py-5 bg-white text-black rounded-2xl font-black uppercase tracking-widest text-[10px] hover:scale-[1.02] transition-all",children:[(0,i.jsx)(a.Globe,{size:18})," Continue with Google"]}),(0,i.jsxs)("div",{className:"py-4 flex items-center gap-4 text-white/10",children:[(0,i.jsx)("div",{className:"flex-1 h-[1px] bg-white/10"}),(0,i.jsx)("span",{className:"text-[9px] font-black uppercase",children:"Or Admin Core"}),(0,i.jsx)("div",{className:"flex-1 h-[1px] bg-white/10"})]}),(0,i.jsx)("input",{type:"password",placeholder:"Enter Admin Master Key",value:x,onChange:e=>C(e.target.value),className:"w-full bg-black/40 border border-white/5 rounded-2xl py-4 px-6 text-sm text-center focus:border-deep-space-accent-neon/30 outline-none transition-all"}),(0,i.jsx)("button",{onClick:()=>{"admin123"===x?w("admin"):alert("Invalid Admin Key")},className:"w-full py-4 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest text-white/40 hover:text-white hover:bg-white/10 transition-all",children:"Enter Admin Portal"})]})]})},"login"),"admin"===v&&(0,i.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen pt-32 px-12 pb-20",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)("header",{className:"flex items-center justify-between mb-16",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-5xl font-black uppercase tracking-tighter mb-4",children:"Core Management"}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse shadow-glow"}),(0,i.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/40",children:"Global Infrastructure: Online"})]})]}),(0,i.jsx)("button",{onClick:()=>w("landing"),className:"p-4 glass-vibrant border border-white/10 rounded-2xl text-white/40 hover:text-white transition-all",children:(0,i.jsx)(p.RefreshCw,{size:20})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,i.jsxs)("div",{className:"glass-vibrant border border-white/5 rounded-[3rem] p-10 col-span-2",children:[(0,i.jsxs)("h3",{className:"text-xs font-black uppercase tracking-widest text-white/30 mb-8 flex items-center gap-3",children:[(0,i.jsx)(f.Activity,{size:16,className:"text-deep-space-accent-neon"})," Real-time Node Activity"]}),(0,i.jsx)("div",{className:"space-y-4",children:[{msg:"Predictor v2 optimized",time:"12:04",type:"INFO"},{msg:"Node #DX-72 Sync Fail",time:"12:08",type:"ERR"},{msg:"Global Shield Hardened",time:"12:15",type:"INFO"}].map((e,t)=>(0,i.jsxs)("div",{className:"flex gap-6 items-center p-4 bg-white/5 rounded-2xl border border-white/5 font-mono text-[10px]",children:[(0,i.jsx)("span",{className:"text-white/20",children:e.time}),(0,i.jsxs)("span",{className:"ERR"===e.type?"text-red-400":"text-deep-space-accent-neon",children:["[",e.type,"]"]}),(0,i.jsx)("span",{className:"text-white/60",children:e.msg})]},t))})]}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{className:"glass-vibrant border border-white/5 rounded-[3rem] p-10 text-center",children:[(0,i.jsx)("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-4",children:"Total Nodes"}),(0,i.jsx)("p",{className:"text-6xl font-black tracking-tighter",children:"1,248"})]}),(0,i.jsxs)("div",{className:"glass-vibrant border border-white/5 rounded-[3rem] p-10 text-center",children:[(0,i.jsx)("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-4",children:"Uptime"}),(0,i.jsx)("p",{className:"text-6xl font-black tracking-tighter text-green-400",children:"99.9%"})]})]})]})]})},"admin")]}),(0,i.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[(0,i.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[60%] h-[60%] bg-deep-space-primary/10 rounded-full blur-[140px] animate-pulse"}),(0,i.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-deep-space-accent-neon/5 rounded-full blur-[140px]"})]})]})}e.s(["default",()=>y])}]);